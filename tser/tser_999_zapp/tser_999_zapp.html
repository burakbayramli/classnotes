<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  
    <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script type="text/x-mathjax-config">
    MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
      MathJax.Hub.Insert(MathJax.InputJax.TeX.Definitions.macros,{
        cancel: ["Extension","cancel"], cancelto: ["Extension","cancel"]
      });
    });
    </script>

  <title>Ekler</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
  
  
  
  
</head>
<body>
<h1 id="ekler">Ekler</h1>
<p>Log Veri Analizi</p>
<p>Zaman serisi veri analizlerini anlatan kaynaklarda bazen &quot;şimdi veriyi ilişkisel olarak analiz etmek için onun log'unu alalım'' gibi ifadeler görebiliyoruz. Bu sözle ne demek isteniyor?</p>
<p>Diyelim ki <span class="math inline">\(y_1,y_2,..,y_n\)</span> zaman serimiz var, log matematiğinden biliyoruz ki</p>
<p><span class="math inline">\(log(y_{t}/y_{t-1}) = \log(y_t) - \log(y_{t-1})\)</span></p>
<p>Yani bu serinin önce log'unu alıp sonra farkını hesaplarsak, sanki artış yüzdesinin log'unu analiz etmiş gibi oluruz, yani yüzde değişim rakamına odaklanmış oluruz, o artışın baz aldığı önceki seviye ne olursa olsun.</p>
<p>Ama başta sadece log'u analiz edelim diyor, farkı hesaplamadık diyelim? Yine de dolaylı olarak o farka odaklanıyor olabiliriz, mesela kullandığımız metot matematiksel olarak arda arda gelen noktaların farkını bir şekilde ortaya çıkartmaya uğraşıyor ise (pek çok metot bu kategoriye girer), o zaman yine veriye &quot;ilişkisel olarak'' bakmış oluruz.</p>
<p>Sayısal örnek: hisse senedi A 1 TL'den 1.10 TL'ye çıktı, senet B 100 TL'den 110 TL'ye çıktı. Hem A, hem B yüzde 10 arttı. Fakat A TL olarak 10 kuruş kazandı, B 10 TL kazandı. Eğer log uzayına çevirirsek,</p>
<p>A <span class="math inline">\(\log_{10}(1)\)</span>'den <span class="math inline">\(\log_{10}(1.10)\)</span>'a çıktı yani 0'dan 0.0413'e çıktı. B <span class="math inline">\(\log_{10}(100)\)</span>'den <span class="math inline">\(\log_{10}(110)\)</span>'a çıktı yani 2'de 2.0413'e çıktı.</p>
<p>Görüldüğü gibi yüzde değişiklik salt değer değişimine dönmüş oldu.</p>
<hr>
<p>Bazı Zaman Serileri Hesaplama Numaraları</p>
<p>Faiz Getiri Hesabı</p>
<p>Eldeki sermaye 100 lira, ve her ay yüzde 5 kazandıran bir yatırım var, 10 ay sonra elde ne var? Not: her ay sonunda eldeki tüm sermayeyi tekrar geri yatırılıyor, yani birleşik faiz (compound interest) hesabı lazım, bu hesaplarda ilk aydaki 100 lira 105 olur, 105 geri koyulur, ikinci ay <span class="math inline">\(105 \cdot 0.05 = 5.25\)</span> kazanılır, 110.25 geri koyulur, vs.</p>
<p>Numpy / Pandas ile bu hesapları basitleştirmenin yolu <code>cumprod</code> kullanmak, bu çağrı ile her hücre kendinden önce gelen tüm hücrelerin çarpımıdır, yani bu çarpım bir kümülatif çarpımdır (cumulative product), mesela her hücrede 2 değeri olsa</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> pandas <span class="im">as</span> pd
df <span class="op">=</span> pd.DataFrame(np.ones((<span class="dv">10</span>,<span class="dv">1</span>))<span class="op">*</span><span class="dv">2</span>,columns<span class="op">=</span>[<span class="st">&#39;x&#39;</span>])
df[<span class="st">&#39;kumulatif carpim&#39;</span>] <span class="op">=</span> df.x.cumprod()
<span class="bu">print</span> df</code></pre></div>
<pre><code>   x  kumulatif carpim
0  2                 2
1  2                 4
2  2                 8
3  2                16
4  2                32
5  2                64
6  2               128
7  2               256
8  2               512
9  2              1024</code></pre>
<p>Bu numarayı birleşik faiz hesabı için kullanabiliriz; her zaman anında elde olan faiz sermaye <span class="math inline">\(s\)</span>, faiz <span class="math inline">\(f\)</span> için <span class="math inline">\(s \cdot (1+f) \cdot (1+f) ...\)</span> olarak hesaplanabilir, ki <span class="math inline">\((1+f)\)</span> çarpımını istediğimiz zaman dilimi için uzatabiliriz. Baştaki örnek için</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">df2 <span class="op">=</span> pd.DataFrame(np.ones((<span class="dv">10</span>,<span class="dv">1</span>))<span class="op">*</span><span class="fl">0.05</span>,columns<span class="op">=</span>[<span class="st">&#39;f&#39;</span>])
df2[<span class="st">&#39;s&#39;</span>] <span class="op">=</span> <span class="fl">100.</span> <span class="op">*</span> (<span class="dv">1</span><span class="op">+</span>df2.f).cumprod()
<span class="bu">print</span> df2</code></pre></div>
<pre><code>      f           s
0  0.05  105.000000
1  0.05  110.250000
2  0.05  115.762500
3  0.05  121.550625
4  0.05  127.628156
5  0.05  134.009564
6  0.05  140.710042
7  0.05  147.745544
8  0.05  155.132822
9  0.05  162.889463</code></pre>
<p>Yani 10 ay sonunda eldeki para 162 lira.</p>
<p>Bu numarayı pek çok değişik hesap için uyarlayabiliriz.</p>
<p>Soru</p>
<p>Öyle bir oyun var ki eğer yazı/tura sonucunu tahmin ederseniz koyduğunuz para kadar getiri elde ediyorsunuz, yoksa o kadar kaybediyorsunuz. Bir oyuncunun tahmin başarısı yüzde 55. Bu kişi her elde, o anki sermayesinin yüzde 5'ini koyuyor. Simülasyon ile 1000 el sonraki kümülatif getiriyi bulun.</p>
<p>Cevap</p>
<p>&quot;Eldeki sermayenin yüzde 2'sini yatırmak'' aslında bir tür birleşik faiz hesabı olarak görülebilir, tabii bu faiz tahminin tutup tutmamasına göre ya pozitif etkilidir, ya negatif etkilidir. Bunun için <code>numpy</code> binom dağılıma 1000 tane 0/1 zar attırırız, sonra 0 değerleri -1 yaparız, yani -1/+1 zar olur, zar değerlerini 0.05 ile çarparız, sonuçları <code>cumprod</code> ile birleştiririz,</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">data <span class="op">=</span> np.random.binomial(n<span class="op">=</span><span class="dv">1</span>,p<span class="op">=</span><span class="fl">0.55</span>,size<span class="op">=</span><span class="dv">1000</span>)
df3 <span class="op">=</span> pd.DataFrame(data,columns<span class="op">=</span>[<span class="st">&#39;dice&#39;</span>])
df3.loc[df3.dice<span class="op">==</span><span class="dv">0</span>,<span class="st">&#39;dice&#39;</span>] <span class="op">=</span> <span class="dv">-1</span>
cumret <span class="op">=</span> <span class="fl">100.</span><span class="op">*</span>(<span class="dv">1</span><span class="fl">+0.05</span><span class="op">*</span>df3.dice).cumprod()
<span class="bu">print</span> cumret.tail(<span class="dv">1</span>)</code></pre></div>
<pre><code>999    3157.474029
Name: dice, dtype: float64</code></pre>
<hr>
<p>Getiri Eğrisi (Yield Curve)</p>
<p>Bir tahvilin getirisinden bahsettik. Önemli bir grafik türü farklı olgunlaşma (maturity) tarihlerindeki aynı tip tahvillerin herhangi bir gündeki getirisi. Mesela herhangi bir gün için 3-ay, 6-ay, 1-sene, 5-sene, 10-sene, 30-senede olgunlaşan hazine tahvillerinin getirisine bakıyoruz, bu noktaları yanyana koyup bir grafik olarak resmediyoruz. Olgunlaşma zamanı arttıkça şekil neye benziyor? Alttaki üç farklı gün için getiri eğrisini gösteriyoruz,</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> pandas <span class="im">as</span> pd  
ts <span class="op">=</span> [<span class="st">&#39;treas3M&#39;</span>,<span class="st">&#39;treas6M&#39;</span>,<span class="st">&#39;treas1Y&#39;</span>,<span class="st">&#39;treas5Y&#39;</span>,<span class="st">&#39;treas10Y&#39;</span>,<span class="st">&#39;treas30Y&#39;</span>]
dfs  <span class="op">=</span> [pd.read_csv(<span class="st">&#39;</span><span class="sc">%s</span><span class="st">.csv&#39;</span> <span class="op">%</span> t, index_col<span class="op">=</span><span class="dv">0</span>,parse_dates<span class="op">=</span><span class="va">True</span>) <span class="cf">for</span> t <span class="kw">in</span> ts]</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># verileri getmat.py ile indirdik</span>
<span class="co">#</span>
dt <span class="op">=</span> <span class="st">&#39;2000-08-21&#39;</span>
res <span class="op">=</span> pd.DataFrame([df.ix[dt,<span class="st">&#39;VALUE&#39;</span>] <span class="cf">for</span> df <span class="kw">in</span> dfs],columns<span class="op">=</span>[dt])
res.plot()<span class="op">;</span> plt.savefig(<span class="st">&#39;tser_z001_05.png&#39;</span>)
dt <span class="op">=</span> <span class="st">&#39;1988-11-16&#39;</span>
res <span class="op">=</span> pd.DataFrame([df.ix[dt,<span class="st">&#39;VALUE&#39;</span>] <span class="cf">for</span> df <span class="kw">in</span> dfs],columns<span class="op">=</span>[dt])
res.plot()<span class="op">;</span> plt.savefig(<span class="st">&#39;tser_z001_06.png&#39;</span>)
dt <span class="op">=</span> <span class="st">&#39;1981-09-01&#39;</span>
res <span class="op">=</span> pd.DataFrame([df.ix[dt,<span class="st">&#39;VALUE&#39;</span>] <span class="cf">for</span> df <span class="kw">in</span> dfs],columns<span class="op">=</span>[dt])
res.plot()<span class="op">;</span> plt.savefig(<span class="st">&#39;tser_z001_07.png&#39;</span>)</code></pre></div>
<p><img src="tser_z001_05.png" /> <img src="tser_z001_06.png" /> <img src="tser_z001_07.png" /></p>
<p>Bir grafik Kasım 16, 1988 yılın için, normal olan bu grafik, uzun vadeli faiz (hazine tahvillerinin getirisine uzun vadeli faiz deniyor) kısa vadeden daha yüksek, fakat bu yükseklik yüzde 1 civarında, bu eğriye &quot;düz'' denebilir.</p>
<p>Diğer grafik Eylül 1981 için, uzun vade kısa vadeden daha düşük, yani tahvil piyasaları ileride faizlerin daha düşük olacağını tahmin ediyor. Bu tür eğrilere &quot;tersine dönmüş (inverted)'' deniyor, normalde olanın tersi çünkü. Terse dönmüş eğrilerin gelmekte olan ekonomik durgunluğu tahmin ettiği söylenir [4, sf. 85].</p>
<hr>
<p>Taylor Kuralı (Taylor Rule)</p>
<p>Merkez Bankalarına yardımcı olan araçlardan biri Taylor Kuralı; bu kural, yani formül, olması gereken Merkez Bankası faiz oranı, mevcut enflasyon <span class="math inline">\(\pi\)</span>, hedef enflasyon <span class="math inline">\(\pi^\ast\)</span>, ideal faiz oranı <span class="math inline">\(r^\ast\)</span> ve reel ve potansiyel gayrısafi milli hasıla (GSYH) farkı arasında bir ilişki kurar.</p>
<p><span class="math display">\[
FF_t = r^\ast + \pi_t + 0.5 (\pi_t-\pi^\ast) + 0.5 Gap_t
\]</span></p>
<p>Alttaki script ile ABD için kuralı hesaplayabiliriz, FEDFUNDS ABD Merkez Bankası FED'in ne yaptığı, Taylor ise formülün taviyesi,</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># veri indiren script gettaylor.py </span>
<span class="im">import</span> pandas <span class="im">as</span> pd
df <span class="op">=</span> pd.read_csv(<span class="st">&#39;taylorfred.csv&#39;</span>, parse_dates<span class="op">=</span><span class="va">True</span>,<span class="op">\</span>
                  index_col<span class="op">=</span><span class="dv">0</span>,comment<span class="op">=</span><span class="st">&#39;#&#39;</span>)
df <span class="op">=</span> df.resample(<span class="st">&#39;AS&#39;</span>)<span class="op">;</span>longrun <span class="op">=</span> <span class="fl">2.0</span>
df[<span class="st">&#39;GDPC1&#39;</span>] <span class="op">=</span> df.GDPC1.interpolate(method<span class="op">=</span><span class="st">&#39;spline&#39;</span>,order<span class="op">=</span><span class="dv">1</span>)
df[<span class="st">&#39;Gap&#39;</span>] <span class="op">=</span>  <span class="fl">100.</span> <span class="op">*</span> (df.GDPC1<span class="op">/</span>df.GDPPOT<span class="dv">-1</span>)
df[<span class="st">&#39;Curr&#39;</span>] <span class="op">=</span> df.PCEPI.pct_change()<span class="op">*</span><span class="fl">100.</span>
df[<span class="st">&#39;Taylor&#39;</span>] <span class="op">=</span> longrun <span class="op">+</span> df.Curr <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>(df.Curr <span class="op">-</span> longrun) <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>df.Gap
df[[<span class="st">&#39;FEDFUNDS&#39;</span>,<span class="st">&#39;Taylor&#39;</span>]].plot()
plt.savefig(<span class="st">&#39;tser_z001_09.png&#39;</span>)</code></pre></div>
<div class="figure">
<img src="tser_z001_09.png" />

</div>
<p>İki grafik çoğunlukla birbirine yakın gidiyor, ayrıldıkları noktalar da var tabii; ve fomülü keşfeden John Taylor'a göre bunlar FED'in hata yaptığı yerler. Mesela 2000'lı yılların başlarında faizler formülün dediğinden daha düşük, ve 2008 krizine giden yol taşlarından birinin aşırı düşük faizler olduğu biliniyor. Daha fazla detay için [4, sf. 278].</p>
<hr>
<p>Alış Fiyatı-Satış Fiyatı Aralık Tahmini (Bid/Ask Spread Estimation)</p>
<p>AFSF aralığının tanımı terimler kısminda bulunabilir. Akla soru gelebilir, aynen günün en düşük, en yüksek fiyatları gibi AFSF fiyatları piyasalar tarafından kaydedilmiyor mu? Bazen hayır. Özellikle açık kaynaklardan veri alınınca her tür veriyi alabileceğimizi beklememiz lazım, ki AFSF fiyatları bundan biri. Aracı kurumumuz bize anlık bu bilgileri yakın tarihler için sağlasa bile, geriye dönük veri için bu veri mevcut olmayabilir. Bu durumda eldeki bilgilerden tahminsel hesap yapılabilir.</p>
<p>[5]'teki yaklaşıma göre ardı ardına iki günün en düşük / en yüksek fiyatlarına bakarak AFSF için bir tahmin edici yaratmak mümkündür. Yaklaşımlarının arkasındaki ana fikirler şunlar; Birincisi, en yüksek fiyatlar alımlar, en düşük satımlar tarafından tetiklendiğine göre AFSF aralığı bu fiyatlarla muhakkak bağlantılı olmalıdır. İkinci fikir, yüksek / düşük fiyatlarının oranının oynaklığa bağlı olan kısmı, onu üzerinden hesapladığımız zaman dilimi büyüdükçe ona oranla büyür, fakat onun AFSF'ye bağlı olan kısmi değişmeden kalır. Bu fikirleri kullanarak sadece arka arkaya iki güne bakarak yazarlar bir tahmin edici ortaya çıkartıyorlar [6]. Formüller şöyle,</p>
<p><span class="math display">\[
\beta =
\bigg(
 \ln \frac{H_t}{L_t} \bigg)^2 +  \bigg( \ln \frac{H_{t+1}}{L_{t+1}}
\bigg)^2, \quad
\gamma = \bigg( \ln \frac{H_{t,t+1}}{L_{t,t+1}} \bigg)^2
\]</span></p>
<p>ki <span class="math inline">\(H_t,L_t\)</span> <span class="math inline">\(t\)</span> gününün sırasıyla en yüksek ve en düşük fiyatları, <span class="math inline">\(H_{t+1,t},L_{t,t+1}\)</span> ise ardı ardına iki günün en yüksek ve en düşük fiyatları. Ardından,</p>
<p><span class="math display">\[ \alpha = \frac{\sqrt{2 \beta} - \sqrt{\beta}}{3 - 2 \sqrt{2}} -
\sqrt{\frac{\gamma}{3 - 2\sqrt{2}}}
\]</span></p>
<p>Ve nihai tahmin edici</p>
<p><span class="math display">\[ S = \frac{2 (e^{\alpha} - 1 )}{1 + e^{\alpha}} \]</span></p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">df <span class="op">=</span> pd.read_csv(<span class="st">&#39;20day.csv&#39;</span>,sep<span class="op">=</span><span class="st">&#39;\s*&#39;</span>)
df[<span class="st">&#39;Lt1&#39;</span>] <span class="op">=</span> df.Lt.shift(<span class="op">-</span><span class="dv">1</span>)
df[<span class="st">&#39;Ht1&#39;</span>] <span class="op">=</span> df.Ht.shift(<span class="op">-</span><span class="dv">1</span>)

<span class="kw">def</span> f(x):
    beta <span class="op">=</span> np.log(x.Ht<span class="op">/</span>x.Lt)<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> np.log(x.Ht1<span class="op">/</span>x.Lt1)<span class="op">**</span><span class="dv">2</span>
    gamma <span class="op">=</span> np.log( <span class="bu">max</span>(x.Ht,x.Ht1) <span class="op">/</span> <span class="bu">min</span>(x.Lt,x.Lt1)  )<span class="op">**</span><span class="dv">2</span>
    alpha1 <span class="op">=</span> (np.sqrt(<span class="dv">2</span><span class="op">*</span>beta)<span class="op">-</span>np.sqrt(beta)) <span class="op">/</span> (<span class="dv">3</span> <span class="op">-</span> <span class="dv">2</span><span class="op">*</span>np.sqrt(<span class="dv">2</span>))
    alpha2 <span class="op">=</span> np.sqrt(gamma <span class="op">/</span> (<span class="dv">3-2</span><span class="op">*</span>np.sqrt(<span class="dv">2</span>)))
    alpha <span class="op">=</span> alpha1 <span class="op">-</span> alpha2
    S <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>(np.exp(alpha)<span class="op">-</span><span class="dv">1</span>) <span class="op">/</span> (<span class="dv">1</span> <span class="op">+</span> np.exp(alpha))
    <span class="cf">return</span> S

df[<span class="st">&#39;S&#39;</span>] <span class="op">=</span> df.<span class="bu">apply</span>(f, axis<span class="op">=</span><span class="dv">1</span>)
df <span class="op">=</span> df.fillna(<span class="dv">0</span>)
df.loc[df.S<span class="op">&lt;</span><span class="dv">0</span>,<span class="st">&#39;S&#39;</span>] <span class="op">=</span> <span class="dv">0</span>
<span class="bu">print</span> df.head()</code></pre></div>
<pre><code>   Close     Lt     Ht    Lt1    Ht1         S
0  25.25  25.25  25.32  25.19  25.32  0.001683
1  25.32  25.19  25.32  25.28  25.41  0.000000
2  25.30  25.28  25.41  25.28  25.38  0.003243
3  25.33  25.28  25.38  25.27  25.37  0.002995
4  25.33  25.27  25.37  25.36  25.45  0.000000</code></pre>
<p>Corvin, Schultz (CS) tahmin edicisi bazen negatif değerler verebiliyor, bu durumda bir yaklaşım bu değerleri sıfır yapmak, ve bu aralığı &quot;çok küçük'' olarak kabul etmek. Eğer birkaç gün üzerinden ortalama alınırsa tabii ki bu sıfır değerleri nihai ortalamanın aşağı inmesini sağlayacaktır.</p>
<hr>
<p>Kurları Tahmin Etmek (Taslak)</p>
<p>İki ülke arasındaki kurlar o ülkelerin fiyat seviyelerinin oranıdır. Değil mi? Eğer berbere Japonya'da 1000 yen Türkiye'de 10 lira veriyorsam (ve başka fiyat olmadığını düşünelim) o zaman Yen/TR kuru 100 yen olmalı. Tekrar ana formülden başlayarak her iki ülke için bu formülleri düzenleyip bölüm haline getirirsek,</p>
<p><span class="math display">\[ M_1V_1 = P_1Y_1, \quad M_2V_2 = P_2Y_2 \]</span></p>
<p><span class="math display">\[ \frac{P_2}{P_1} = \frac{M_2}{M_1} \cdot \frac{Y_1}{Y_2} \cdot \frac{V_2}{V_1} \]</span></p>
<p><span class="math display">\[ \log \left( \frac{P_2}{P_1} \right) = 
\log \left( \frac{M_2}{M_1} \right) + 
\log \left( \frac{Y_1}{Y_2} \right) +
\log \left( \frac{V_2}{V_1} \right) 
\]</span></p>
<p><span class="math display">\[    = \log(M_2) - \log(M_1) + \log(Y_1) - \log(Y_2)  + \log(V_2) - \log(V_1) \]</span></p>
<p><span class="math display">\[ = \log(M_2) - \log(M_1) + \log(Y_1) - \log(Y_2)  \]</span></p>
<p><span class="math inline">\(V\)</span>'ler iptal oldu çünkü hızı sabit kabul ediyoruz,</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">df <span class="op">=</span> pd.read_csv(<span class="st">&#39;exch.csv&#39;</span>,parse_dates<span class="op">=</span>[<span class="st">&#39;DATE&#39;</span>])
df <span class="op">=</span> df.set_index(<span class="st">&#39;DATE&#39;</span>)
df <span class="op">=</span> df.interpolate(method<span class="op">=</span><span class="st">&#39;linear&#39;</span>)
k <span class="op">=</span> <span class="dv">5</span>
df[<span class="st">&#39;lm1&#39;</span>] <span class="op">=</span> np.log(df.nonfinloanus).shift(k)
df[<span class="st">&#39;lm2&#39;</span>] <span class="op">=</span> np.log(df.nonfinloanjp).shift(k)
df[<span class="st">&#39;ly1&#39;</span>] <span class="op">=</span> np.log(df.realgdpus).shift(k)
df[<span class="st">&#39;ly2&#39;</span>] <span class="op">=</span> np.log(df.realgdpjp).shift(k)
df[<span class="st">&#39;lxjpus&#39;</span>] <span class="op">=</span> np.log(df.xjpus)

df <span class="op">=</span> df.dropna(axis<span class="op">=</span><span class="dv">0</span>)
<span class="im">import</span> statsmodels.formula.api <span class="im">as</span> smf
results <span class="op">=</span> smf.ols(<span class="st">&#39;lxjpus ~ lm1 + lm2 + ly1 + ly2&#39;</span>, data<span class="op">=</span>df).fit()
<span class="bu">print</span> results.summary()</code></pre></div>
<pre><code>                            OLS Regression Results                            
==============================================================================
Dep. Variable:                 lxjpus   R-squared:                       0.432
Model:                            OLS   Adj. R-squared:                  0.424
Method:                 Least Squares   F-statistic:                     53.88
Date:                Wed, 30 May 2018   Prob (F-statistic):           1.00e-33
Time:                        20:09:26   Log-Likelihood:                 249.15
No. Observations:                 288   AIC:                            -488.3
Df Residuals:                     283   BIC:                            -470.0
Df Model:                           4                                         
Covariance Type:            nonrobust                                         
==============================================================================
                 coef    std err          t      P&gt;|t|      [95.0% Conf. Int.]
------------------------------------------------------------------------------
Intercept    -35.7050      4.321     -8.263      0.000       -44.211   -27.199
lm1           -0.5512      0.118     -4.663      0.000        -0.784    -0.318
lm2            1.2863      0.190      6.768      0.000         0.912     1.660
ly1            1.7492      0.305      5.732      0.000         1.148     2.350
ly2            0.8758      0.408      2.146      0.033         0.073     1.679
==============================================================================
Omnibus:                       13.370   Durbin-Watson:                   0.067
Prob(Omnibus):                  0.001   Jarque-Bera (JB):                9.922
Skew:                          -0.346   Prob(JB):                      0.00701
Kurtosis:                       2.409   Cond. No.                     1.67e+04
==============================================================================</code></pre>
<p>Uyum oldukca iyi, <span class="math inline">\(R^2\)</span> yüksek. İlginç bir gözlem, <span class="math inline">\(k\)</span> ile ne kadar geriye giderek kuru tahmin edebileceğimizi kontrol etmeye uğraştık, 5 periyot geriye gitmek en iyi sonucu verdi, bu zaman serisinde periyot ay bazlı, yani 5 ay öncesinden gelecekteki kuru tahmin etmek mümkün!</p>
<hr>
<p>Finans Terimleri Açıklamaları</p>
<p>Arbitrage (Arbitraj)</p>
<p>Bir teminatın döviz kuru vs. gibi nedenlerle farkı piyasalarda çok kısa süreli de olsa farklı değerden işlem görmesi sonucu aradaki ufacık farktan yararlanma işlemi. Kelimenin kökü <em>arbitrate</em> kelimesinden geliyor, yani hakemlik yapma, aradaki anlaşmazlıkları çözmek. Finans durumunda arada bir anlaşmazlık var, sadece bu bir fiyat anlaşmazlığı, ya da kısa süreli bir &quot;uyumsuzluk''. Borsacı bu uyumsuzluğu görerek ondan faydalanıyor.</p>
<p>Arbitraged Away (Arbitrajın Tüketilmesi)</p>
<p>Arbitraj işlemleri piyasadaki enformasyon verimsizliğinden istifade etmek anlamına geliyorsa, o zaman pek çok kişinin belli bir verimsizlik üzerinden işlem yapması o verimsizliği yokedebilir. Mesela bir ortalama dönüş stratejisinde alttan alıp üstten satıyoruz, fakat pek çok kişi bu stratejiyi kullanıyor ise en tepede pek çok kişi satar, ve fiyat çıkabileceği kadar tepeye çıkmaz, ki bu ortalamaya dönüş karını etkiler.</p>
<p>ETF - Exchange Traded Fund (Piyasa Fonları)</p>
<p>Bir indisi, ya da baz ürünü (commodity) takip eden ve bu altta takip edilen &quot;şey''in piyasada alınıp, satılmasını sağlayan varlık [1]. Mesela petrol, altın gibi malların fiyatı baz alınarak oluşturulmuş bir ETF borsada alınıp satılabilir. Ya da S&amp;P 500 indisi, ki aslında 500 şirketi kapsayan bir formülden ibarettir, baz alınarak bir ETF oluşturulabilir (SPY) ve bu ETF alınıp satılınca S&amp;P 500 fiyatının iniş çıkışı üzerinde oynanmış olacaktır.</p>
<p>Bonds, Yields (Tahviller, Getiriler)</p>
<p>Şirketlerin, devletlerin, hatta belediyelerin borç alabilmesini sağlayan enstrümanlar. Tahviller belli bir miktarda borcun alınmasını, ödemesini, vadesini, borç üzerinden ödenecek faizi belli kurallara bağlar. Faiz ödemesi sabit bir kupon miktarı üzerinden yapılır. Tahvili alıp vade (maturity) süresi boyunca tutan kişiler için hiçbir risk yoktur, onlar paralarını söz verildiği gibi geri alırlar, ve (çoğunlukla yılda iki kez) olan faiz ödemeleriyle beraber. Tahvilleri ikincil piyasada başkasına satmak ta mümkündür.</p>
<p>Merkez Bankası faiz oranları tahvillerin fiyatını direk etkiler, tahviller risksiz enstrümanlardır, ayrıca kupon fiyatları sabittir; Fakat aynı vadeli yeni tahviller çıkarsa, eski tahviller &quot;rekabet'' edebilmek için ikinci elde fiyatları duruma göre artaacak ya da azalacaktır. Tahvil piyasalarındaki oynaklığın en büyük sebebi budur; banka faiz oranları değişir, ona göre eldeki tahvilin fiyatı yukarı ya da aşağı dalgalanabilir.</p>
<p>Mesela %4 kupon verimliliği (coupon yield) olan 30 yıllık hazine tahvili aldık. %4, kupon ödemelerini belirtir, hemen aklımızda para miktarı olarak hesabını yaparız, sabit olan ödeme budur (birkaç parçaya bölünerek ödenebilir ama ödemenin tamamı budur) . Şimdi diyelim ki yeni 30 yıllık tahviller çıktı, bunların verimi %10, yani kupon ödemeleri daha yüksek, tam da bu sırada biz eldeki tahvili satmak istiyoruz. Ne yapacağız? O zaman bizim elimizdeki tahvili daha düşük bir fiyattan satmamız gerekecek ki kupon ödemelerindeki fark buradan kapansın, çünkü %10'luk tahvili alabilecek alıcılar başka türlü niye bizim tahvili alsın ki? [2].</p>
<p>Bir tahvilin mevcut veriminden (current yield) bahsedilir, bu hesap kupon ödemeleri bölü tahvil fiyatından ibaret. Neredeyse alır almaz bir tahvilin fiyatı değişir, üç tane $1000, $1200, $800'lük tahvil aldık diyelim, 1.'nin verimi %10, 2.'nin %8.33, 3.'nün %12.5.</p>
<p>Medyada çoğunlukla hisse senet piyasaları işlenir, fakat tahvil piyasası hisse senet piyasalarından kat kat daha büyüktür. NYSE, Nasdaq, İMKB gibi tek bir &quot;piyasa''dan bahsetmek te mümkün değildir, çoğu tahvil alışverişi aracı kurumlar üzerinden kurumlararası yapılır. 2007/08 krizi mesela birincil olarak senet piyasaları değil, tahvil piyasalarıyla alakalıydı (mortgage tahvilleri).</p>
<p>Bid/Ask Spread (Alış Fiyatı-Satış Fiyatı Arasındaki Fark, Fiyat Marjı)</p>
<p>Her piyasada iki türlü fiyat vardır, birisi alış fiyatı (the ask) öteki ise satış fiyatı (the bid). Bir borsacı olarak siz her zaman yüksek olan fiyattan almak, düşük olandan satmak zorundasınız. Bu aradaki fark işlemimizi gerçekleştiren kişilerin kazancını sağlayan şeydir bir bakıma, bu kişileri kötü gözle görmemek lazım (o fark üzerinden spekülasyon mu yapıyor?), çünkü unutmayalım işlemimizi gerçekleştiren bu kişi o işlemin öteki tarafından riske giriyor, yani satışımızı alarak, ya da alımımıza satış yaparak. Tabii ki onlar da risklerini azaltmak isteyeceklerdir, bu sebeple alış/satış fiyatı arasındaki fark üzerinden kara girmeye uğraşacaklardır [2]. İşlem hacmin arttıkça AFSF aralığının küçüldüğü bilinir, çünkü aracı kurumlar her iki uçta yeterince müşteri bulabilirler ve riskleri azalır, bunu aralık fiyatlarına yansıtırlar.</p>
<p>Short Selling, Shorting - Açığa Satmak</p>
<p>Bir seneti açığa sattığınızda aracı kurumunuz aslında bu senedin bedelini size ödünç verir; o senedi satar, bir yerden bulur onu, kendi havuzunda vardır, anlaşmalı başka bir kurumdan bulur vs. onu satar ve senedin satışı sonucu ortaya çıkan parayı da hemen sizin hesabınıza yazar. Yani o para sizindir. Bir ek şart vardır, o senedi gelecekte bir zaman, ne zaman olursa, aynı miktarda alıp aracı kurumunuza geri vermeniz gerekir. Bu noktada artık o senedin düşüşünden para kazanacağınız gayet bariz herhalde, eğer tek birimlik 100 lira değerinde senet borç verilmiş ise ve ertesi gün fiyat 90'a düşmüşse, ve, eğer istiyorsanız, o tek birimi alıp aracı kurumunuza verirsiniz (bu alma / geri verme işine &quot;pozisiyonu kapatmak (covering)'' adı veriliyor, ve aradaki karı cebe atarsınız.</p>
<p>Market Open, Market Close Prices (Borsa Açılış, Kapanış Fiyatları)</p>
<p>Bir gün içinde bir varlığın son işlem fiyatı kapanış fiyatıdır, açılış fiyatı günün ilk fiyatıdır. İlginç bir durum, bir önceki günün kapanışı ile sonraki günün açılışı yani olmayabilir; mesela bir şirketin senedi 40 liradan kapanıyor, o gece, o şirketin bir ürününün ciddi bir arızası olduğu haberi yayılıyor. Sonraki gün o şirket senedi 40 liradan alıcı bulacak mıdır? Büyük ihtimalle hayır. Diyelim ki o senet üzerindeki ilk işlem 30 lira seviyesinde, ve açılış fiyatı işte bu fiyat.</p>
<p>Time Deposit - Zamanlı Mevduat</p>
<p>Bir bankaya yatırılan ve belli zaman süresince dokunulamayan / cekilemeyen (1 ay, 3 ay, 1 yıl, vs.) mevduata zamanlı mevduat ismi verilir. Belli bir süre dokulamayacağı için bankalar bu parayı alıp onu başka yatırımlarda kullanabilirler, ve bu sebeple mevduat sahibine yüksek bir faiz verebilirler (aradaki kar onlara kalır tabii). Zaman süresi arttıkça faizin daha yüksek olacağı beklenebilir.</p>
<p>Eurodollar</p>
<p>ABD dışındaki bankalarda zamanlı mevduat olarak tutulan dolarlarla Eurodollar ismi verilir. Para ABD dışındaki bankalarda tutulduğu için bu mevduat ABD Merkez Bankasının (FED) kontrolü dışındadır, ve bu sebeple daha az regülasyona tabidirler, onları çekici yapan bir faktör budur. Terimin çıkış noktası Avrupa bankalarında tutulan dolarlardır, fakat artık herhangi bir yabancı bankada zamanlı mevduat olarak tutulan dolarlara Eurodollar deniyor. Hatta yabancı bankada tutulan her döviz için euro öneki kullanılabilir, mesela Euroyen, hatta Euroeuro gibi!</p>
<p>Fed Faiz Oranları, Fed Fon Oranı (Fed Funds Rate)</p>
<p>Her banka ABD Merkez Bankası'nda belli bir nakit rezervi tutmak zorundadır, bu kanuna göre böyledir. Fakat her gün sonunda bankaların elinde bu gerekli miktar olmayabilir, bu durumda birbirlerinden nakit borç alırlar. Bu alım, satım sırasında kullanılan faiz, fed fon oranıdır; ve &quot;FED'in kararlaştırdığı oran'' olarak bilinir, fakat işin ilginç tarafı FED kimseye &quot;oran bu olacak'' diye bir emir vermez. Arz talep kanunlarını belli yönde etkileyerek bu sonucun çıkmasını sağlar. Eğer fed fon'un yükselmesini istiyorsa iletişimde olduğu bankalara hazine tahvili satar, onlardan nakit çekmiş olur, bu dolaylı olarak bankaların rezervini azaltır, bu durumda birbirlerine ve dışarı verdikleri faizi arttırmak zorunda kalırlar. Azaltma durumunda tam tersi olur.</p>
<p>LIBOR</p>
<p>Dünyadaki büyük, ünlü bankaların birbirine borç vermekte kullandığı oranı yansıtan bir gösterge (benchmark) fair oranıdır. LİBOR'ı yayınlayan kurum her gün ünlü bankalardan birbirlerine borç için kullandıkları faiz hakkında bilgi alır, ve bir averaj formülü üzerinden LİBOR'u yayınlar. Pek çok farklı vadeli LOBOR'lar vardır, ama en çok referans edileni 1 yıllık LİBOR'dur. Doğal olarak LİBOR pek çok diğer enstrüman için bir tür referans noktası oluşturur.</p>
<p>Opsiyon (Option)</p>
<p>Bir varlığı, mesela senedi, baz alan bir opsiyon alıcıya baz alınan senedi alma seçeneğini verir, almaya mecbur etmez [7]. Bu hak önceden belirlenen belli bir fiyat ve belli bir tarih üzerinden verilir (tarihten önce alınmasını mümkün kılan opsiyonlar da vardır). Opsiyonların önemli bir özellliği eğer alıcı isterse, kafasına estiği gibi opsiyondan çıkabilir, hiçbir yükümlülüğü yoktur. Opsiyon fiyatları da çoğunlukla buna izin verecek şekilde az tutulur.</p>
<p>Her opsiyonun bir alıcısı bir satıcısı vardır, en azından ilk baştan alınan / satılan sadece opsiyondur (baz varlığın alımı sonra devreye girer). Başka bir varlığı baz aldığı için opsiyona bir türevsel araç denebilir.</p>
<p>İki türlü opsiyon vardır, alım opsiyonu (call option) ve satım opsiyonu (put option). Önceden kararlaştırılan fiyata kullanım fiyatı (strike price) denir. Opsiyonun kendisinin fiyatı teklif fiyatı (bid) ve satış fiyatı (aşk) olarak ikiye ayrılır. Mesela, diyelim bugün 2015-02-25 ve son kullanım tarihi 2015-02-27 olan kullanım fiyatı $75 olan bir AAPL (Apple) opsiyonu olabilir, teklif fiyatı $53.60 üzerinden. Opsiyonlar genelde en az baz varlıktan 100 birimi kullanırlar, o zaman bu alım opsiyonuna baştan verilen ücret 100 x $53.60 = $5,360 olacaktır. Dikkat: bu opsiyon bize hemen 100 tane AAPL şenedi almıyor. 2015-02-27 tarihinde tanesi $75'ten 100 tane AAPL şenedi alma {} veriyor.</p>
<p>Eğer 27'sinde opsiyonu kullanım fiyatı üzerinden almak istersek, $7,500 + $5,360 = $12,860 ödemiş oluruz ve karşılığında 100 AAPL hissesine sahip oluruz. 25'inde AAPL fiyatı $128.79 idi, 100 ile carpinca $12,879 olur, yani biraz fazla ödeme yapmış olurduk. Fakat opsiyon ile bir güvenlik elde ettik, eğer senet $75 altına düşse opsiyonu bırakıp kaçarız, ve sadece ona ödediğimiz parayı kaybetmiş oluruz. Kıyasla eğer 25'inde 100 tane AAPL almış olsak ve fiyat $74.99'a çakılsa $12,879 - $7,499 = $5,380 kaybetmiş olurduk yani opsiyona ödediğimizden daha fazlası.</p>
<p>Opsiyonların fiyatlanmasında Black-Scholes formülü denen bir formül kullanılır, üstte ince dengeler var gördüğümüz gibi, opsiyonun her iki tarafındaki aktör kendine en faydalı olacak seviyede fiyat bulmak, vermek ister, ve B-S formülü bunu yapmalarını sağlar. B-S birkaç varsayımı baz alır, ve bir de formüle dışarıdan verilen oynaklık 'öngörüsü' <span class="math inline">\(\sigma\)</span> üzerinden optimal bir hesap verir. Bu hesabı her iki taraf ta yapacaktır; kimisi gelecekteki oynaklık tahminini herkesden daha iyi yaparak kara geçmeye uğraşır, opsiyon ticareti geniş bir alandır.</p>
<p>Kaldıraç (Leverage)</p>
<p>Getiriyi fazlalaştırmak için kullanılan yöntemlerden biri kaldıraçtır, yani borç kullanmak. Borsa araçı kurumları bazen kaldıraç kullanımına izin verirler. Bazen de işlem yapılan enstrümanın doğasından ileri gelen bir kaldıraç vardır; mesela vadeli işlem sözleşmesi (futures contract) alışverisinde belli bir yüzdede teminat (margin) verildikten sonra (yüzde 10 gibi) işlem yapılabilir, burada 10 katlık bir kaldıraç sözkonusu. Kaldıraç kullanınca getiri o kadar katlanır, ayrıca oynaklıkta o kadar katlanır. 10 TL sermaye var ise, yılda yüzde 1 getirisi olan varlık bana 1 TL kazandırır, fakat 10 kat kaldıraç ile 100 TL'ye çıkabilirim, kazancım 10 TL olur. Borç geri verilir, 10 TL bende kalır. Tabii eğer yüzde 1 kayıp olursa, o zaman 10 TL kayıp elimdeki tüm sermayeyi siler. Dikkat!</p>
<p>Kaynaklar</p>
<p>[1] Investopedia, <em>Exchange-Traded Fund (ETF)</em>, <a href="http://www.investopedia.com/terms/e/etf.asp" class="uri">http://www.investopedia.com/terms/e/etf.asp</a></p>
<p>[2] Thau, <em>The Bond Book</em></p>
<p>[3] Ekstrand, <em>Financial Derivatives Trading</em></p>
<p>[4] Ang, <em>Asset Management</em></p>
<p>[5] Corvin, Schultz, <em>A Simple Way to Estimate Bid-Ask Spreads from Daily High and Low Prices</em></p>
<p>[6] Kostanjcar, Jeren, <em>Relationship between bid-ask spreads and fluctuations in market prices</em></p>
<p>[7] Heydt, <em>Mastering Pandas for Finance</em></p>
<hr>
<p>Yunan Harfleri</p>
<div class="figure">
<img src="../../algs/algs_999_zapp/letters.png" />

</div>
</body>
</html>
