\documentclass[12pt,fleqn]{article}\usepackage{../../common}
\begin{document}
Faiz

Faiz, borç alýnan para miktarý için ödenen ``borç alma bedelidir''. En basit
senaryoda eðer yýllýk yüzde 10 üzerinden 1000 lira borç almýþsam, 1 yýl sonra
hem 1000 lirayý, hem de 1000 x 0.10 = 100 lira faiz ödemem gerekir. Eðer bu
ödemeyi aylara bölüþtürmem gerekirse her ay 100 / 12 = 8.33 ödemem gerekir,
yüzdeler üzerinden düþünürsem yüzde 10 / 12 = 0.83, yani aylýk faiz ödemesi
yüzde 0.833. Bu basit durum, bu sebeple faiz direk ay sayýsýna bölünebilir.

Daha matematiksel olarak ana para $P$ borç aldým, $T$ süre sonrasý basit faiz
$r$ ile ödeme yapýlacak, $T$ anýnda geri ödenen para,

$$ P + rP = P(1+r) $$

Biraz daha farklý bir senaryo: diyelim ki $P$ borç aldým, bir sene sonra
ödenecek, faiz yýllýk $r$ - fakat faiz yýlda iki kere (semi-annually) biriken
faiz (compound interest) olarak hesaplanacak.

Biriken faiz durumunda yýlýn ortasýna kadar basit faiz $r/2$ vardýr, fakat bu
faiz ana paraya eklenir, ve bu eklenmiþ para üzerinde yýlýn diðer yarýsý için
tekrar $r/2$ faiz uygulanýr. Yani ilk altý ay sonrasý

$$ P(1+r/2) $$

borçlanmýþýzdýr, yýl sonunda ise tüm borç

$$ P(1+r/2)(1+r/2) = P(1+r/2)^2$$

Soru

Yýllýk \%8'den birikmesi çeyreksel (dört ayda bir) hesaplanan faiz ile 1000 lira
borç aldým. Yýl sonunda ne kadar geri öderim?

Cevap

Yýllýk \%8'den birikmesi çeyreksel hesaplanan faiz demek her çeyrekte yüzde 2
basit faizin ana para üzerine her çeyrekte eklenmesi demektir, bir çeyrek
sonrasý borç

$$ 1000(1+0.02) $$

iki çeyrek sonrasý

$$ 1000(1+0.02)(1+0.02) = 1000(1+0.02)^2 $$

üç çeyrek sonrasý

$$ 1000(1+0.02)(1+0.02)(1+0.02) = 1000(1+0.02)^2 $$

Dört çeyrek sonrasý, yani yýl sonunda geri ödenecek borç

$$ 1000(1+0.02)(1+0.02)(1+0.02)(1+0.02) = 1000(1+0.02)^4 = 1082.40$$

Soru

Pek çok kredi kart þirketi birikmesi aylýk yapýlan yýllýk yüzde 18 faiz oraný
üzerinden kart sahiplerine borç verir (daha doðrusu kart üzerindeki ödenmemiþ
miktara uygulanan faiz budur). Eðer yýl baþýnda borç verilen miktar $P$ ise ve
arada hiç ödeme yapýlmamýþsa, borçlanýlmýþ mýktar nedir?

Cevap

Bu tür bir birikim hesabý aylýk basit faiz, aylýk basit faiz 18/12=\%1.5'in her
ay ana para üzerine eklenmesi demektir, bu durumda bir sene sonra

$$ P(1+0.015)^{12} = 1.1956 P $$

olacaktýr. Bu örneklere bakýnca görüyoruz ki aktif olarak üzerinden geri ödeme
yaptýðýmýz faiz, yýllýk basit faiz $r$'den daha yüksek. Tabii ki bunun sebebi
birikme hesabý sýrasýnda her periyotta daha önceki periyotlarda üzerine faiz
eklenme yapýlmýþ ana para üzerinde bir daha faiz hesabý yapýyor olmamýz. Bu tür
durumlarda $r$'ye nominal faiz adý verilir, ve efektif faiz $r_{eff}$ ise

$$ r_{eff} = \frac{\textrm{yýl sonunda geri ödenen miktar}-P}{P}$$

Yýl sonu ödemenin $P(1+r)(1+r)(...)$ olduðunu hatýrlarsak,

$$
r_{eff}
= \frac{P(1+r)(1+r)... - P}{P}
= (1+r)^p-1
$$

ki $p$ periyot sayýsýdýr (4 tane çeyrek, 12 tane ay, vs). Örnek, eðer nominal
faiz $r$ ise birikme çeyreksel yapýlýyor ise, yýl sonu efektif faizi,

$$ r_{eff} = (1+r/4)^4 -1  $$

Ýlk örnekteki durumda efektif faiz yüzde

\begin{minted}[fontsize=\footnotesize]{python}
eff = (1+0.08/4)**4 - 1 
print eff * 100.
\end{minted}

\begin{verbatim}
8.243216
\end{verbatim}

Ýkinci örnekte ise yüzde

\begin{minted}[fontsize=\footnotesize]{python}
eff = (1+0.18/12)**12 - 1 
print eff * 100.
\end{minted}

\begin{verbatim}
19.5618171462
\end{verbatim}

Yani alttaki doðru olduðuna göre,

$$ P(1+r_{eff}) = \textrm{yýl sonunda geri ödenen miktar} $$

$r_{eff}$'in hesabýnda kullanýlan birikim faizi yerine tek dönemlik $r_{eff}$
basit faizi kullanmak eþdeðerdir.

Sürekli (Continuous) Biriken Faiz

Nominal faiz $r$ ile borç aldýk diyelim ama faiz {\em sürekli} þekilde birikerek
hesaplanýyor. Yýl sonu ne kadar borcumuz var? Bu soruya cevap verebilmek için
``süreklilik'' için uygun bir taným bulmamýz lazým. Hatýrlayalým, eðer borç
ödeme süresi içinde $n$ eþit periyot üzerinden biriktiriliyorsa, nihai ödenecek
borç $P(1+r/n)^n$ idi. Bu durumda süreklilik, $n$'nin gittikçe büyümesi
olabilir, yani ayný süre içine sýðdýrýlan periyotlar sonsuz çoðalýr, tabii bu
periyotlarýn süresi sonsuz küçülür, yani bu bir limit hesabýdýr,

$$ P \lim _{n \to \infty} (1+r/n)^n = Pe^r $$

$e^r$'nin nasýl limit ile ifade edildiðini görmek için bkz [3]. 

Soru

Eðer bir banka nominal oran yüzde 5 sürekli birikimli faiz oraný ile borç
veriyorsa, yýl sonu için efektif faiz oraný nedir?

Cevap

$$ r_{eff} = \frac{P\cdot e^{0.05} - P}{P} = e^{0.05} - 1 \approx 0.05127  $$

Yani efektif faiz yýlda \%5.127. 

Eðer $t$ seneliðine borç aldýysak ve yýllýk nominal faiz $r$ ise $t$ süresi
sonunda $Pe^{rt}$ borçlanmýþýz demektir, çünkü süre sonunda etkili olan nominal
faiz $rt$'dir, yani

$$ P \lim _{n \to \infty} (1 + rt / n)^n = Pe^{rt}
\mlabel{1}
$$

Ýkiye Katlama Kuralý (The Doubling Rule)

Soru

Eðer paramýzý birikimi yýllýk hesaplanan ve $r$ faizi ile kazandýran bir banka
hesabýna yatýrdýysak, paramýzý ikiye katlamak ne kadar zaman alýr?

Cevap

Ýlk baþta verdiðimiz $D$ parasý $n$ sene sonrasý $D(1+r)^n$ olacaðýna göre,
aradýðýmýz öyle bir $n$ senesi ki alttaki denklem doðru olsun,

$$ (1+r)^n = 2 $$

Yani $D=1$ kullanmýþ olduk, 1'in 2 olduðu duruma bakýyoruz. O zaman, üstteki
denklemin sol tarafýnda, $r$'yi hem $n$ ile çarpýp bölersek (yani hiçbir etki
olmayan bir operasyon, ama bir forma ulaþmaya uðraþýyoruz),

$$ (1+r)^n = \bigg( 1 + \frac{nr}{n} \bigg)^n  $$

$$ \approx e^{nr} $$

ki geçiþi (1)'deki denklem ile yaptýk. Bu yaklaþýksal hesap eðer $n$ çok ufak
deðilse yapýlabilir. Aradýðýmýz ikiye katlanma durumu idi,

$$ e^{nr} = 2 $$

Ýki tarafýn log'unu alalým,

$$ nr = \log 2 $$

$$ n \approx \frac{\log 2}{r} = \frac{0.693}{r} $$

Eðer $r = 0.01$ ise, yani yüzde 1 ise, paramýzýn ikiye katlanmasý için $\approx
0.7 / 0.01 = 70$ sene geçmesi gerekir. 

Bugünkü Deðer Analizi (Present Value Analysis)

Bir para miktarýnýn bugünkü deðerini $PV$ ve gelecekteki deðerini $C$ olarak
gösterirsek, birikimli faiz hesabý üzerinden

$$ C = PV (1+r)^i $$

olduðunu görmüþtük. Eðer gelecekteki bir miktarý zamaný geriye sararak bugünkü
deðerini görmek istesek, 

$$ PV = \frac{C}{ (1+r)^i}  $$

Ya da

$$ PV = C (1+r)^{-i}  $$

Bugünkü Deðer analizi bize farklý nakit / gelir akýþlarýna (income stream)
bakarak hangisinin daha tercih edilir olduðunu bulmamýzda yardýmcý olabilir.

Soru

Diyelim ki 5 sene boyunca size sene sonu belli miktarda ödemeler yapýlacak, ve
ödemeler þöyle (birim 1000 lira)

A: 12, 14, 16, 18, 20

B: 16, 16, 15, 15, 15

C: 20, 16, 14, 12, 10

Eðer faiz oraný yýllýk biriken nominal yüzde 2 ise, herhangi bir nakit akýþý
için deðer

$$ \sum _{i=1}^{5} (1+r)^{-i} x_i$$

ile hesaplanýr. Ödeme zincirindeki her birimi bugüne getiriyoruz, ve bugüne
uyarlanmýþ bu ödemeleri topluyoruz. En yüksek olan miktar en tercih edilir
olur. 

\begin{minted}[fontsize=\footnotesize]{python}
a = np.array([12, 14, 16, 18, 20])
b = np.array([16, 16, 15, 15, 15])
c = np.array([20, 16, 14, 12, 10])
\end{minted}


\begin{minted}[fontsize=\footnotesize]{python}
def pv(x,r):
    res = 0
    for i in range(len(x)):
        res += x[i]*(1+r)**(-(i+1))
    return res

print '      A                 B           C'
r = 0.1; print r, pv(a,r), pv(b,r), pv(c,r)
r = 0.2; print r, pv(a,r), pv(b,r), pv(c,r)
r = 0.3; print r, pv(a,r), pv(b,r), pv(c,r)
\end{minted}

\begin{verbatim}
      A                 B           C
0.1 59.2130443152 58.5973387312 56.3287405853
0.2 45.6995884774 46.3869598765 45.6854423868
0.3 36.4863328961 37.8944930284 38.119221208
\end{verbatim}

Sonuçlara bakýnca ufak $r$'ler için A'nýn daha tercih edilir olduðu
görülüyor. Ama biraz daha büyük $r$'ler için, mesela üstte $r=0.2$ için, B daha
iyi. Daha da büyük $r$'ler için C tercih edilir.

Soru

Bir þirketin 5 sene boyunca bir tür iþ makinasýna ihtiyacý var. Ellerinde böyle
(eski) bir makina var, makinanýn þu anki deðeri 6000 lira ki önümüzdeki 3 sene
içinde bu makina her sene 2000 lira deðer kaybedecek, ve bu süre sonunda hiçbir
deðeri kalmayacak, kullanýlamayacak. Bu makinanýn sene baþý itibariyle yýllýk
iþletme bedeli ise 9000 lira, ve bu bedel her sene 2000 lira artýyor; makina
eskidikçe onu iþletmek daha pahalýya mal oluyor.

22000 liraya yeni bir makina, herhangi bir sene baþýnda, alýnabilir. Yeni
makinanýn ömrü 6 senedir ve deðeri, alýndýðý ilk iki sene içinde her sene 3000
lira, ardýndan her takip eden sene içinde yýlda 4000 lira azalacaktýr. Yeni
makinanýn iþletme bedeli alýndýðý ilk senede 6000 lira, takip eden her sene 1000
lira artacak þekildedir. Eðer faiz oraný yüzde 10 ise, þirket yeni makinayý ne
zaman almalýdýr?

Cevap

Bu sorunun cevabý için farklý nakit akýþý senaryolarýna bakmak lazým. Senaryolar
þirketin yeni bir makinayý hangi sene baþýnda alacaðýna göre deðiþir. Nakit
akýþýndan artý olan akýþ yapýlan bir ödemeyi, eksi miktarlar ele geçen miktarý
temsil edebilir; daha sonra her nakit akýþý üzerinde Bugünkü Deðer hesabý (BDH)
yapýlarak tüm senaryolar tek bir sayýya indirgenir, ve bu sayýlar arasýnda en az
olan seçilir (en az ödeme). Ödemeler yeni makina almak, ya da makina iþletimi
için ödenen para, kazançlar ise eldeki makinanýn satýmýndan elde eden gelir
olacaktýr. Tabii yeni makinanýn alým senesi eskisinin ne zaman satýldýðýný
belirler, ayrýca yeni makina da 5 sene sonra satýlacaktýr.  Senaryolar þöyle
(sene baþý olacak þekilde, ve her rakam 1000 lira biriminden),

1. Sene: 22, 7, 8, 9, 10, -4

2. Sene: 9, 24, 7, 8, 9, -8

3. Sene: 9, 11, 26, 7, 8, -12

4. Sene: 9, 11, 13, 28, 7, -16

Eðer yeni makina alýmý 1. sene baþýnda olsaydý 22K (K=bin lira) makina için
ödenirdi, bu dýþarý doðru artý akis, 6K iþletme masrafý var, ama eski makina
satýlýyor, bu -6K, sonuç 22K. 2. sene 7K, bu iþletme masrafý. Ardýndan gide gide
6. sene baþýna geliyoruz, burada 5 sene geçmiþ, yeni makinanýn deðeri azalmýþ,
onu satýnca ele geçen miktar $22 - 3K \cdot 2 + 4K \cdot 3 = 4$, yani nakit
akýþý dilinde -4.

3. sene baþý yeni makina alým senaryosu için, 1. sene 9K eski makina iþletme
masrafý, 2. sene 11K iþletim masrafý, 3. sene yeni makina alýnýyor ve 22K
ödeniyor, 6K iþletim masrafý var, eski makina satýlýyor -2K, sonuç 26K. 4. sene
için 7K iþletim, 5. sene 8K iþletim, 6. sene 3 yaþýndaki yeni makina satýlýyor,
-12K. Diðer nakit akýþlarý benzer þekilde gösterilebilir.

Eðer faiz oraný 0.10 ise, mesela 1. sene nakit akýþýnýn BDH'i 

$$
22 + \frac{7}{1.1} + \frac{8}{(1.1)^2} + \frac{9}{(1.1)^3} +
\frac{10}{(1.1)^4} - \frac{4}{(1.1)^5}  = 46.083
$$

Diðer akýþlar benzer þekilde hesaplanýr, ve tüm BDH'ler,

46.083, 43.794, 43.760, 45.627

Bu akýþlarýn içinde en düþük olaný 43.760, yani 3. sene baþý yeni makina
alýmýdýr. O zaman þirket 2 sene sonra yeni makinayý almalýdýr. 

Soru

20 sene sonra emekli olmayý düþünen bir kiþi önündeki her 240 ayýn (20*12=240)
baþýnda $A$ miktarýný bankaya yatýracak. Emekli olduktan sonra her 360 ayýn
baþýnda para çekecek. Yýllýk nominal faiz oraný yüzde 6 üzerinden, ve aylýk
biriken faiz hesabý kullanýlarak, bu kiþinin 360 ay boyunca para çekebilmesi
için $A$'nin ne kadar büyük olmasý gerekir? 

Cevap

Aylýk faiz $r = 0.06 / 12 = 0.005$ olur. Bir $\beta = \frac{1}{1+r}$
tanýmlayalým, o zaman kiþinin bankaya yatýrýdýðý tüm paranýn BDH'si

$$
A + A\beta + A\beta^2 + ... + A\beta^{239} =
A \frac{1-\beta^{240}}{1-\beta}
$$

Üstte kullanýlan eþitlik [2] bölümünde gösterildi. Þu eþitlik,

$$ 1 + b + b^2 + ... + b^n = \frac{1-b^{n+1}}{1-b} $$

Soruya dönelim, 360 boyunca her ay çekilen paranýn $W$ olduðunu farz edelim, tüm
bu para alýmlarýnýn BDH'si,

$$
W\beta^{240} + W\beta^{241} + ... +  W\beta^{599} =
W\beta^{240} \frac{1-\beta^{360}}{1-\beta}
$$

Üstelin 240'tan baþladýðýna dikkat, çünkü para çekimi  240 ay sonra baþlýyor,
yani o zaman yapýlan çekimleri yatýrmalarýn yapýldýðý zamanlar üzerinen getirip
bugüne uyarlamak gerekiyor. $A$'yi bulmak için bir üstteki ile iki üstteki
denklemin birbirine eþit olmasý gerekir, çünkü yatýrýlan paralar ile emeklilik
finanse edilecek. 

$$
A \frac{1-\beta^{240}}{1-\beta} =
W\beta^{240} \frac{1-\beta^{360}}{1-\beta}$$

Bilinenler $W=1000$, ve $\beta = 1/1.005$, yerine koyarsak $A=360.99$
buluruz. Yani 24 sene boyunca her ay hesabýna 361 lira koymak bu kiþinin ileride
30 sene boyunca 1000 lira çekebilmesini saðlar. 

Soru

Ev almak istiyoruz ve 100,000 liraya ihtiyaç var. Ödemeyi emlak kredisi
(mortgate) ile yapacaðýz, bir bankaya gittik, banka 100K borcu verecek, þartlarý
þöyle: borcun geri ödemesi 15 sene süresinde aylýk, yüzde 0.6 faiz oraný
üzerinden yapýlacak. Banka kýrtasiye iþlemler için 600 lira, evin kontrolü için
400 lira, ve 1 ``nokta (point)'' istiyor, ki burada 1 nokta tüm borcun yüzde
1'ine tekabül ediyor, bu miktar da bankaya iþin baþýnda ödenmeli.

Cevap

Öncelikle her ay ne kadar ödeyeceðimizi hesaplayalým. Bu miktara $A$ dersek,

$$ A [\alpha + \alpha^2 + ... + \alpha^{180}] = 100,000 $$

ki $\alpha = 1/1.006$. Burada yüzde 0.6 aylýk biriken faiz demek ki. O zaman

$$ A = \frac{100,000(1-\alpha)}{\alpha (1-\alpha^{180})} = 910.05 $$

\begin{minted}[fontsize=\footnotesize]{python}
n = 15 * 12
alpha = 1/1.006
P1 = 100000
A1 =  P1*(1-alpha) / (alpha*(1-alpha**n))
print 'A=',A1
\end{minted}

\begin{verbatim}
A= 910.046739324
\end{verbatim}

Efektif yýllýk faiz yüzde

\begin{minted}[fontsize=\footnotesize]{python}
print 100 * ((1+0.006)**12 - 1)
\end{minted}

\begin{verbatim}
7.44241677219
\end{verbatim}

Fakat bir pürüz var; Eðer hakikaten elimize 100,000 geçseydi, hesap bu
olurdu. Fakat ilk baþta 600 lira, kontrol için 400 lira, yüzde 1 ödeme derken,
yani 1000 ile 600+400+1000 = 2000 lira ödemeyi baþta yaptýðýmýz için aslýnda
elimize geçen 100,000-2,000 = 98,000 liradýr. Ayný hesabý

\begin{minted}[fontsize=\footnotesize]{python}
P2 = P1 - 2000
A2 =  P2*(1-alpha) / (alpha*(1-alpha**n))
print 'Yeni A=', A2
\end{minted}

\begin{verbatim}
Yeni A= 891.845804538
\end{verbatim}

Fakat [1, sf. 58]'de ilginç bir baþka ek soru soruluyor. Diyelim ki banka
bize $r=0.006$ verdi, fakat aylýk ödeme olarak daha önce bulunan $A=910$ liralýk
ödemeyi istedi. O zaman bize verilen $r$ gerçek $r$ deðil. Gerçek $r$ nedir?
Bunun için $\alpha$ yerine $\beta=1/1+r$ kullanalým, ve

$$ A [\beta + \beta^2 + ... + \beta^{180}] = 98,000 $$

$$ \frac{\beta (1-\beta^{180})}{(1-\beta)} = 98,000 / 910 = 107.69$$

Bölümde 1. $A$'nin kullanýldýðýna dikkat. Þimdi, amaç $r$'yi bulmak olduðuna
göre, biraz yeniden düzenleme ile $r = \frac{1-\beta}{\beta}$ diyerek 

$$ \frac{1 - (\frac{1}{1+r})^{180}}{r} = 107.69 $$

Amaç $r$'yi bulmak, daha çetrefil çözüm rutinleri kullanabilirdik burada, ama
nasýl olsa $r > 0.006$ olduðunu biliyoruz, ve biraz deneme yanýlma ile hedef
sayýya eriþince eldeki $r$'ye bakarýz, ve sonucu bulmuþ oluruz. 

\begin{minted}[fontsize=\footnotesize]{python}
print 'Hedef', P2 / A1, '\n'
func = lambda r : (1 - (1/(1+r))**180 ) / r
r = 0.006; print func(r)
r = 0.0062; print func(r)
r = 0.00625; print func(r)
r = 0.00628; print func(r)
\end{minted}

\begin{verbatim}
Hedef 107.686776695 

109.884466016
108.271268844
107.873426844
107.63575696
\end{verbatim}

Bu $r$ için efektik yýllýk faiz

\begin{minted}[fontsize=\footnotesize]{python}
print 100 * ((1+r)**12 - 1)
\end{minted}

\begin{verbatim}
7.80182002033
\end{verbatim}

Enflasyon Etkisini Çýkartmak

Yýla göre fiyatlarý içeren bir zaman serisinden enflasyon etkisi nasýl
çýkartýlýr? Diyelim ki enflasyon verisi de ayný zaman serisine endeksli
olarak bir yüzde olarak verilmiþ. Ýnternet'te arama yapýnca bu iþi yapacak
o tek satýrlýk (öne-liner) kodu bir türlü bulamadýk; CPI gibi bambaþka bir
sayýdan bahsediliyor, saçma sapan konulara dalýnmýþ. Bu iþlem basit bir þey
olmalýydý, çünkü enflasyon bir yüzde olarak normal fiyata bir þey ekler,
çýkartmak bu kadar zor olmamalý.

Bu iþlemde dikkat edilmesi gereken bir pürüz þudur: enflasyon etkisi sadece
baz fiyata deðil, "bir önceki senedeki enflasyonun büyüttüðü eki de"
büyütür. Önceki sene 100 olan yüzde 10 büyüme ile 110 olur, yani sonraki
sene yüzde 10 ile 100'ün deðil 110'un yüzde 10'u eklenir, ve 121 elde
edilir. Bu sebeple enflasyon etkisini çýkartacak kod bunu hesaba katmalý.

Ýþ baþa düþtü, bu çýkartma iþini kodlamak için basit bir örnekle
baþladýk. Diyelim ki baz fiyat, ve enflasyon hiç deðiþmiyor,

\begin{tabular}{c | c | c | c}
Sene & Fiyat & Enflasyon & Fiyat Formülü \\
\hline
1 & 100 & 10 & ... \\
2 &   110  &   10   & $100 \cdot (1+0.1)$ \\
3 &   121   &  10   & $100 \cdot (1+0.1) \cdot (1+0.1)$ \\
4 &   133.1 &  10   & $100 \cdot (1+0.1) \cdot (1+0.1) \cdot (1+0.1) $
\end{tabular}

3. kolon fiyatýn formülsel olarak belirtilmiþ halidir. Bu örneði kullanarak
fiyatlarýn ve enflasyonun deðiþken olduðu durumu halletmek te mümkün olur;
tek yapýlmasý gereken 100 ile çarpýlan fiyatý fiyat kolonundan almaya
baþlamak.

Ama ondan önce çýkartma formülü.

Mesela 3. sene $100 \cdot (1+0.1) \cdot (1+0.1)$, bu formül bir önceki
senenin fiyatýný alýyor, ki bu fiyatýn formülü $100 \cdot (1+0.1)$, böylece
artýþýn artýþýný da hesaba almýþ oluyor. Þimdi formülleri içeren tüm
kolonlara bakýnca kalýp ortaya çýkýyor (matematik kalýplarýn dilidir
-language of patterns-); bu kalýp nedir? $(1+01)$'in her sene artan bir
þekilde baþlangýç fiyatý 100 ile çarpýlýyor olmasýdýr. Eðer her sene
enflasyon deðiþik ise, o zaman her satýrda $(1+enflasyon/100)$ ile çarpým
yapýyoruz, ve bu çarpýmlar bir önceki çarpýma eklenerek büyüyorlar. O zaman
her sene enflasyonun etkisini çýkartmak için bu çarpým zincirinin ne
olduðunu bulmak ve her sene fiyatýný bu çarpýma bölmek yeterli!

Eðer her sene enflasyon ayný olsaydý, mesela yüzde 10, o zaman
$(1+10/100)$'un gerekli katlarýný alarak bu bölümü yapabilirdik. Deðiþik
olunca Pandas ile bir takla atarak istediðimizi elde ederiz; her satýrda
bir önceki tüm kolonlarýn 1 ile toplanmýþ deðerlerini çarpmak lazým, bunun
için \verb!cumprod()! iþlevi kullanýlýr.

\begin{minted}[fontsize=\footnotesize]{python}
import pandas as pd
s="""sene;fiyat;enflasyon
1;100;
2;110;10   
3;121;10   
4;133.1;10"""
from StringIO import StringIO
df = pd.read_csv(StringIO(s),sep=';').fillna(0)
print df
\end{minted}

\begin{verbatim}
   sene  fiyat  enflasyon
0     1  100.0          0
1     2  110.0         10
2     3  121.0         10
3     4  133.1         10
\end{verbatim}

1 ile toplanmýþ yüzdelerin çarpým kümülatifi

\begin{minted}[fontsize=\footnotesize]{python}
df['enfkumulatif']  = (1+df['enflasyon']/100.).cumprod()
\end{minted}

Etkiyi çýkartmak için

\begin{minted}[fontsize=\footnotesize]{python}
df['reel']  = df['fiyat'] / df['enfkumulatif']
print df
\end{minted}

\begin{verbatim}
   sene  fiyat  enflasyon  enfkumulatif  reel
0     1  100.0          0         1.000   100
1     2  110.0         10         1.100   100
2     3  121.0         10         1.210   100
3     4  133.1         10         1.331   100
\end{verbatim}

Görüldüðü gibi her satýrda reel fiyat 100 liraya dönüþ yaptý. Reel fiyat
hep ayný çünkü baþka hiçbir artýþý gözönüne almadýk (verimiz o þekilde
çünkü). Eðer örneðimizde fiyat kolonu mesela petrol fiyatlarý olsaydý, bu
fiyatlar bir de piyasa sebebiyle ortaya çýkan artýþlarý da içerecekti, ve
enflasyon etkisini çýkartýnca elimize gerçek fiyat artýþlarý (ya da
düþüþleri) geçecekti.

Kaynaklar

[1] Ross, {\em An Elementary Introduction to Mathematical Finance}

[2] Bayramli, Diferansiyel Denklemler, {\em Seriler}

[3] Bayramli, Diferansiyel Denklemler, {\em Bir Limit Olarak $e$}

\end{document}

