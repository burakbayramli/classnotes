\documentclass[12pt,fleqn]{article}\usepackage{../../common}
\begin{document}
Ders 4

Önceki derste Lie grup ve cebiri gördük. Lie cebirine geçiþ sebebi lineer bir
uzayda optimizasyon yapmak istememiz, alternatif gayrý-lineer uzayda, zor
kýsýtlamalar üzerinden optimizasyon. Lie cebiri ile iþleri
kolaylaþtýrdýk. Ayrýca cebirden gruba giden bir üstel harita oluþturduk, ve onun
tersi bir logaritma idi.

Sonra fýrýldak cebirini gördük, ki bir $4 \times 4$ matrisi olan
$\hat{\xi}$, eðri $g(t)$'ye üzerinde bir teðet vektör olarak
görülebilirdi, ve $\hat{\xi}$'ye bir fýrýldak ismini verdik. $g(t)$'yi
saðdan çarpýnca alttakini elde etmiþtik.

$$ \dot{g} = \dot{g}g^{-1}g = \hat{\xi} g $$

so(3) durumunda olduðu gibi tüm mümkün fýrýldaklar bir teðet uzayý
oluþturuyorlardý, ki bu uzay bir Lie cebiridir.

$$ 
se(3) \equiv \bigg\{
\hat{\xi} =
\left[\begin{array}{rrr}
\hat{w} & v \\ 0 & 0
\end{array}\right] 
\biggm\vert
\hat{w} \in so(3), v \in \mathbb{R}^3 
\bigg\}
\subset \mathbb{R}^{4 \times 4}
 $$

Üstteki uzay Lie grubu SE(3)'e teðet idi.

Daha önce olduðu gibi $\land$ ve $\lor$ operatörlerini tanýmlýyoruz, bu
sayede fýrýldak $\hat{\xi} \in se(3)$ ile fýrýldak kordinatlarý $\xi \in \mathbb{R}^6$ 
arasýnda gidip gelebilecektik.

$$ \hat{\xi} 
\equiv
\left[\begin{array}{c}
v \\ w
\end{array}\right]^{\land} 
=
\left[\begin{array}{cc}
\hat{w} & v \\ 0 & 0
\end{array}\right]  \in \mathbb{R}^{4 \times 4}
 $$

Hesaplanacak 6 derece serbestlik üstteki $v,w$ vektörlerinin
içeriklerinden oluþuyor. $\land$ uygulanan fýrýldak vektörü, onun sonucu
fýrýldak matrisi. 

$$ 
\left[\begin{array}{cc}
\hat{w} & v \\ 0 & 0
\end{array}\right]^{\lor} = 
\left[\begin{array}{c}
v \\ w
\end{array}\right] \in \mathbb{R}^6
 $$

Diferansiyel denklem sistemi

$$ \left\{ \begin{array}{ll}
\dot{g}(t) = \hat{\xi}g(t), \quad \hat{\xi} = \textrm{ bir sabit } \\
g(0) = I
\end{array} \right. $$

Bu sistemin çözümü

$$ 
g(t) = e^{\hat{\xi} t} = \sum _{n=0}^{\infty} \frac{(\hat{\xi} t)^n}{n!}
 $$

Ve daha önce kendimize sorduðumuz ayný soruya tekrar geldik, acaba
$\hat{\xi}$'nin katlarýný kodlama sýrasýnda hesaplamamýz gerekecek mi?
Cevap yine hayýr; aynen Rodriguez formülüyle daha temiz bir þekilde hesap
yapabildiðimiz gibi bu fýrýldak durumunda da benzer bir temiz hesap var,

$$ e^{\hat{\xi}} = 
\left[\begin{array}{rrr}
e^{\hat{w}} & \frac{(I-e^{\hat{w}}) \hat{w}v + ww^Tv}{|w|} \\
0 & 1
\end{array}\right]
\mlabel{1}
$$

Eðer $w = 0$ olsaydý $e^{\hat{\xi}}=\left[\begin{array}{rrr} I & v\\0 & 1\end{array}\right]$ 
elde ederdik, üstteki formülün $w \ne 0$ için tamamen hesaplanmasý
gerekirdi.  Formül içindeki $e^{\hat{w}}$ Rodriguez formülüyle hesaplanabilir.

Yani tekrar Lie grubundan Lie cebirine geçiþi yapmýþ olduk. 

$$ \exp: se(3) \to SE(3); \qquad \hat{\xi} \to e^{\hat{\xi}} $$

Peki geriye gidiþ mümkün mü? Bu noktada artýk sürpriz olmayacak herhalde,
geriye gidiþ yine logaritma ile mümkün. Matematiksel olarak ifade edelim, 

Teori 

Her $g \in SE(3)$ için bir fýrýldak kordinatý $\hat{\xi}=(v,w) \in
\mathbb{R}^6$ vardýr, ki $g = \exp(\hat{\xi})$. 

Ýspat

Verilen herhangi bir $R$ için $e^{\hat{w}} = R$ olduðunu biliyoruz. Bu bize
(1)'deki matrisin sol üst köþesini saðlýyor. Geriye tek kalan matrisin sað
üst köþesindeki ifadeyi ispatlamak. Bu ifadeyi, 

$$ \frac{(I-e^{\hat{w}}) \hat{w}v + ww^Tv}{|w|} $$

$v$ için çözersek, daha doðrusu çözülebileceðini gösterirsek, ispat
tamamlanmýþ olur. 

Üzerinden tekrar geçmek gerekirse, hareket eden bir manzarayý (daha doðrusu
bizim / kameramýzýn hareketi yüzünden deðiþmekte olan arka planý)
modellemek için katý gövde transformasyonu kullanýyoruz, ki böylece dünya
kordinatlarýndaki objeyi kamera kordinatlarýna çeviriyoruz. Bu çevirme
iþlemi rotasyon ve yer deðiþtirmeyi içeriyor, ki bu hesaplarý, her $t$ aný
için bir $4 \times 4$ matrisi

$$ g(t) = 
\left[\begin{array}{rrr}
R(t) & T(t) \\ 0 & 1
\end{array}\right] \in SE(3)
 $$

ile yapabiliyoruz. $t=0$ anýnda kamera çerçevesi / ekseni / görüntüsü
(frame) ile dünya görüntü birbirine eþit, yani $g(0) = I$. Dünyadaki
herhangi bir $X_0$ noktasý için $t$ anýnda kamera görüntü hali ,

$$ X(t) = R(t)X_0 + T(t) $$

3D tekrar oluþturma iþlemlerinde üç boyutlu dünyayý bir görüntüye göre
yaratmak gerekiyor; bu görüntünün seçiminde serbestsiz, istediðimiz
görüntüyü seçebiliriz, fakat gerçek dünya uygulamalarýnda bu görüntü
genellikle ilk kamera pozisyonu olarak seçilir. Kamera hareket eder, o
hareket olurken ve biz hesaplarýmýzý yaparken dünyayý hep sanki ilk
kameradan bakýyormuþ gibi oluþturmaya çalýþýrýz, kordinatlar sürekli bu ilk
kordinat sistemine tercüme ederiz. 

Üstteki formül homojen kordinatlarda

$$ X(t) = g(t) X_0 $$

Not: Hem normal hem homojen kordinatlarda ayný $X_0$'in kullanýlmýþ olmasý
kafa karýþtýrabilir, bunu notasyonu temiz tutmak için bilerek yaptým, eðer
homojen durum için $X_0$ vektörüne '1' sayýsýný yeni bir öðe olarak eklemek
gerekir, fakat bu ``yeni'' vektör için yeni bir notasyon ekleseydim
notasyon enflasyonu olacaktý. En temizi ayný $X_0$'i kullanmak, ama
aklýnýzda olsun, eðer homojenlikten bahsediyorsak, $X_0$'in dört ögesi var,
ve sonuncu öðe 1. 

Hareketleri Bitiþtirmek 

Diyelim ki kameranýn iki ayrý hareketi sonrasý $t_1,t_2$ anlarýnda ardý
ardýna iki görüntüye sýrasýyla eriþtik. $t_1$ anýndaki baktýðýmýz
noktalarýn $t_2$ anýna transforme edilmesi için $g(t_2,t_1)$
kullanýlacaktýr, ve 

$$ X(t_2) = g(t_2,t_1)X(t_1) $$

Tabii $g$'nin yapýsý öyle olmalýdýr ki $t_0$'dan direk $t_2$'deki hale
gitmek ile önce $t_1$ sonra $t_2$ durumuna gitmek arasýnda fark olmamalý,
yani

$$ X(t_2) = g(t_3,t_2)X_2 = g(t_3,t_2)g(t_2,t_1)X(t_1) = g(t_3,t_1)X(t_1) $$

ki üstteki ifade tüm noktalar için doðru olmalý, yani,

$$ g(t_3,t_1) = g(t_3,t_2)g(t_2,t_1) $$

Bu geçiþ mantýðýný takip edersek, þunu da söyleyebiliriz; $t_1$
görüntüsünün kordinatlarýný $t_2$'ye, oradan tekrar geriye gidersek, þu
eþitliðin ortaya çýktýðýný görürüz,

$$ X(t_1) g(t_1,t_2)X(t_2) = g(t_1,t_2) g(t_2,t_1) X(t_1)$$

Bu eþitliðin tüm $X(t_1)$ noktalarý için doðru olmasý gerektiði için, 

$$ g(t_1,t_2)g(t_2,t_1) = I 
\quad \Leftrightarrow \quad g^{-1}(t_2,t_1) = g(t_1,t_2)
$$

Hýz

Eðer $t$ anýndaki transformasyonun deðiþimini, bir hýzý, yani
$\dot{X}(t)$'i tanýmlamak isteseydim, $X(t) = g(t)X_0$ olduðunu
hatýrlayarak ve bu ifadenin türevini alarak,

$$ \dot{X}(t) = \dot{g}(t)X_0 $$

Ayrýca

$$ X(t) = g(t)X_0 \iff X_o = g^{-1}(t)X(t) $$

olduðuna göre, üstteki $X_o$'i iki üstteki formüle koyabiliriz,

$$ \dot{X}(t) = \dot{g}(t)g^{-1}(t)X(t) $$

Üstteki form tanýdýk gelebilir, fýrýldak tanýmýna yaklaþtýk. Fýrýldak
kordinatlarý üzerinden,

$$ \hat{V}(t) \equiv \dot{g}g^{-1}(t) = 
\left[\begin{array}{rrr}
\hat{w}(t) & v(t) \\ 0 & 0
\end{array}\right] \in se(3)
$$

alttaki ifadeyi elde ederiz, 

$$ \dot{X}(t) = \hat{V}(t)X(t) $$

Basit 3D kordinat sisteminde

$$ \dot{X}(t) = \hat{w}(t)X(t) + v(t) $$

olurdu. Neyse, vardýðýmýz sonuç þudur; $\hat{V}(t)$ bize dünya görüntüsünün
kamera çerçevesine göre izafi hýzýný vermiþ oluyor.

Farklý Çerçevelerdeki Hýz

Aynen noktalarý transform edebildiðimiz gibi hýzý da bir çerçeveden
diðerine taþýyabilmeliyiz. Diyelim ki iki kiþi, A ve B deðiþik açýlardan
bir görüntüye bakýyorlar, bu kiþiler deðiþimi nasýl görürlerdi? 
Diyelim ki $g_{xy}: Y = g_{xy}X(t)$. Yeni görüntüdeki hýz, 

$$ 
\dot{Y}(t) = g_{xy}\dot{X}(t) = 
g_{xy}\hat{V}(t)X(t) = g_{xy}\hat{V}g_{xy}^{-1}Y(t)
$$

Yani birinci kameradaki olanýn ikinci kamerada görülen izafi hýzý alttaki
fýrýldak ile hesaplanýr, 

$$ \hat{V_y} = g_{xy} \hat{V} g_{xy}^{-1} Y(t) = ad_{g_{xy}}(\hat{V})$$

$ad$ ifadesi katýmlý (adjoint) kelimesinden geliyor, 

$$ ad_g: se(3) \to se(3); \qquad \hat{\xi} \to g \hat{\xi}g^{-1} $$

se(3) üzerinde bir katýmlý eþlemedir. Bu eþleme bir Lie cebir öðesini alýr,
ona soldan ve saðdan bir katý gövde transformasyonu ve onun tersini
uygular, ve böylece yeni bir fýrýldak elde etmiþ oluruz. 

Bu noktaya kadar pek çok farklý formülden bahsettik, özetlemek açýsýndan
alttaki tablo faydalý olabilir, 

$$ 
\begin{array}{|p{4.0cm}|p{4.0cm}|p{4.0cm}|}
\hline
   & \textrm{Rotasyon SO(3)} & \textrm{Katý gövde SE(3)} \\
\hline
  \textrm{Matris temsili} &  R $\in$ GL(3): $R^TR=I$, $\det(R)=1$ & 
  $g = \left[\begin{array}{rr} R & T \\ 0 & 1 \end{array}\right]$ \\
\hline
 \textrm{3-D kordinatlar} & $X=RX_0$ & $X = RX_0 + T$ \\
\hline
 Tersi & $R^{-1}=R^T$ & 
 $g^{-1} = \left[\begin{array}{rr} R^T & -R^T \\ 0 & 1 \end{array}\right]$\\
\hline
 \textrm{Üstel temsil} & $R = \exp(\hat{w})$ & $g=\exp(\hat{\xi})$ \\
\hline
 Hýz & $\dot{X}=\hat{w}X$ & $\dot{X} = \hat{w}X + v$ \\
\hline
 \textrm{Katýmlý eþleme} & 
 $\hat{w} \to R \hat{w} R^T$ & 
 $\hat{\xi} \to g \hat{\xi}g^{-1}$\\
\hline
\end{array}
$$

[Euler açýlarý atlandý]

\end{document}



