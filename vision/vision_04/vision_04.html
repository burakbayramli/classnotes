<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script type="text/x-mathjax-config">
    MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
      MathJax.Hub.Insert(MathJax.InputJax.TeX.Definitions.macros,{
        cancel: ["Extension","cancel"], cancelto: ["Extension","cancel"]
      });
    });
    </script>  
   
  <title>Ders 4</title>
  <style type="text/css">code{white-space: pre;}</style>
  <script
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"
  type="text/javascript"></script>
</head>
<body>
<div id="header">
</div>
<h1 id="ders-4">Ders 4</h1>
<p>Önceki derste Lie grup ve cebiri gördük. Lie cebirine geçiş sebebi
lineer bir uzayda optimizasyon yapmak istememiz, alternatif gayrı-lineer
uzayda, zor kısıtlamalar üzerinden optimizasyon. Lie cebiri ile işleri
kolaylaştırdık. Ayrıca cebirden gruba giden bir üstel harita oluşturduk,
ve onun tersi bir logaritma idi.</p>
<p>Sonra fırıldak cebirini gördük, ki bir <span class="math inline">\(4
\times 4\)</span> matrisi olan <span
class="math inline">\(\hat{\xi}\)</span>, eğri <span
class="math inline">\(g(t)\)</span>’ye üzerinde bir teğet vektör olarak
görülebilirdi, ve <span class="math inline">\(\hat{\xi}\)</span>’ye bir
fırıldak ismini verdik. <span class="math inline">\(g(t)\)</span>’yi
sağdan çarpınca alttakini elde etmiştik.</p>
<p><span class="math display">\[ \dot{g} = \dot{g}g^{-1}g = \hat{\xi} g
\]</span></p>
<p>so(3) durumunda olduğu gibi tüm mümkün fırıldaklar bir teğet uzayı
oluşturuyorlardı, ki bu uzay bir Lie cebiridir.</p>
<p><span class="math display">\[
se(3) \equiv \bigg\{
\hat{\xi} =
\left[\begin{array}{rrr}
\hat{w} &amp; v \\ 0 &amp; 0
\end{array}\right]
\biggm\vert
\hat{w} \in so(3), v \in \mathbb{R}^3
\bigg\}
\subset \mathbb{R}^{4 \times 4}
\]</span></p>
<p>Üstteki uzay Lie grubu SE(3)’e teğet idi.</p>
<p>Daha önce olduğu gibi <span class="math inline">\(\land\)</span> ve
<span class="math inline">\(\lor\)</span> operatörlerini tanımlıyoruz,
bu sayede fırıldak <span class="math inline">\(\hat{\xi} \in
se(3)\)</span> ile fırıldak kordinatları <span class="math inline">\(\xi
\in \mathbb{R}^6\)</span> arasında gidip gelebilecektik.</p>
<p><span class="math display">\[ \hat{\xi}
\equiv
\left[\begin{array}{c}
v \\ w
\end{array}\right]^{\land}
=
\left[\begin{array}{cc}
\hat{w} &amp; v \\ 0 &amp; 0
\end{array}\right]  \in \mathbb{R}^{4 \times 4}
\]</span></p>
<p>Hesaplanacak 6 derece serbestlik üstteki <span
class="math inline">\(v,w\)</span> vektörlerinin içeriklerinden
oluşuyor. <span class="math inline">\(\land\)</span> uygulanan fırıldak
vektörü, onun sonucu fırıldak matrisi.</p>
<p><span class="math display">\[
\left[\begin{array}{cc}
\hat{w} &amp; v \\ 0 &amp; 0
\end{array}\right]^{\lor} =
\left[\begin{array}{c}
v \\ w
\end{array}\right] \in \mathbb{R}^6
\]</span></p>
<p>Diferansiyel denklem sistemi</p>
<p><span class="math display">\[ \left\{ \begin{array}{ll}
\dot{g}(t) = \hat{\xi}g(t), \quad \hat{\xi} = \textrm{ bir sabit } \\
g(0) = I
\end{array} \right. \]</span></p>
<p>Bu sistemin çözümü</p>
<p><span class="math display">\[
g(t) = e^{\hat{\xi} t} = \sum_{n=0}^{\infty} \frac{(\hat{\xi} t)^n}{n!}
\]</span></p>
<p>Ve daha önce kendimize sorduğumuz aynı soruya tekrar geldik, acaba
<span class="math inline">\(\hat{\xi}\)</span>’nin katlarını kodlama
sırasında hesaplamamız gerekecek mi? Cevap yine hayır; aynen Rodriguez
formülüyle daha temiz bir şekilde hesap yapabildiğimiz gibi bu fırıldak
durumunda da benzer bir temiz hesap var,</p>
<p><span class="math display">\[ e^{\hat{\xi}} =
\left[\begin{array}{rrr}
e^{\hat{w}} &amp; \frac{(I-e^{\hat{w}}) \hat{w}v + ww^Tv}{|w|} \\
0 &amp; 1
\end{array}\right]
\qquad (1)
\]</span></p>
<p>Eğer <span class="math inline">\(w = 0\)</span> olsaydı <span
class="math inline">\(e^{\hat{\xi}}=\left[\begin{array}{rrr} I &amp;
v\\0 &amp; 1\end{array}\right]\)</span> elde ederdik, üstteki formülün
<span class="math inline">\(w \ne 0\)</span> için tamamen hesaplanması
gerekirdi. Formül içindeki <span
class="math inline">\(e^{\hat{w}}\)</span> Rodriguez formülüyle
hesaplanabilir.</p>
<p>Yani tekrar Lie grubundan Lie cebirine geçişi yapmış olduk.</p>
<p><span class="math display">\[ \exp: se(3) \to SE(3); \qquad \hat{\xi}
\to e^{\hat{\xi}} \]</span></p>
<p>Peki geriye gidiş mümkün mü? Bu noktada artık sürpriz olmayacak
herhalde, geriye gidiş yine logaritma ile mümkün. Matematiksel olarak
ifade edelim,</p>
<p>Teori</p>
<p>Her <span class="math inline">\(g \in SE(3)\)</span> için bir
fırıldak kordinatı <span class="math inline">\(\hat{\xi}=(v,w) \in
\mathbb{R}^6\)</span> vardır, ki <span class="math inline">\(g =
\exp(\hat{\xi})\)</span>.</p>
<p>İspat</p>
<p>Verilen herhangi bir <span class="math inline">\(R\)</span> için
<span class="math inline">\(e^{\hat{w}} = R\)</span> olduğunu biliyoruz.
Bu bize (1)’deki matrisin sol üst köşesini sağlıyor. Geriye tek kalan
matrisin sağ üst köşesindeki ifadeyi ispatlamak. Bu ifadeyi,</p>
<p><span class="math display">\[ \frac{(I-e^{\hat{w}}) \hat{w}v +
ww^Tv}{|w|} \]</span></p>
<p><span class="math inline">\(v\)</span> için çözersek, daha doğrusu
çözülebileceğini gösterirsek, ispat tamamlanmış olur.</p>
<p>Üzerinden tekrar geçmek gerekirse, hareket eden bir manzarayı (daha
doğrusu bizim / kameramızın hareketi yüzünden değişmekte olan arka
planı) modellemek için katı gövde transformasyonu kullanıyoruz, ki
böylece dünya kordinatlarındaki objeyi kamera kordinatlarına
çeviriyoruz. Bu çevirme işlemi rotasyon ve yer değiştirmeyi içeriyor, ki
bu hesapları, her <span class="math inline">\(t\)</span> anı için bir
<span class="math inline">\(4 \times 4\)</span> matrisi</p>
<p><span class="math display">\[ g(t) =
\left[\begin{array}{rrr}
R(t) &amp; T(t) \\ 0 &amp; 1
\end{array}\right] \in SE(3)
\]</span></p>
<p>ile yapabiliyoruz. <span class="math inline">\(t=0\)</span> anında
kamera çerçevesi / ekseni / görüntüsü (frame) ile dünya görüntü
birbirine eşit, yani <span class="math inline">\(g(0) = I\)</span>.
Dünyadaki herhangi bir <span class="math inline">\(X_0\)</span> noktası
için <span class="math inline">\(t\)</span> anında kamera görüntü hali
,</p>
<p><span class="math display">\[ X(t) = R(t)X_0 + T(t) \]</span></p>
<p>3D tekrar oluşturma işlemlerinde üç boyutlu dünyayı bir görüntüye
göre yaratmak gerekiyor; bu görüntünün seçiminde serbestsiz, istediğimiz
görüntüyü seçebiliriz, fakat gerçek dünya uygulamalarında bu görüntü
genellikle ilk kamera pozisyonu olarak seçilir. Kamera hareket eder, o
hareket olurken ve biz hesaplarımızı yaparken dünyayı hep sanki ilk
kameradan bakıyormuş gibi oluşturmaya çalışırız, kordinatlar sürekli bu
ilk kordinat sistemine tercüme ederiz.</p>
<p>Üstteki formül homojen kordinatlarda</p>
<p><span class="math display">\[ X(t) = g(t) X_0 \]</span></p>
<p>Not: Hem normal hem homojen kordinatlarda aynı <span
class="math inline">\(X_0\)</span>’in kullanılmış olması kafa
karıştırabilir, bunu notasyonu temiz tutmak için bilerek yaptım, eğer
homojen durum için <span class="math inline">\(X_0\)</span> vektörüne
‘1’ sayısını yeni bir öğe olarak eklemek gerekir, fakat bu “yeni’’
vektör için yeni bir notasyon ekleseydim notasyon enflasyonu olacaktı.
En temizi aynı <span class="math inline">\(X_0\)</span>’i kullanmak, ama
aklınızda olsun, eğer homojenlikten bahsediyorsak, <span
class="math inline">\(X_0\)</span>’in dört ögesi var, ve sonuncu öğe
1.</p>
<p>Hareketleri Bitiştirmek</p>
<p>Diyelim ki kameranın iki ayrı hareketi sonrası <span
class="math inline">\(t_1,t_2\)</span> anlarında ardı ardına iki
görüntüye sırasıyla eriştik. <span class="math inline">\(t_1\)</span>
anındaki baktığımız noktaların <span class="math inline">\(t_2\)</span>
anına transforme edilmesi için <span
class="math inline">\(g(t_2,t_1)\)</span> kullanılacaktır, ve</p>
<p><span class="math display">\[ X(t_2) = g(t_2,t_1)X(t_1) \]</span></p>
<p>Tabii <span class="math inline">\(g\)</span>’nin yapısı öyle
olmalıdır ki <span class="math inline">\(t_0\)</span>’dan direk <span
class="math inline">\(t_2\)</span>’deki hale gitmek ile önce <span
class="math inline">\(t_1\)</span> sonra <span
class="math inline">\(t_2\)</span> durumuna gitmek arasında fark
olmamalı, yani</p>
<p><span class="math display">\[ X(t_2) = g(t_3,t_2)X_2 =
g(t_3,t_2)g(t_2,t_1)X(t_1) = g(t_3,t_1)X(t_1) \]</span></p>
<p>ki üstteki ifade tüm noktalar için doğru olmalı, yani,</p>
<p><span class="math display">\[ g(t_3,t_1) = g(t_3,t_2)g(t_2,t_1)
\]</span></p>
<p>Bu geçiş mantığını takip edersek, şunu da söyleyebiliriz; <span
class="math inline">\(t_1\)</span> görüntüsünün kordinatlarını <span
class="math inline">\(t_2\)</span>’ye, oradan tekrar geriye gidersek, şu
eşitliğin ortaya çıktığını görürüz,</p>
<p><span class="math display">\[ X(t_1) g(t_1,t_2)X(t_2) = g(t_1,t_2)
g(t_2,t_1) X(t_1)\]</span></p>
<p>Bu eşitliğin tüm <span class="math inline">\(X(t_1)\)</span>
noktaları için doğru olması gerektiği için,</p>
<p><span class="math display">\[ g(t_1,t_2)g(t_2,t_1) = I
\quad \Leftrightarrow \quad g^{-1}(t_2,t_1) = g(t_1,t_2)
\]</span></p>
<p>Hız</p>
<p>Eğer <span class="math inline">\(t\)</span> anındaki transformasyonun
değişimini, bir hızı, yani <span
class="math inline">\(\dot{X}(t)\)</span>’i tanımlamak isteseydim, <span
class="math inline">\(X(t) = g(t)X_0\)</span> olduğunu hatırlayarak ve
bu ifadenin türevini alarak,</p>
<p><span class="math display">\[ \dot{X}(t) = \dot{g}(t)X_0
\]</span></p>
<p>Ayrıca</p>
<p><span class="math display">\[ X(t) = g(t)X_0 \iff X_o = g^{-1}(t)X(t)
\]</span></p>
<p>olduğuna göre, üstteki <span class="math inline">\(X_o\)</span>’i iki
üstteki formüle koyabiliriz,</p>
<p><span class="math display">\[ \dot{X}(t) = \dot{g}(t)g^{-1}(t)X(t)
\]</span></p>
<p>Üstteki form tanıdık gelebilir, fırıldak tanımına yaklaştık. Fırıldak
kordinatları üzerinden,</p>
<p><span class="math display">\[ \hat{V}(t) \equiv \dot{g}g^{-1}(t) =
\left[\begin{array}{rrr}
\hat{w}(t) &amp; v(t) \\ 0 &amp; 0
\end{array}\right] \in se(3)
\]</span></p>
<p>alttaki ifadeyi elde ederiz,</p>
<p><span class="math display">\[ \dot{X}(t) = \hat{V}(t)X(t)
\]</span></p>
<p>Basit 3D kordinat sisteminde</p>
<p><span class="math display">\[ \dot{X}(t) = \hat{w}(t)X(t) + v(t)
\]</span></p>
<p>olurdu. Neyse, vardığımız sonuç şudur; <span
class="math inline">\(\hat{V}(t)\)</span> bize dünya görüntüsünün kamera
çerçevesine göre izafi hızını vermiş oluyor.</p>
<p>Farklı Çerçevelerdeki Hız</p>
<p>Aynen noktaları transform edebildiğimiz gibi hızı da bir çerçeveden
diğerine taşıyabilmeliyiz. Diyelim ki iki kişi, A ve B değişik açılardan
bir görüntüye bakıyorlar, bu kişiler değişimi nasıl görürlerdi? Diyelim
ki <span class="math inline">\(g_{xy}: Y = g_{xy}X(t)\)</span>. Yeni
görüntüdeki hız,</p>
<p><span class="math display">\[
\dot{Y}(t) = g_{xy}\dot{X}(t) =
g_{xy}\hat{V}(t)X(t) = g_{xy}\hat{V}g_{xy}^{-1}Y(t)
\]</span></p>
<p>Yani birinci kameradaki olanın ikinci kamerada görülen izafi hızı
alttaki fırıldak ile hesaplanır,</p>
<p><span class="math display">\[ \hat{V_y} = g_{xy} \hat{V} g_{xy}^{-1}
Y(t) = ad_{g_{xy}}(\hat{V})\]</span></p>
<p><span class="math inline">\(ad\)</span> ifadesi katımlı (adjoint)
kelimesinden geliyor,</p>
<p><span class="math display">\[ ad_g: se(3) \to se(3); \qquad \hat{\xi}
\to g \hat{\xi}g^{-1} \]</span></p>
<p>se(3) üzerinde bir katımlı eşlemedir. Bu eşleme bir Lie cebir öğesini
alır, ona soldan ve sağdan bir katı gövde transformasyonu ve onun
tersini uygular, ve böylece yeni bir fırıldak elde etmiş oluruz.</p>
<p>Bu noktaya kadar pek çok farklı formülden bahsettik, özetlemek
açısından alttaki tablo faydalı olabilir,</p>
<p><span class="math display">\[
\begin{array}{|p{4.0cm}|p{4.0cm}|p{4.0cm}|}
\hline
   &amp; \textrm{Rotasyon SO(3)} &amp; \textrm{Katı gövde SE(3)} \\
\hline
  \textrm{Matris temsili} &amp;  R $\in$ GL(3): $R^TR=I$, $\det(R)=1$
&amp;
  $g = \left[\begin{array}{rr} R &amp; T \\ 0 &amp; 1
\end{array}\right]$ \\
\hline
\textrm{3-D kordinatlar} &amp; $X=RX_0$ &amp; $X = RX_0 + T$ \\
\hline
Tersi &amp; $R^{-1}=R^T$ &amp;
$g^{-1} = \left[\begin{array}{rr} R^T &amp; -R^T \\ 0 &amp; 1
\end{array}\right]$\\
\hline
\textrm{Üstel temsil} &amp; $R = \exp(\hat{w})$ &amp;
$g=\exp(\hat{\xi})$ \\
\hline
Hız &amp; $\dot{X}=\hat{w}X$ &amp; $\dot{X} = \hat{w}X + v$ \\
\hline
\textrm{Katımlı eşleme} &amp;
$\hat{w} \to R \hat{w} R^T$ &amp;
$\hat{\xi} \to g \hat{\xi}g^{-1}$\\
\hline
\end{array}
\]</span></p>
<p>[Euler açıları atlandı]</p>
<p>
  <a href="..">Yukarı</a>
</p>
</body>
</html>
