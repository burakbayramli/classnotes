\documentclass[12pt,fleqn]{article}\usepackage{../../common}
\begin{document}
Evriþim (Convolution)

Evriþim iki fonksiyon $f,g$ üzerinde tanýmlý bir operasyondur, bu operasyon
iki fonksiyondan üçüncü bir fonksiyon yaratýr. Operasyon bir entegral
üzerinden tanýmlýdýr, $g$'nin ayný görüntüsü / ters çevrilmiþ halinin
alýnýp, soldan (negatif sonsuzluk) saða doðru kaydýrýlýrken $f$ ile üst
üste gelen bölgenin alanýný her $t$ için alýnmasý durumudur, bu açýdan
evriþim bir tür aðýrlýklý ortalama olarak görülebilir, $f$'in aðýrlýklý
ortalamasý $g$ üzerinden alýnmaktadýr. Matematiksel olarak,

$$f * g \equiv \int _{-\infty}^{\infty} f(\tau)g(t-\tau) \ud\tau $$

Evriþim sýrabaðýmsýzdýr, yani $f * g = g * f$, o zaman 

$$f * g \equiv \int _{-\infty}^{\infty} f(t-\tau)g(\tau) \ud\tau $$

ifadesi de doðrudur. Örnek $f,g$ üzerine görelim, 

\includegraphics[width=28em]{tser_conv_01.png}

Her iki fonksiyonu bir geçici deðiþken $\tau$ üzerinden tanýmlayabiliriz,
Sonra $g$'nin ayna görüntüsünü alýrýz, $g(\tau) \to g(-\tau)$

\includegraphics[width=28em]{tser_conv_02.png}

Þimdi bir zaman kaydýrma faktörü $t$ ekleyebiliriz, bir $g(t-\tau)$ elde
ederiz, bunun etkisi her $t$ için $g$'yi istediðimiz noktaya
kaydýrabilmektir. Bunu yaparken, mesela negatif sonsuzluktan pozitif
sonsuzluða kaydýrýrken, her $t$ anýnda alýnan entegralin sonuçlarý bize
evriþimi verir. Dikkat, kaydýrma entegralin sonucu deðil, sadece ``her $t$
için'' vurgusu amacýyla bu kaydýrma görüntüsü veriliyor, her $t$
noktasýnda, kaydýrma nereye olursa olsun, $-\infty,\infty$ arasýnda
entegral alýnmaktadýr.

\includegraphics[width=28em]{tser_conv_03.png}

Ayrýksal olarak,

$$ (f * g) [n] \equiv \sum_{m=-\infty}^{\infty} f[m] g[n-m]  $$

Farklý fonksiyonlar üzerinde görelim, mesela kare fonksiyonunu kendisiyle
evriþimi, $f$ mavi, $g$ kýrmýzý, sarý bölgeler çakýþma olan yerler, $g$'nin
her $t$ için evriþim entegral sonucu ise siyah çizgi ile gösteriliyor,

\includegraphics[width=20em]{box1.png}
\includegraphics[width=20em]{box2.png}

\includegraphics[width=20em]{box3.png}
\includegraphics[width=20em]{box4.png}

Þimdi $f$ kavisli bir fonksiyon, $g$ hala kare,

\includegraphics[width=20em]{spiky0.png}
\includegraphics[width=20em]{spiky1.png}

\includegraphics[width=20em]{spiky2.png}
\includegraphics[width=20em]{spiky3.png}

Evriþim ile çapraz korelasyon (cross-correlation) arasýnda baðlantýlar var,
$t-\tau$ yerine $t+\tau$ kullanýlýrsa çapraz korelasyon elde ediliyor.

\includegraphics[width=28em]{compar.png}

Örnek

\begin{minted}[fontsize=\footnotesize]{python}
import scipy.signal
f = [1,2,3,4,5,6]
g = [5,4,3,2,1]
print scipy.signal.convolve(a,b)
\end{minted}

\begin{verbatim}
[ 5 14 26 40 55 70 50 32 17  6]
\end{verbatim}

$X+Y$ Daðýlýmý

Çoðu zaman $X,Y$'in baðýmsýz olduðu durumda bu rasgele deðiþkenlerin
toplamýnýn daðýlýmýný hesaplamak gerekir [2, sf 56]. Kümülatif fonksiyon
$F$ ile

$$ F_{Z+Y} = P(X+Y \le a) $$

$$ = \int \int _{x+y \le a}^{} f(x)g(y) \ud x \ud y $$

$f(x)g(y)$ kullanabildik çünkü $X,Y$ baðýmsýz. Alt sýnýrda bir deðiþiklik
yapalým, $x+y \le a$, o zaman $x \le a-y$. Demek ki

$$
= \int _{-\infty}^{\infty} \int _{-\infty}^{a-y} f(x)g(y) \ud x \ud y
$$

Entegralleri gruplayabiliriz, 

$$
= \int _{-\infty}^{\infty}
\bigg[ \int _{-\infty}^{a-y} f(x) \ud x \bigg] g(y) \ud y
$$

$$ = \int _{-\infty}^{\infty} F_X(a-y) g(y) \ud y $$

Yoðunluðu almak için kümülatif fonksiyonun türevini alýrsak, 

$$
f_{X+Y}(a) = \frac{d}{da} \int _{-\infty}^{\infty} F_X(a-y) g(y) \ud y
$$

$$  = \int _{-\infty}^{\infty} \frac{d}{da} F_X(a-y) g(y) \ud y $$

$$  = \int _{-\infty}^{\infty} f_X(a-y) g(y) \ud y $$

Üstteki ifade bir evriþim operasyonu! Yani iki baðýmsýz rasgele deðiþkenin
toplamýnýn yoðunluðu, deðiþkenlerin yoðunluklarýnýn evriþimine eþittir!

[1, sf. 365]'de ayrýksal olarak üstteki hesaba deðiniliyor, elde iki zar
var, zarýn her yüzünün gelme ihtimali $p_i=1/6$, bu iki zarýn mümkün her
türlü toplamýnýn hesabý bir evriþim, $p * p$, 

\begin{minted}[fontsize=\footnotesize]{python}
import scipy.signal
d = 1/6. * np.array([1.0,1.0,1.0,1.0,1.0,1.0])
print scipy.signal.convolve(d,d) 
print scipy.signal.convolve(d,d) * 36.
\end{minted}

\begin{verbatim}
[ 0.02777778  0.05555556  0.08333333  0.11111111  0.13888889  0.16666667
  0.13888889  0.11111111  0.08333333  0.05555556  0.02777778]
[ 1.  2.  3.  4.  5.  6.  5.  4.  3.  2.  1.]
\end{verbatim}

Sonuca göre toplam 12 gelme ihtimali 1/36 (en baþtaki), 11 gelme ihtimali
2/36, vs.

Ek bilgiler için bkz [4] notlarý. 

Kaynaklar 

[1] Strang, {\em Computational Science and Engineering}

[2] Wikipedia, {\em Convolution}, \url{https://en.wikipedia.org/wiki/Convolution}

[3] Ross, {\em Introduction to Probability Models 10th Edition}

[4] Bayramli, Diferansiyel Denklemler, {\em Ders 21}

\end{document}
