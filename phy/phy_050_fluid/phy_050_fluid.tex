\documentclass[12pt,fleqn]{article}\usepackage{../../common}
\begin{document}
Akýþ Dinamiði

Kütle Muhafazasý

Ufak bir kutu ya da hacim ögesi düþünelim, kenarlarý çok küçük $\Delta x$,
$\Delta y$, $\Delta z$ boyutlarýnda, ve bu kutu uzayda sabitlenmiþ, içinden sývý
akýyor. Sabitlenmiþ bir noktada olanlara baktýðýmýz için bu Euler bakýþ açýsý,
detaylarýný ileride göreceðiz. Neyse, þimdi sadece $x$ yönündeki kütle
deðiþimine bakalým, 

\includegraphics[width=25em]{phy_050_fluid_02.jpg}

Sývýnýn akýþ hýzý $u(x,y,z) = (u,v,w)$, ve yoðunluðu $\rho$ olsun. Birim zamanda
içeri akan net kütleyi giren eksi çýkan kütle olarak hesaplayacaðýz. Bu zamanda
$x$ yönünde akýþ kenarlarý $\Delta y$, $\Delta z$ ve $u(x,y,z)$ (ufak dik duran
bir pizza kutusu gibi) olan bir kesit düþünebilir. Bu birim zamandaki akýþ
hacmi.  Onu yoðunluk ile çarpýnca kütle elde edilir, ayný þeyi $x + \Delta x$
noktasý için de yaparýz, ve farklarýný alýrýz,

$$
\rho(x,y,z)u(x,y,z)\Delta y \Delta z -
\rho(x+\Delta x,y,z) u(x+\Delta x,y,z)\Delta y \Delta z
$$

Üstteki formüldeki bir bölüm bir kýsmi türevi andýrýyor, $\Delta x$ ile bölüp
çarpsak,

$$
= \frac{\rho(x,y,z)u(x,y,z)}{\Delta x}\Delta x \Delta y \Delta z -
\frac{\rho(x+\Delta x,y,z) u(x+\Delta x,y,z)}{\Delta x} \Delta x \Delta y \Delta z
$$

Evet iki bölme iþlemini yaklaþýk olarak kýsmý türev olarak görebiliriz,

$$
\approx -\frac{\partial (\rho u) }{\partial x} \Delta x \Delta y \Delta z
$$

Benzer iþlemi tüm eksenler için ayrý ayrý yapsak onlar için de kýsmi türevler
elde ederdik, o zaman tüm eksenler üzerinden olan deðiþim, ve farksal hacmi
$\Delta V = \Delta x \Delta y \Delta z$ olarak göstererek,

$$
\left(
-\frac{\partial (\rho u) }{\partial x} 
-\frac{\partial (\rho u) }{\partial y} 
-\frac{\partial (\rho u) }{\partial z} 
\right) \Delta V
$$

Üstteki gradyan ve vektörsel olarak daha rahat ifade edilebilir,

$$
= -\nabla \cdot (\rho \bar{u} ) \Delta V
$$

Birim zamandaki kütle artýþý buna eþit. Üstteki ifadeyi farklý bir açýdan, birim
zamandaki kütle (yoðunluk çarpý hacim) artýþý olarak, þöyle de belirtebilirdik,

$$
\frac{\partial }{\partial t} (\rho \Delta V) 
$$

Bu formül iki üstteki formül ile eþit olmalý. Ayrýca her iki tarafta $\Delta V$
var, çýkartýlabilir, zaten sabit bir hacim, sonuç,

$$
\frac{\partial \rho}{\partial t}  = -\nabla \cdot (\rho \bar{u} )
$$

Literatürde çoðunlukla þu formda gösterilir,

$$
\frac{\partial \rho}{\partial t}  + \nabla \cdot (\rho \bar{u} ) = 0
\mlabel{1}
$$

Bu denkleme süreklilik formülü (continuity equation) ya da kütle muhafaza kanunu
(mass convervation law) ismi veriliyor.

Bilinen Vektör Calculus eþitliðinden hareketle

$$
\frac{\partial \rho}{\partial t}  +
\bar{u} \cdot \nabla \rho +
\rho \cdot \nabla \bar{u} = 0
$$

Eðer bir sývý sýkýþtýrýlamaz (incompressible) ise, ki pek çok sývý dinamiði
simülasyonlarýnda böyle olduðu kabul edilir, o zaman $\rho = sabit$ demektir,
$\frac{\partial \rho}{\partial t} = 0 $ olur, deðiþim yok, süreklilik
formülünden geri kalan

$$
\nabla \cdot \bar{u} = 0
\mlabel{2}
$$

olacaktýr. 

Euler ve Lagrange

Euler ve Lagrange bakýþ açýsý arasýndaki farklarla baþlayalým. Bu iki bakýþ
açýsý bir sývýnýn dinamiðini nasýl incelediðimiz ile alakalý. Eðer bir nehirdeki
kirlilik yoðunluðunu ölçüyorsak mesela, bunu herhangi bir $x,y,z$ noktasýnda
yapabiliriz, ve diyelim ki kirlilik belli bir yerde hiç deðiþmiyor, ertesi gün
gelsek ayný yerde ayný ölçümü alýyoruz [2, sf 78]. Bu yere baðýmlý Euler açýsý.

Fakat farklý yerlerde farklý ölçümler olabilir, mesela nehir boyunca bir kayýk
içinde sabit hýzda gidersek yoðunluk lineer oranda artýyor. Bu durumda pir paket
sývýyý takip ettiðimizi düþünebiliriz, o paketin açýsýndan elde edilen ölçümler
Lagrange bakýþ açýsýdýr. 

Ýki bakýþ açýsý arasýnda gidip gelmenin yolu materyel türev. Böylece Euler
bazýndaki deðiþim kullanýlarak Lagrange tarifi yapýlabiliyor. Bu önemli çünkü
ölçümler çoðunlukla Euler formatýnda düþünülür (bir yerde duran ölçüm aleti
idare etmesi ve düþünmesi daha rahat bir kavramdýr), ayrýca matematik Euler
ortamýnda biraz daha kolay manipüle edilebilir hale geliyor [3].

Lagrange ile bir parçacýk hayal ediyoruz, onu tanýmlamanýn bir yolu $t=0$ anýnda
nerede olduðu. Daha sonra bu baþlangýç noktasýndaki sývý paketinin hangi yolu
takip ettiðini $\bar{r}(t)$ ile tarif ediyoruz, ki $\bar{r}(t)$ parametrik bir
eðri olarak düþünülebilir, $r = ( x(t), y(t), z(t) )$. Eðer bir baþlangýç
noktasýný $a$ olarak tanýmlarsak bu baþlangýcýn ve yol denkleminin bir parçacýðý
tarif ettiðini düþünebiliriz,

\includegraphics[width=20em]{phy_050_fluid_01.png}

Þimdi herhangi bir ölçümü düþünelim [4], biraz önce kirlilik örneði verdik, bu
sýcaklýk ta olabilirdi, ölçüm $F(t,x,y,z)$ olsun, $t$ anýnda ve $x,y,z$
noktasýnda yapýlan ölçüm, bu ölçüme Calculus'un Zincirleme Kuralýný uygularsak,
deðiþim oranýný materyel türev $D F / Dt$'yi nasýl elde edebileceðimizi
görebiliriz,

$$
\frac{D F}{D t} =
\frac{\partial F}{\partial t} +
\frac{\partial F}{\partial x} \frac{\partial x}{\partial t} + 
\frac{\partial F}{\partial y} \frac{\partial y}{\partial t} + 
\frac{\partial F}{\partial z} \frac{\partial z}{\partial t} 
$$

$(\frac{\partial x}{\partial t}, \frac{\partial y}{\partial t},\frac{\partial
z}{\partial t})$ hýz olarak görülebilir, ona $\bar{u} = (u,v,w)$ vektörü diyelim,

$$
\frac{D F}{D t} =
\frac{\partial F}{\partial t} +
\frac{\partial F}{\partial x} u + 
\frac{\partial F}{\partial y} v + 
\frac{\partial F}{\partial z} w 
$$

Ayrica $(\frac{\partial F}{\partial x},\frac{\partial F}{\partial y},\frac{\partial F}{\partial z})$
gradyan vektoru $\nabla F$,

$$
\frac{\partial F}{\partial t} + \bar{u} \cdot \nabla F
$$

Burada $\frac{\partial F}{\partial t}$ ölçülen $F$'nin tek, sabit bir yerde
zamana göre deðiþimidir. Bu terime yapýlan ekler hareket halindeki parçanýn ek
olarak göreçeceði ölçüm deðiþim oraný olacaktýr.

Alýnan türev bir operatör olarak görülebilir, 

$$
\frac{D ()}{D t} = \frac{\partial () }{\partial t} + \bar{u} \cdot \nabla ()
$$

Üzerinde operatör uygulanan $()$ içine gider, $F$ için

$$
\frac{D F}{D t} = \frac{\partial F}{\partial t} + \bar{u} \cdot \nabla F
$$

ile önceki formüle eriþtik.

Þimdi ilginç bir noktaya geldik, süreklilik denklemi (1)'in $\rho$ olcumu
üzerinde materyel türev uygulanmýþ form olarak görmek mümkün,

$$
\frac{D \rho}{D t} + \rho \nabla \cdot \bar{u} = 0
$$

Pürüzsüz Parcaçýk Dinamiði (Smoothed Partýcle Dynamics -SPH-)

Sývýnýn akýþýný simüle etmek farklý alanlarda faydalý olabilecek bir
tekniktir. Sývýlarýn kendisine ek olarak gazlarý yoðunluðu daha az olan sývý
olarak görebiliriz, hatta katý maddeler de akýþkanlýðý çok az sývý gibi
düþünülebilirse, böylece aerodinamikten baþlayýp, gemi tasarlamaya, oradan
oyunlarda duman simülasyonu, ve tabii ki sývý simülasyonuna kadar giden geniþ
yelpazede sývý simülasyon teknikleri kullaným bulabilir.

SPH tekniði sývý simülasyon yöntemlerinden birisidir. Navier-Stokes denklemleri
bir sývýnýn akýþýný tanýmlar, bu denklem simülasyon ortamýnda yaklaþýk olarak
çözülmelidir [5], bunu yapmanýn iki yolu vardýr. Önceki anlatýmdan hareketle
herhalde cevabý tahmin edebiliriz, birisi Lagrange usulü diðeri Euler usulü. SPH
yöntemi Lagrange yaklaþýmýný takip eder, yani bir sývý paketini alýp onun zaman
ve uzayda gidiþini izler. Tek bir yere mýhlanmýþ olmamanýn (Euler usulü) pek çok
avantajlarý var, mesela oyun grafiklerini çizerken daha geniþ bir alanda iþ
yapabilmek mümkün, farklý maddeler arasýndaki iletiþim daha rahat
halledilebiliyor, vs.

Formülasyon için temel fizikle baþlayalým. Simüle ettiðimiz bir sývý paketidir
demiþtik, bu paketin ivmesini takip edelim mesela, bunun önemli olacagini tahmin
edebiliriz, oradan kuvvet, enerji baðlantýlarý var, materyel türev ile

$$
m \frac{D \bar{u}}{D t} = F^{toplam}
$$

diyebiliriz. Daha önce materyel türevi yoðunluk üzerinde uygulamýþtýk, pek çok
farklý ölçüt üzerinde materyel türev kullanýlabilir demiþtik, ayrýca hýz
$\bar{u}$ materyel türev içinde kullanýlmakta, ama hýzýn kendisine de gayet
rahat bir þekilde materyel türev uygulanabilir.

Üstteki eþitliðin sað tarafýný detaylandýrabiliriz, düþünelim, hangi kuvvetler
bir sývý akýþý sýrasýnda sývý paketi / parçacýk üzerinde etki ediyor? Bunlar
sýrasýyla basýnç, aðdalýk, ve yerçekim olurdu herhalde, bal gibi aðdalý bir
sývýda parçalar birbirlerine yapýþkandýr, þu için daha az, bu bir
kuvvettir. Yerçekimi bir kuvvettir doðal olarak. Basýnç ta öyle, biraz derine
dalan herkes etrafýndaki suyun basýncýný bir kuvvet olarak hisseder. 

$$
m \frac{D \bar{u}}{D t} = F^{\textrm{basýnç}} + F^{\textrm{aðdalýk}} + F^{\textrm{yerçekim}} 
$$

Kuvvetlerden en basiti yerçekimi. Onun $F^{\textrm{yerçekim}} = m \bar{g}$
olduðunu biliyoruz. Ývme $\bar{g}$ bir vektör olarak gösterildi, bu $\bar{g} =
(0, 0, 0.98)$ gibi sadece z ekseni üzerinde etki eden bir etki olacak.

Diðer kuvvet basýnç. Yüksek basýnç bölgeleri alçak basýnç bölgelerinde doðru bir
kuvvet uygular. Basýncýn tüm sývý için $p(\bar{x})$ deðiþkeninde olduðunu
düþünelim, peki basýnç dengesizliðini matematiksel olarak göstermenin en basit
yolu nedir? Basýncýn negatif gradyanýný almak, $-\nabla p$ olur mu acaba?  Bu
iþler. Temel Calculus'tan hatýrlarsak gradyan en dik iniþ yönünü gösterir, o
zaman gradyanin negatifi yüksek basýnç bölgesinden dýþarý alçak basýnç bölgesine
doðru gösterecektir. Tabii ki bu etkiyi üzerinde olduðumüz sývý paketinin hacmi
üzerinden entegre etmemiz gerekir, ama basit bir yaklaþýklama olarak onu hacim
$V$ ile çarpabiliriz. Tümü $F^{\textrm{basýnç}} = - V \nabla p$.

Üçüncü kuvvet aðdalýk. Aðdalý bir sývý deforme edilmeye karþý direnir. Bu
kuvveti kabaca ``her parçacýðýn yanindaki diðer parçacýklarýn ortalama hýzýnda
hareket etmesini zorlayan kuvvet'' olarak görebiliriz, bir diðer deyiþle
birbirine yakýn olan parçacýklarýn arasýndaki hýz farklarýný minimize etmeye
uðraþan kuvvet. Þimdi, mesela görüntü iþleme literatürünü düþünürsek, o alanda
çalýþanlarýn bir ölçünün etrafýndaki ortalamadan ne kadar saptýðýný hesaplayan
bir diferansiyel operatör var, bu operatör Laplasyan $\nabla \cdot \nabla$.  Bu
operatör, ayný þekilde hacim üzerinden entegre edilince bize aðdalýk kuvvetini
verebilir, burada bir ek her sývýnýn farklý aðdalýðýný formüle dahil edebilmek
için bir de bir dinamik aðdalýk sabiti (dynamic viscosity coefficient) $\mu$ ile
herþeyi çarpmak, o zaman $F^{\textrm{aðdalýk}} = V \mu \nabla \cdot \nabla
\bar{u}$.

Hepsini bir araya koyunca,

$$
m \frac{D \bar{u}}{D t} = m\bar{g} - V \nabla p + V \mu \nabla \cdot \nabla \bar{u}
$$

Bu denklemi hacim ve kütle limite giderken düþüneceðiz, ama bu haliyle formül
problem çýkartabilir, o zaman her þeyi $V$ ile bölersek ve sonra limiti
düþünürsek daha iyi olabilir, ayrýca $m/V$'nin sývý yoðunluðu $\rho$ olduðunu
hatýrlarsak,

$$
\rho \frac{D \bar{u}}{D t} = \rho \bar{g} -
\nabla p +
\mu \nabla \cdot \nabla \bar{u}
$$

Bu denklem bazýlarý için tanýdýk gelebilir.. Navier-Stokes denklemine benzemiyor
mu? Navier-Stokes denklemi,

$$
\frac{\partial \bar{u}}{\partial t} + \bar{u} + \frac{1}{\rho} \nabla p =
\bar{g} + \nu \nabla \cdot \nabla \bar{u}
$$

$$
\nabla \cdot \bar{u} = 0
$$

olarak gösterilir.

Neyse bizim türetiþle devam edersek, her þeyi yoðunluk $\rho$ ile bölelim,

$$
\frac{D \bar{u}}{D t} + \frac{1}{\rho} \nabla p =
\bar{g}  + \frac{\mu}{\rho} \nabla \cdot \nabla \bar{u}
$$

Basitleþtirme amaçýyla kinematik aðdalýk $\nu = \mu / \rho$ tanýmlayalým, o
zaman 

$$
\frac{D \bar{u}}{D t} + \frac{1}{\rho} \nabla p =
\bar{g}  + \nu \nabla \cdot \nabla \bar{u}
$$

Sýkýþtýrýlamazlýðýn (incompressibility) $\nabla \cdot \bar{u} = 0$ olduðunu daha
önce (2)'de görmüþtük.





[devam edecek]

Kaynaklar

[1] Bayramlý, {\em Materyel Türev, Euler ve Lagrange Bakýþ Açýsý},
    \url{https://youtu.be/XDrt-uATAY8}

[2] Storey, {\em Fluid Dynamics}

[3] Lumley, {\em Eulerian and Lagrangian Descriptions in Fluid Mechanics},
    \url{https://www.youtube.com/watch?v=XDrt-uATAY8}

[4] Berloff, {\em Introduction to Geophysical Fluid Dynamics},
    \url{https://wwwf.imperial.ac.uk/~pberloff/gfd_lectures.pdf}

[5] Schuermann, {\em Particle-Based Fluid Simulation with SPH},
    \url{https://lucasschuermann.com/writing/particle-based-fluid-simulation}
    
          
\end{document}
