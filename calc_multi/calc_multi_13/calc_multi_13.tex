\documentclass[12pt,fleqn]{article}\usepackage{../../common}
\begin{document}
Ders 13

Lagrange Çarpanlarý (Multipliers)

Amaç yine $f(x,y,z)$ gibi birden fazla deðiþken içeren bir fonksiyonu
maksimize etmek, deðiþik olan, $x,y,z$ deðiþkenlerinin birbirinden baðýmsýz
ol\textbf{ma}masý. Bu deðiþkenlerin arasýndaki iliþki $g(x,y,z)=c$ gibi bir
fonksiyon tarafýndan gösteriliyor olabilir, $c$ bir sabittir. Yani
$f(x,y,z)$'i minimize ya da maksimize ediyoruz ve bunu sadece $g(x,y,z)=c$
þartýna / sýnýrlama ifadesine (constraint) uyan $x,y,z$ deðerleri için
yapýyoruz.

Bunun için hangi tekniði kullanýrýz? Yollardan biri, eðer sýnýrlama ifadesi
basit ise, belki bir deðiþkeni cebirsel olarak çözmek (diðerleri
baðlamýnda ifade ederek), sonra geri $f$'e sokarýz, böylece klasik bir min
/ maks problemi elde ederiz, ki o tür bir problemi çözmeyi artýk biliyoruz.

Fakat bazen $x,y,z$ deðiþkenleri için analitik çözüm mümkün olmaz, o zaman
farklý teknikler kullanmamýz gerekir. Bu derste öðreneceðimiz teknikler
bunlar olacak. 

Uygulama baðlamýnda, Lagrange Çarpanlarý bizi niye ilgilendiriyor? Belki
fizik, termodinamik dersinde görmüþsünüzdür, sýcaklýk, hacim ve basýnç
deðerleri vardýr, ve bu deðerler birbirinden baðýmsýz
deðildir. Termodinamikte $PV=nRT$ denklemi vardýr, gerçi burada analitik
olarak basitleþtirme yapabilirdik, ama bazý þartlarda tüm deðiþkenleri
olduðu gibi tutmayý isteyebiliriz. 

Þimdiye kadar min / maks problemleri için gördüðümüz kritik nokta bulma
tekniklerinin burada ise yarayamacaðýný hemen belirtelim. O kritik noktalar
$g(x,y,z)=c$ sýnýrlama ifadesini tatmin etmiyor olabilirler. Baþka bir þeye
ihtiyacýmýz var. 

Örnek

Hiperbol $xy =3$ üzerinde olan ve orijine en yakýn noktayý bul. 

Aslýnda bu soruyu temel geometri kullanarak çözebiliriz, fakat burada
Lagrange Çarpanlarý kullanarak çözeceðiz, çünkü iyi bir örnek.

\begin{center}
\includegraphics[height=4cm]{13_1.png}
\end{center}

Neyi minimize edelim? Mesela $f(x,y) = \sqrt{x^2 + y^2}$ olur mu? Olabilir,
ama karekök ifadesinden kurtulursak daha iyi olur. 

O zaman

$$ min \ f(x,y) = x^2 + y^2 $$

$$ ki, \ xy = 3  $$

Yani sýnýrlama ifadesini $g(x,y) = xy$ olarak seçtik. 

Grafiðe bakalým. Yuvarlaklar $f(x,y)$ konturlarý, yeþil okla gösterilen
mesela $f(x,y) = 20$ konturu. Bu kontur üst sað köþe ve sol alt köþede
gösterilen hiperbolu kesiyor mu? Evet. Fakat $f(x,y) = 10$, vs. diyerek
daha küçük yuvarlaklar elde edebilir miyim? Evet. Fakat bir noktadan sonra
bu halkalar hiperbolu kesmeyecektir. 
\begin{center}
\includegraphics[height=5cm]{13_2.png}
\end{center}
Aradýðýmýz $x,y$ deðerleri hiperbole teðet olan, olabilecek en küçük
yuvarlak.

Çözüm için teðetlik kavramýndan faydalanabiliriz. Eðer olabilecek en
minimal $f$, her iki fonksiyonun kesit eðrilerinin teðet olduðu noktada
ise, bu noktayý bulmaya uðraþabilirim. 

Ýki kesit eðrisi birbirine teðet ise, onlarýn teðet düzlemi paraleldir,
eðer öyleyse, bu düzlemlerin normalleri birbirine paralel olmalýdýr. 
\begin{center}
\includegraphics[height=5cm]{13_3.png}
\end{center}
Bu normallerin ayný boyda olmasý gerekmez, yukarýdaki gibi, ama paralel
olmalarý gerekir. Bu durumda 

$$ \nabla f // \nabla g $$

ifadesi doðru olmalýdýr, yani $f$'in gradyaný $g$'nin gradyanýna
paraleldir. Bazý örnekler [hocanýn kullandýðý program mouse ile týklanan
yerde (mavi nokta) her iki fonksiyonun gradyanýný hemen grafikliyebiliyor,
alttaki resimler birkaç örnek noktada yapýlan týklamalar]. 
\begin{center}
\includegraphics[height=4cm]{13_4.png}
\includegraphics[height=4cm]{13_6.png}
\includegraphics[height=4cm]{13_5.png}
\end{center}
Görüldüðü gibi minimal noktalarýn birinde (üstteki son resim) gradyanlar
paralel. 

Cebirsel olarak düþünürsek: vektörler ne zaman birbirine paralel olur?
Birbirlerinin katý olduklarý zaman. Yani þu þekilde bir ifadeyi
yazabildiðimiz zaman

$$ \nabla f = \lambda \nabla g $$

ki $\lambda$ bir sabit. 

Gradyanlar ayný çizgide olup tam zýt yönü gösteriyor olabilir, bu durumu
$\lambda$'nin negatif olup olmamasý halledecektir.

Yani aradýðýmýz $xy$ üzerinde sayýsal deðer $\lambda$ üzerinden $\nabla f =
\lambda \nabla g $ ifadesinin doðru olduðu bir nokta, ve $\lambda$ deðerini
arýyoruz (unutmayalým, gradyanlar belli $x,y$ deðerleri üzerinde alýnýr). Yani 2
deðiþken içeren sýnýrlama ifadesi $g(x,y)=c$ içeren bir min / maks problemi
yerine, bir denklem sistemi geçiriyoruz. Bu sistem nedir?  Üstteki gradyan
formülüdür, o da þu sisteme dönüþür:

$$ f_x = \lambda g_x $$

$$ f_y = \lambda g_y $$

Öyle deðil mi? Çünkü $\nabla f$ ve $\nabla g$ birer vektördür, 

$$ 
\nabla f =
\left[\begin{array}{r}
f_x \\
f_y
\end{array}\right], \ \ 
\nabla g =
\left[\begin{array}{r}
g_x \\
g_y
\end{array}\right]
$$

O zaman iki üstteki denklem sistemi þuradan ileri gelmektedir

$$ 
\left[\begin{array}{r}
f_x \\
f_y
\end{array}\right]  = 
\lambda
\left[\begin{array}{r}
g_x \\
g_y
\end{array}\right]
$$

Fakat hala eksik bir þey var. Elimizde $x,y,\lambda$ bilinmeyenleri var,
ama sadece iki tane formül var. Eksik olan $g(x,y) = c$, çünkü $x,y$
birbirinden baðýmsýz deðil ve $g$ üzerinden baðlantýlýlar. Þimdi oldu. 3
formül þöyle:

$$ f_x = \lambda g_x $$

$$ f_y = \lambda g_y $$

$$ g(x,y) = c $$

Örneðimiz 

$$ f(x,y) = x^2 + y^2 $$

$$ g(x,y) = xy  $$

üzerinde uygularsak

$$ 2x = \lambda y $$

$$ 2y = \lambda x $$

$$ xy = 3 $$

Bu sistemi çözmemiz gerekiyor. Yanlýz þunu söyleyelim, bu sistemi çözmenin genel
(hep iþleyen) bir yöntemi yoktur. Çözüm bazen çok basittir, bazen zordur, bazen
sadece sayýsal / hesapsal açýdan çözülebilir (bilgisayar ile). Bu örnekte kolay.

$$ 2x - \lambda y = 0$$

$$ 2y - \lambda x = 0 $$

$$ xy = 3 $$

Matris formuna koyarsak

$$ 
\left[\begin{array}{rr}
2 & -\lambda \\
\lambda & -2
\end{array}\right]
\left[\begin{array}{r}
x \\ y
\end{array}\right]
=
\left[\begin{array}{r}
0 \\ 0
\end{array}\right]
 $$

En basit çözüm $x=0,y=0$ sýnýrlama ifadesi $xy=3$'u çözmez. Diðer çözüm ne
zaman ortaya çýkar? Eðer matrisin determinantý sýfýr ise. 

$$ 
\left|\begin{array}{rr}
2 & -\lambda \\
\lambda & -2
\end{array}\right| = -4 + \lambda^2 = 0
 $$

$$ <=> \lambda^2 = 4 $$

$$ <=> \lambda = \pm 2 $$

Elimizde iki durum var. $\lambda$ ya 2, ya da -2. 

1) $\lambda = 2$ durumunda

$$ x = y $$

$$ x^2 = 3 $$

O zaman

$(x,y)$ = $(\sqrt{3}, \sqrt{3})$ ya da $(-\sqrt{3}, -\sqrt{3})$ 

2) $\lambda = -2$ durumunda

$$ x = -y $$

$$ -x^2 = 3 $$

Bu durumda çözüm yoktur (karesi alýnýp eksi ile çarpýlan hiçbir sayý 3
sonucunu vermez). 

Üstteki son iki resime bakýnca, $\lambda = 2$'nin doðru olduðunu görüyoruz,
çözüm olan iki noktada bir gradyan ötekinin hakikaten tam iki katý. 

Bu metot niye iþledi? Grafiklere baktýk, teðetlik olduðunu gördük, fakat
bunun niye kesinlikle böyle olmasý gerektiðini söylemedik. 

Kýsýtlý ifade gözönüne alýnýnca ele geçecek bir min / maks noktasýnda ve
$g = c$ kesit eðrisi boyunca, $f$'in deðiþim oraný $=0$ olmalýdýr.

Þimdi ayný þeyi yönsel türev kullanarak söyleyelim. 

$g=c$'e teðet olan her $\hat{u}$ için $df / ds_{|\hat{u}} = 0$ olmalý. 

Yani þu resme bakarsak

\begin{center}
\includegraphics[height=5cm]{13_7.png}
\end{center}

Kesit yüzeyi (ki orada $g=c$) üzerindeki nokta ve o yüzeye teðet olan yön
$\hat{u}$ yönünde $f$'in deðiþimi sýfýrdýr. 

$df / ds_{|\hat{u}}$ formülünün $\nabla f \cdot \hat{u}$ formülüne eþit olduðunu 
 biliyoruz. 

O zaman teðet olan her $\hat{u}$, $\nabla f$'e dik olmalýdýr, yani $\hat{u} 
\perp \nabla f$. 

O zaman $\nabla f$, $g$'nin kesit seviyelerine diktir. 

$g$'nin kesit seviyelerine dik bir baþka vektör daha biliyoruz, o 
da $g$'nin kendi gradyaný, yani $\nabla g$. 

O zaman $\nabla f // \nabla g$ olmalýdýr çünkü her iki gradyan da $g$'nin
kesit seviyelerine ayný anda diktir. 

Tekrar edelim. Sýnýrlanmýþ min, maks noktasýnda $g$ kesit seviyesi üzerinde
ilerliyorsak, $f$'in (en azýndan birinci derecedeki yaklaþýksallamasýndaki)
deðiþimi sýfýrdýr, yani $g=c$'ye teðet yöndeki herhangi bir $f$ türevi sýfýr
olmalý. Min, maks olmak bu demek. O zaman $g=c$'ye teðet olan herhangi bir
$\hat{u}$, $f$'in gradyaný $\nabla f$'e dik olmalýdýr, ve bu da $\nabla f$,
$g$'nin kesit seviyesine dik demektir. 

Yani resimde gördüðümüz tekrar söylemiþ oluyoruz. Her iki kesit seviyesi
kýsýtlanmýþ mýn / maks noktasýnda birbirine teðet olmalý.

UYARI

Bu metot bir çözümün min mi, maks mi olduðunu söylemez. 

Kötü haber: 2. türev testini kullanamayýz. 

Ne yapabiliriz? Elde edilen noktalarý $f$'e verip sonuca teker teker
bakarýz, birbirleri ile karþýlaþtýrýz. Mesela üstteki örnekten elde
ettiðimiz deðerler minimum'dur, maks bu problemde sonsuzluktadýr.

Zor Örnek

Diyelim ki bir piramit inþa etmek istiyoruz, hacim ve üçgensel taban bize
veriliyor. Amaç, tüm dýþ yüzey alanýný minimize etmek. 
\begin{center}
\includegraphics[height=4cm]{13_8.png}
\end{center}
Çözüm için bulmamýz gereken piramidin en üst noktasý. Deðiþik yerlerde
olabilecek, ve nerede olduðuna göre hacimin, alanýn deðiþebileceði
elimizdeki ayar noktasý orasý. Hacim formülü

Hacim = $\frac{1}{3}$ Baz alaný $\times$ yükseklik

Hacmi ve baz alaný sabitlediysek, o zaman formülde geri kalan yükseklik te
sabitlenmiþ demektir. Minimize ederken onun üzerinde oynayamayýz. O zaman
üst nokta sadece xy düzlemine paralel olarak saða, sola, ileri, geri,
vs. þeklinde yer deðiþtirebilir, aþaðý, yukarý çýkamaz. 

\begin{center}
\includegraphics[height=3.5cm]{13_9.png}
\end{center}

Eðer kordinatlarý üstteki gibi ortaya çýkartsak, ele geçen tüm üçgenlerin
alan hesabýný vektör çapraz çarpýmý ile hesaplamayý biliyoruz, onlarýn
toplamýný elde etmeye uðraþabilirdik, vs. Fakat üstteki yöntem iþleri daha
fazla karýþtýrýyor. Kordinatlarý daha iyi temsil edecek bir yöntem
gerekiyor bize.

\begin{center}
\includegraphics[height=4cm]{13_10.png}
\end{center}

Temsili üstteki gibi yapalým, resimde saðda olan þekil piramidin kuþbakýþý
görüntüsü. Piramit tabanýnda bir $Q$ noktasý hayal edelim, $P_1$  ve $P_2$
arasýndan $Q$'ye giden uzaklýk $u_3$ [resimde iyi çýkmadý, biz ekledik],
yüksekliði zaten biliyoruz, $h$. O zaman piramit kenarýnda ona tekabül eden
yükseklik $\sqrt{u_3^2 + h^2}$. 

$$ \textrm{Kenar alaný } = 
\frac{1}{2}a_1 \sqrt{u_1^2 + h^2} + 
\frac{1}{2}a_2 \sqrt{u_2^2 + h^2} + 
\frac{1}{2}a_3 \sqrt{u_3^2 + h^2} 
 $$

Bu 3 deðiþken içeren bir fonksiyon, $f(u_1,u_2,u_3)$. 

Üç deðiþkeni birbiri ile nasýl iliþkilendiririz? Çünkü büyük bir ihtimalle
bunlar baðýmsýz deðiþkenler deðiller.

Eðer üst resimdeki sað þekle bakarsak, ve baz alanýný üç parçaya bölersek,
elde ettiðimiz

$$ \textrm{Baz alaný} = 
\frac{1}{2}a_1u_1 +  
\frac{1}{2}a_2u_2 +  
\frac{1}{2}a_3u_3
$$

formülüdür. Bu formül kýsýtlama ifadem, yani bu problemin $g$'sý. Kenar
alaný formülü de $f$'im. 

Lagrange

$$ \nabla f = \lambda \nabla g $$

$$ \frac{\partial f}{\partial u_1} =
\frac{1}{2}a_1 \frac{u_1}{\sqrt{u_1^2 + h^2}} = 
\lambda \frac{1}{2}a_1
$$

$1/2a_1$'ler iptal olur

$$
\frac{\partial f}{\partial u_1} =
\frac{u_1}{\sqrt{u_1^2 + h^2}} = \lambda 
$$

Diðerleri benzer þekilde

$$
\frac{\partial f}{\partial u_2} =
\frac{u_2}{\sqrt{u_2^2 + h^2}} = \lambda 
$$

$$
\frac{\partial f}{\partial u_3} =
\frac{u_3}{\sqrt{u_3^2 + h^2}} = \lambda 
$$

Son üç formülün üçü de $\lambda$'ya eþit, o zaman üç formül birbirine
eþit. Bu mantýðý izlersek, $u_1 = u_2 = u_3$ olmasý gerektiði sonucuna da
varýrýz. 

O zaman $Q$ noktasý her kenardan eþit uzaklýkta, tam ortada olmalý.

Soru

Bir dikdörtgensel kutu birinci oktan (octant) içine konuyor, ki kutunun $Q$
köþesi tam orijinde, onun köþegen olarak tam zýttýnda duran $P$ noktasý
ise $f(x,y,z)=c$ gibi bir yüzeye dokunuyor. Lagrange Çarpanlarý tekniðini
kullanarak hangi $P$ noktasý için bu kutunun en büyük hacime sahip
olacaðýný hesaplayýn, ve hesabýnýzýn bir maksimum nokta ortaya çýkartýp
çýkarmadýðýný nasýl bildiðinizi ortaya koyun. 

Oktan kavramý alttaki þekilde gösteriliyor, Latin ``octo'' bilindiði gibi
``sekiz'' anlamýna geliyor, ki alttaki 3D kordinat sistemi 8 parçaya
bölünmüþ. 1. oktan tüm iþaretlerin, yani $x,y,z$'nin hepsinin + olduðu
bölge. 

\begin{center}
\includegraphics[height=5cm]{octant.png}
\end{center}

Cevap

a) $f(x,y,z) = x + 2y + 3z = 18$

$$ \nabla (xyz) = \lambda \cdot \nabla f(x,y,z) $$

$$ yz = \lambda, \ xz = 2\lambda, \ xy = 3\lambda $$

Bu formülleri ayný anda çözmek için üstteki üç denklemi sýrasýyla $x,y,z$
ile çarparýz böylece sol tarafý ayný olan üç tane denklem elde etmiþ
oluruz. 

$$ xyz = \lambda x $$

$$ xyz = 2 \lambda y $$

$$ xyz = 3 \lambda z $$

Böylece üç denklemin sað tarafý artýk birbirine eþittir. 

$$ x = 2y = 3z $$

Daha önceden biliyoruz ki

$$ x + 2y + 3z = 18 $$

Birbirine eþit üç þeyin toplamý $18$ ise, o þeylerin her birinin büyüklüðü
$6$ demektir, yani 

$$ x = 2y = 3z = 6$$

Buradan $x,y,z$ teker teker bulunabilir,

$$ x = 6, y=3, z= 2 $$

Bu bir maksimumdur çünkü 1. oktanda kalýp olabileceðimiz en küçük deðer
$x,y,z$ sýfýr olduðu, yani orijinde olduðu zamandýr. Bu noktalar orjinden
büyük deðerler. 

\end{document}






