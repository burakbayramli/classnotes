\documentclass[12pt,fleqn]{article}\usepackage{../../common}
\begin{document}
Ders 5

Bir çizginin formülünü iki düzlemin kesiþimi olarak gördük, fakat bu
þekilde bir taným çoðunlukla bir çizgiyi tanýmlamak için en rahat / uygun
yol deðildir, çünkü elinizde bazý denklemler var, bunlarý çözmekle uðraþmak
lazým, vs. 

Þöyle bir yöntem daha iyi olmaz mý? Çizgi üzerinde bir nokta hayal edelim,
ve bu noktanýn, her zaman adýmýnda, çizgimizin olduðu yerlerden geçtiðini
düþünelim. Bu tür denklemlere parametrik denklem ismi veriliyor. 

Örnek

Çizgi üzerinde iki nokta verelim. 

$$ Q_0 = (-1,2,2) $$

$$ Q_1 = (1,3,-1) $$

Güzel, bu iki nokta var ama ötekilerini nasýl tanýmlarýz? Bu iki noktasýnýn
arasýnda, sonrasýnda, öncesinde olan tüm noktalar da çizgiye dahildir. 

\includegraphics[height=4cm]{5_1.png}

Zaman aralýklarýný öyle düþünelim ki zaman indeksi sýfýr ($t=0$)
noktasýnda, çizgi $Q_0$ üzerinde, tek birim adým atýldýðýnda ($t=1$)  $Q_1$
üzerinde, gibi. O zaman yarým birim zamanda tam iki nokta ortasýnda. 

Böylece çizgiyi temsil etmenin yolu onu $t$ bazýnda hareket eden noktanýn
geçtiði yerler olarak tanýmlamak. Bu temsilin en basit hali eðer hareket
sabit hýzda olursa olur. 

$t$ anýndaki pozisyon $Q(t)$ nedir? 

Sorunun cevabýný þöyle vermeye baþlayabiliriz: $\vec{Q_0Q(t)}$ vektörü
$\vec{Q_0Q_1}$ birbiriyle ortalýdýr. Bu orantý neye eþittir? 

Bu oran $t$'ye eþittir. O zaman

$$ \vec{Q_0Q(t)} = t \ \vec{Q_0Q_1}  $$

\includegraphics[height=4cm]{5_2.png}

O zaman iddia ediyorum ki bu formülü kullanarak örneðimizdeki hareket eden
noktanýn yer formülünü bulabilirim.

$$ \vec{Q_0Q(t)} = t \ <2,1,-3>  $$

Þimdi çizgi üzerinde hareket eden noktanýn formülü $Q(t)$'yi þu þekilde
temsil edelim

$$ Q(t) = <x(t),y(t),z(t)> $$

O zaman

$$ x(t) + 1 = 2t $$

$$ y(t) - 2 = t $$

$$ z(t) - 2 = -3t $$

Üsttekiler, alttaki þu formun açýlýmýndan ibaret aslýnda

$$ Q(t) = Q_0 + t \ \vec{Q_0Q_1}  $$

Üstteki üç formül bu derste gördüðümüz ilk parametrik çizgi
formülü. Formülün parçalarý olan $x(t),y(t),z(t)$ sadece $t$'nin
fonksiyonudurlar, ve hep $t$ ile bir katsayýnýn çarpýmý + bir sabit
formundadýrlar. $t$'nin katsayýlarý çizgi üzerindeki vektör hakkýnda bilgi
verir, ve sabitler ise $t=0$ anýnda nerede olduðumuzu gösteren baþlangýç
deðerleridirler. 

Uygulama - Bir Düzlem ile Kesiþme

Düzlem $x+2y+4z=7$. Çizgi biraz önceki formül olsun. Kesiþme var mýdýr, var
ise nerededir? 

Önce þu soruyu soralým kendimize. $x+2y+4z=7$ düzlemine göre, 
$Q_0 =(-1,2,2)$ ve $Q_1 = (1,3,-1)$ noktalarý düzlemin

\begin{itemize}
   \item Ayný tarafýnda
   \item Farklý taraflarýnda
   \item Bir tanesi düzlem üzerinde
   \item Karar veremiyorum
\end{itemize}

Cevaplayýn. 

$Q_0$ ve $Q_1$ noktalarýný düzlem formülünün sol tarafýna sokarýz. $Q_0$
için sonuç $>7$, düzlem üzerinde deðil, $Q_1$ için sonuç $<7$, yine düzlem
üzerinde deðil. Peki noktalar düzlemin hangi tarafýnda? Ters tarafýnda,
çünkü biri $<7$, öteki $>7$ sonuç verdi. Bir düzlem uzayý iki yarý-parçaya
(halfspace) ayýrýr ve noktalar bu ayrý parçalardadýrlar. Doðru cevap 2. 

Uygulamamýzda cevaplanmayan bir soru daha var. Kesiþme noktasý neresi?
$Q(t)$ nedir? Þöyle

$$ x(t) + 2y(t) + 4z(t) $$

$$ = (-1+2t) + 2(2+t) + 4(2-3t) $$

Basitleþtirelim

$$ = -8t + 11 $$

Bu formülü $7$ ile karþýlaþtýralým çünkü $Q(t)$ nin düzlem üzerinde olduðu
an $-8t + 11 = 7$ olduðu andýr. Cebirsel olarak $t$'yi elde edebiliriz,
sonuç $t=1/2$. Bu deðeri $Q(t)$'ye koyarsak

$$ Q(\frac{1}{2}) = (0,\frac{5}{2},\frac{1}{2}) $$

Kesiþim noktasý eþitliðin saðýndaki deðerdir.

Yani eðer çizginin parametrik denklemini biliyorsak, onu düzlem formülüne
sokarýz, ve kesiþimin hangi noktada olduðunu hemen hesaplayabiliriz. 

Þimdiye kadar gördüklerimizden parametrik denklemlerin çizgileri temsil
etmek için iyi bir yöntem olduklarý belli olmuþtur herhalde. Bunun ötesinde
parametrik denklemler uzaydaki herhangi bir eðri (curve), herhangi bir
gidiþatý, yolu (trajectory) temsil etme kabiliyetine de sahiptir. 

Genel baðlamda söylemek gerekirse, parametrik denklemleri uzayda içinde ya
düzlem üzerindeki herhangi (arbitrary) bir hareketi temsil etmek için
kullanabiliriz.

Cycloid (Yuvarlanma Eðrisi)

$a$ yarý çapýndaki bir tekerlek yerde (x-ekseninde) dönerek ilerliyor, $P$ bu
tekerleðin dýþ çeperinde (rim) bir nokta, baþlangýç noktasý 0 üzerinde. Ne
olur? Daha detaylý olarak sormak gerekirse $P$ noktasýnýn hareketini
$t$'nin bir fonksiyonu $x(t),y(t)$ olarak hesaplayabilir miyiz?

\includegraphics[height=4cm]{5_3.png}

[x-ekseni biraz saða yatik çýkmýþ ama bu video kamerasýnýn açýsý 
yüzünden]. Bu örneði bir bisikletin tekerliðine takýlmýþ bir ýþýðýn,
bisiklet gece giderken ortaya çýkartabileceði görüntüyü düþünürek te hayal
edebiliriz. Yani hem dönüþ hareketi var, hem de yatay olarak düz bir gidiþ
hareketi var.

Bu $P$ noktasýnýn gidiþ yolunu hesaplamak için tekerleðin ne kadar hýzlý
döndüðü önemli mi? Hayýr deðil. Yavaþ ta hýzlý da döndürsek, $P$ ayný
noktalardan geçecektir. 

Bu problemde en önemli faktör zaman deðil, mesafe, tekerleðin ne kadar
mesafe katettiði. Ya da daha bile iyisi, mesafe ile dönüþ birbirine
baðlantýlý olduðuna göre, ve problemdeki en çetrefil, girift oluþ dönme
(rotation) olduðu için, belki de tekerleðin ne kadar döndüðünü gösteren
bir açý deðeri, bu büyüklüðü kullanýrsak belki daha faydalý olacak. Pek çok
deðiþik temsil yöntemi olabilir, fakat açýya göre parametrize edersek en
temiz formülü elde etmek mümkün olur. O zaman $x(t),y(t)$ yerine
$x(\theta),y(\theta)$ kullanalým. 

Yani $x(\theta),y(\theta)$ ile tekerleðin ne kadar dönmüþ olduðunu
belirleyen $\theta$ açý üzerinden tanýmlý bir fonksiyon kullanalým. 

\includegraphics[height=4cm]{5_4.png}

Tekerleðin nerede olduðu bilgisini ise $\vec{OP}$ vektörü ile temsil
edebilirim. Buradaki tek problem vektör $\vec{OP}$ hakkýnda hiç bir þey
bilmiyorum. Ama belki daha basit vektörler hakkýnda bir þeyler
biliyorumdur. Mesela $\vec{AB}$ basit gibi duruyor, ayný þekilde $\vec{OA}$
fena deðil, $\vec{BP}$ ayný þekilde. Peki $\vec{OP}$'yi bu daha basit
vektörler üzerinden temsil edemez miyim? Edebilirim. 

$$ \vec{OP} = \vec{OA} + \vec{AB} + \vec{BP}  $$

O zaman bu basit vektörleri hesaplayabilirsem, daha zor olan $\vec{OP}$'yi
de hesaplarým. 

$$ \vec{OA} = <a\theta, 0> $$

Niye? Vektörün $y$ bileþeni sýfýr, bu bariz. 

\includegraphics[height=3cm]{5_5.png}

Peki niye $a\theta$? Eðer kayma, boþta dönme gibi þeyler yok ise, bu
tekerleðin dýþ çemberinin katettiði dönüþ / geldiði nokta (üstte yeþil ile
iþaretli), tekerleðin gittiði yer mesafesi ile aynýdýr. Bu yüzeylerden
birinin kavisli, diðerinin düz olmasý bu gerçeði deðiþtirmez. Yeþil ile
iþaretli dýþ çember parçasýnýn $a\theta$ ile hesaplandýðýný basit
matematikten biliyoruz (eðer $\theta$ radyan biriminde ise tabii, zaten bu
sebeple -iþleri basitleþtirdiði için- matematikte hep radyan birimi
kullanýlýr). 

$\vec{AB}$ daha kolay, $x$ bileþeni sýfýr, $y$ yönüne yarýçap kadar
gitmiþ. 

$$ \vec{AB} = <0, a> $$

En son vektör $\vec{BP}$ biraz daha zor. Bu vektör hakkýnda neler
biliyoruz? Büyüklüðünü yani $|\vec{BP}|$'yi biliyoruz ve dikey eksen ile
$\theta$ kadar bir açý oluþturduðunu biliyoruz. Daha yakýndan bakarsak

\includegraphics[height=2cm]{5_6.png}

$$ \vec{BP} = <-a\sin(\theta), -a\cos(\theta)> $$

Þimdi ekleme aþamasýna geldik. 

$$ \vec{OP} = <a\theta - a\sin(\theta), a-a\cos(\theta)> $$

Ve nihayet cevabýmýzý bulduk. Çünkü 

$$ \vec{OP} = 
<
\underbrace{a\theta - a\sin(\theta)}_{x(\theta)}, 
\underbrace{a-a\cos(\theta)}_{y(\theta)}
> $$

Bu problemi modellerken zihnimizde oluþan, istifade ettiðimiz þekil þu:

\includegraphics[height=3cm]{cycloid-lines.png}

çünkü vektör toplamýnýn geometrik olarak nasýl iþlediðini biliyoruz, ve
eksik kalacak tek parça, basit toplamayla elde edeceðimiz aradýðýmýz
parametrik vektör olacak. Bu yöntemi seçmemizin bir diðer sebebi üstteki
parçalarýn hepsinin basit hesaplanabiliyor olmasý, her üç vektör için de
yarýçap $a$ mutlaka bir hesaba dahil, ve bu yarýçap hiç deðiþmeyen bir þey,
dolayýsýyla modellememizi basitleþtiriyor. Yine benzer bir sebeple $\theta$
$\vec{OP}$ vektörünün x-ekseniyle oluþturduðu açý deðil, $\vec{BP}$'nin
y-ekseniyle oluþturduðu açý. Böylece onun üzerinden ve $a$ ile üç vektörü
hýzlý bir þekilde hesaplayabiliyoruz. 

Ayrýca modellemede parametre $t$ deðil, $\theta$. Bu mantýklý, deðiþimi ile
tüm vektör öðelerini bir þekilde etkileyen (ayrý formüller üzerinden tabii)
her dýþ deðiþken bir parametre olarak kullanýlabilir.  

Þimdi gizemli bir noktayý inceleyelim. Tekerleðin dönmesi sonucu takip
edilen noktanýn yere deðip, tekrar yukarý çýktýðý anda, oluþan takip
çizgisi ne þekildedir? Bilgisayar grafiðine bakalým; 

\includegraphics[height=4cm]{5_7.png}

Sekil sunlardan hangisidir? 

\includegraphics[height=4cm]{5_8.png}

Bu cevabý vermenin en iyi yolu, formüllerimizi kullanmak. 

Formülleri basitleþtirmek için eðer $a=1$ alýrsak, 

$$ x(\theta) = \theta - \sin \theta $$

$$ y(\theta) = 1 - \cos \theta $$

Þimdi yaklaþýksal olarak düþünmeye uðraþalým. Çok küçük $\theta$ için
$\sin(\theta) \approx \theta$ ve $\cos(\theta) \approx 1$. Bunlarý
$x(\theta), y(\theta)$ içinde kullanýrsak, biri 0, öteki 1 çýkacak, bunlar
pek net sonuçlar deðiller. Demek ki bize daha iyi yaklaþýksal (approximate)
teknikler gerekiyor. 

Tek Deðiþkenli Calculus dersinde Taylor yaklaþýksallamasý (Approximation) 
öðretilir. 

Taylor Yaklaþýksallamasý

Ekler

Taylor Serisi

Bir fonksiyon $f(x)$'in bir güç serisi (power series) toplamý olduðunu
farzedelim [3, sf. 805], 

$$ f(x) = a_0 + a_1(x-a) + a_2(x-a)^2 + a_3(x-a)^3 + ... + a_n (x-a)^n + ...$$

Aslýnda $x-a$ yerine sadece $x$ kullanabilirdik, fakat $x-a$ kullanmanýn
cebirsel olarak bazý faydalarý var; bunu birazdan göreceðiz.. Þimdi bu
fonksiyonun ardý ardýna türevini alalým,

$$ f'(x) = a_1 +  2a_2(x-a) + 3a_3(x-a)^2 + ... + n a_n(x-a)^{n-1} + ...$$

$$ f''(x) = 1 \cdot 2a_2 + 3 \cdot 2a_3(x-a) + .. $$

$$ f'''(x) =  1 \cdot 2 \cdot 3 (x-a) + .. $$

Taylor Serilerinin ana numarasý ilk baþta gördüðümüz serinin katsaylarýnýn
içini doldurmak için üstte gördüðümüz türevleri kullanmasýdýr, böylece bir
fonksiyonun istediðimiz kadar derecedeki türevlerini kullanarak o
fonksiyonu belli bir noktada ($x=a$) yaklaþýksal olarak temsil
edebiliriz. Katsayýlarý þöyle doldururuz, mesela ana formüldeki $a_0$ ne
olacak? Ana formülde $f(a)=a_0$. Peki $a_1$? Ýlk türeve bakalým, 

$$ f'(a) = a_1  $$

Bu basit ifade mümkün oldu çünkü $x=a$ deyince tüm $x-a$ içeren ifadeler
sýfýr haline geldi ve denklemden çýktýlar. $a_2$ için

$$ \frac{f''(a)}{1 \cdot 2} = a_2  $$

Bu katsayýlarý ana formülde yerine koyalým (sadece $a_0,a_1,a_2$ için)

$$ f(x) = f(a) + f'(a)(x-a) + \frac{f''(a)}{2}(x-a)^2 + .. $$

Ýþte Taylor yaklaþýllamasý budur! Ana formülü kaç polinom derecesi ile
temsil etmek istediðimize göre üstteki türevlerin sayýsý artabilir ya da
azalabilir, bu probleme göre yapýlmasý gereken bir seçidimdir - çoðunlukla
2 derece yeterlidir. 

Derse dönelim,

Küçük $t$ deðerleri için 

$$ f(t) \approx f(0) $$

Bu kabaca bir yaklaþýksallamadýr tabii ki. Biraz daha iyisi için, eðer $t$
kadar deðiþim olursa, bu deðiþimin þu þekilde eklenebileceðini farzederiz.

$$ f(t) \approx f(0) + tf'(0)$$

Biraz daha iyisi için

$$ f(t) \approx f(0) + tf'(0) + \frac{t^2}{2}f''(0)$$

Buna istediðimiz kadar devam edebiliriz

$$ f(t) \approx f(0) + tf'(0) + \frac{t^2}{2}f''(0) + \frac{t^3}{6}f'''(0)$$

Bu tekniði þimdi kullanalým

$$ \sin \theta \approx \theta - \frac{\theta^3}{6} $$

$$ \cos \theta \approx 1 - \frac{\theta^2}{2} $$

O zaman

$$ x(\theta) \approx \theta - (\theta  - \frac{\theta^3}{6}) 
\approx \frac{\theta^3}{6} 
$$

$$ y(\theta) \approx 1 - (1  - \frac{\theta^2}{2}) 
\approx \frac{\theta^2}{2} 
$$

Bu deðerlerden hangisi $\theta$ küçük iken daha büyük? $y(\theta)$. Yani
$|x| << |y|$. Daha net bir sayý için bu iki büyüklüðün oranýna bakabiliriz,
bu bize bir eðim bilgisi verecektir. 

$$ \frac{y}{x} = \frac{\theta^3/6}{\theta^2/2 } = 
\frac{3}{\theta} \to \infty, \ \ \theta \to 0
$$

Yani $\theta$ sýfýra yaklaþýrken eðim neredeyse sonsuz, takip ettiðimiz
nokta saða, sola neredeyse hiç hareket etmiyor, neredeyse tüm hareket dikey
þekilde. Demek ki üstte 4. þekil doðru cevap. 

Problem 1E-4

$(0,1,2)$ ve $(2,0,3)$ noktalarýndan geçen çizgi düzlem $x + 4y + z = 4$'i
nerede keser? 

Cevap

A ve B noktalarý üzerinden bir yön, yani bir vektör hesaplayabiliriz, $\vec{AB}
= <2,-1,1>$. Sonra bu vektörün katlarý kadar, $t$ adýmý atarak, baþlangýç
noktasýndan sonsuza kadar giden çizginin parametrik formülünü buluruz, yani $A +
\vec{AB} \ t$.

$$ x = 0 + 2t = 2t $$

$$ y = 1 - t $$

$$ z = 2 + t $$

Parametrik formülü düzlem formülünde yerine koyalým. 

$$ (2t) + 4(1-t) + (2+t) = 4 $$

Çözünce $t=2$ çýkar. Bunu parametrik formülde yerine koyunca $(4,-1,4)$
kesiþim noktasýný elde ederiz. 

Problem 1E-5 

$(1,1,-1)$ noktasýndan geçen çizgi $x+2y - z = 3$ düzlemine diktir. Bu
çizgi $2x - y + z = 1$ düzlemini hangi noktada keser? 

Cevap

Kesiþim hesabý için çizginin parametrik denklemini bulmamýz lazým. Eðer bu
çizgi ilk düzleme dik ise, o düzlemin normalý ``yönünde'' gitmektedir, o
zaman elimizde bir yön var, bir de baþlangýç noktasý var. O noktadan,
normal yönünde $t$ adýmý atmayý kodlayacaðýz (birinci düzlem ile kesiþme
önemli deðil). 

$$ x(t) = 1 + t $$

$$ y(t) = 1 + 2t $$

$$ z(t) = -1 -t $$

Þimdi bu çizginin ikinci düzlemle kesiþtiði söylendiðine göre, þunun doðru
olmasý gerekir

$$ 2(1+t) - (1+2t) + (-1-t) = 1 $$

Yani parametrik denklemin öðelerini teker teker ikinci düzlemin içine
koymuþ oluyoruz. Üstteki denklemi çözünce $t=-1$ çýkacak. Bunu alýp
parametrik denkleme geri koyarsak, elde edilen nokta $(0,-1,0)$
noktasýdýr [ders cevaplarýnda 0,1,0 deniyor, bu yanlýþ]. 

Ýki Boyutlu f(x,y) Fonksiyonunun Taylor Açýlýmý

Bir $f(x,y)$ fonksiyonunun Taylor açýlýmýný yapmak için, daha önceden
gördüðümüz tek boyutlu fonksiyon açýlýmýndan faydalanabiliriz [2]. 

Önce iki boyutlu fonksiyonu tek boyutlu olarak göstermek gerekir. Tek
boyutta iþleyen bir fonksiyon $F$ düþünelim ve bu $F$, arka planda iki
boyutlu $f(x,y)$'ý kullanýyor olsun

Eðer 

$$ f(x_0 +\Delta x, y_o + \Delta y) $$

fonksiyonun açýlýmýný elde etmek istiyorsak, onu

$$ F(t) = f(x_0 + t\Delta x, y_o + t\Delta y) $$

üzerinden $t=1$ olduðu durumda hayal edebiliriz. $x,y$ parametrize 
olduðu için  $f(x(t),y(t))$, yani

$$ x(t) = x_0 + t\Delta x $$

$$ y(t) = y_0 + t\Delta y $$

$F(t)$ baðlamýnda $x_o, y_o, \Delta x, \Delta y$ sabit olarak kabul edilecekler. Þimdi bildiðimiz
tek boyutlu Taylor açýlýmýný bu fonksiyon üzerinde, bir $t_0$ noktasý yakýnýnda 
yaparsak,

$$ F(t) = F(t_0) + F'(t_0)(t-t_0) + \frac{1}{2}F''(t_0)(t-t_0)^2 + ... $$

Eðer $t=1,t_0=0$ dersek

$$ F(1) = F(0) + F'(0) + \frac{1}{2}F''(0) + ... $$

olurdu. Bu iki deðeri, yani $t=1,t_0=0$'i kullanmamýzýn sebepleri $t=1$ ile
mesela $x_0 + t\Delta x$'in $x_0 + \Delta x$ olmasý, diðer yandan $t=0$ ile
üstteki formülde $t$'nin yokolmasý, basit bir tek boyutlu açýlým elde
etmek.

Þimdi bize gereken $F',F''$ ifadelerini $x,y$ baðlamýnda elde edelim, ki bu
diferansiyeller $F$'in $t$'ye göre birinci ve ikinci diferansiyelleri. Ama
$F$'in içinde $x,y$ olduðu için açýlýmýn Zincirleme Kanunu ile yapýlmasý
lazým.

$$ \frac{dF}{dt} = \frac{\partial F}{\partial x}\frac{\ud x(t)}{\ud t} +
\frac{\partial F}{\partial y}\frac{\ud y(t)}{\ud t} 
 $$

Ayrýca

$$ \frac{d}{dt}x(t) = \Delta x $$

$$ \frac{d}{dt}y(t) = \Delta y $$

olduðuna göre, tam diferansiyel daha da basitleþir

$$ \frac{\ud F}{\ud t} = \frac{\partial F}{\partial x}\Delta x +
\frac{\partial F}{\partial y}\Delta y
 $$

Þimdi bu ifadenin bir tam diferansiyelini alacaðýz. Ama ondan önce þunu
anlayalým ki üstteki ifade içinde mesela birinci terim de aslýnda bir
fonksiyon, ve asýl hali

$$ \frac{\ud F}{\ud t} = \frac{\partial F(x(t),y(t))}{\partial x}\Delta x + ...
 $$

þeklinde. O zaman, bu terim üzerinde tam diferansiyel iþlemini bir daha
uyguladýðýmýzda, Zincirleme Kanunu yine iþleyecek, mesela üstte $\ud x(t)/ \ud
t$'nin bir daha dýþarý çýkmasý gerekecek. O zaman

$$ \frac{d^2F}{dt} =
\bigg(
\frac{\partial ^2 F}{\partial x^2}\frac{dx}{dt} + 
\frac{\partial ^2 F}{\partial x \partial y}\frac{dy}{dt} + 
\bigg) \Delta x +
\bigg(
\frac{\partial ^2 F}{\partial y \partial x}\frac{dy}{dt} + 
\frac{\partial ^2 F}{\partial y^2}\frac{dx}{dt} + 
\bigg) \Delta y 
$$

$$ =
\bigg(
\frac{\partial ^2 F}{\partial x^2}\Delta x + 
\frac{\partial ^2 F}{\partial x \partial y}\Delta y 
\bigg) \Delta x +
\bigg(
\frac{\partial ^2 F}{\partial y \partial x}\Delta x + 
\frac{\partial ^2 F}{\partial y^2}\Delta y 
\bigg) \Delta y 
 $$

$$ =
\bigg(
\frac{\partial ^2 F}{\partial x^2}\Delta x^2 + 
\frac{\partial ^2 F}{\partial x \partial y}\Delta y \Delta x
\bigg) +
\bigg(
\frac{\partial ^2 F}{\partial y \partial x}\Delta x \Delta y + 
\frac{\partial ^2 F}{\partial y^2}\Delta y^2
\bigg) 
 $$

Calculus'tan biliyoruz ki 

$$ 
\frac{\partial ^2 F}{\partial x \partial y} = 
\frac{\partial ^2 F}{\partial y \partial x} 
 $$

Daha kýsa notasyonla

$$ f_{xy} = f_{yx} $$

Yani kýsmi türevin alýnma sýrasý farketmiyor. O zaman, ve her þeyi daha
kýsa notasyonla bir daha yazarsak

$$ =
(f_{xx}\Delta x^2 + f_{xy}\Delta y \Delta x ) +
(f_{xy}\Delta x \Delta y + f_{yy}\Delta y^2 )
 $$

$$
\frac{d^2F}{dt}  =
(f_{xx}\Delta x^2 + 2f_{xy}\Delta y \Delta x + f_{yy}\Delta y^2 )
 $$

Artýk elimizde $F$ ve $F'$ var, bunlarý 

$$ F(1) = F(0) + F'(0) + \frac{1}{2}F''(0) + ... $$

içine yerleþtirebiliriz. En son þu kaldý, $F(0)$ nedir? $F$'in $t=0$ olduðu
anda deðeridir, 

$$ F(t) = f(x_0 + t\Delta x, y_o + t\Delta y) $$

$$ F(0) = f(x_0 + 0 \cdot \Delta x, y_o + 0 \cdot \Delta y) $$

$$ = f(x_0 , y_o) $$

Benzer þekilde, tüm türevler de $t=0$ noktasýnda kullanýlacaktýr, o zaman
onlar da

$$ F'(0) = f_x(x_0,y_0) \Delta x + f_y(x_0,y_0) \Delta y $$

$$ F''(0) =  
f_{xx}(x_0,y_0)\Delta x^2 + 2f_{xy}(x_0,y_0)\Delta y \Delta x + 
f_{yy}(x_0,y_0)\Delta y^2 
$$

þeklinde olurlar. Tamam. Þimdi ana formülde yerlerine koyalým,

$$ 
\begin{array}{lll}
F(1) &=&  f(x_0 +\Delta x, y_o + \Delta y)  \\ \\
&=& f(x_0 , y_o) +  f_x(x_0,y_0) \Delta x + f_y(x_0,y_0) \Delta y +   \\ \\
&& \frac{1}{2} 
[ 
f_{xx}(x_0,y_0)\Delta x^2 + 
2f_{xy}(x_0,y_0)\Delta y \Delta x +
f_{yy}(x_0,y_0)\Delta y^2 
] + ... 
\end{array}
 $$

Çok Boyutlu Taylor Açýlýmý

Bir $h$ adýmý için, $\bar{x}$ noktasýndaki Taylor açýlýmý,

$$
f(x + h) = 
f(\bar{x}) + \nabla f(\bar{x}) h + 
\frac{1}{2} h^T \nabla^2f(\bar{x}) h +  ...
$$

Çizgi Düzlem Kesiþmesi

Elimizde $P = 2x + y - 4z = 4$ düzlemi var. Bu düzlemin 

$$ x = t \quad y = 2 + 3t \quad z = t$$

çizgisi ile kesiþtiði yer neresidir? 

Cevap kolay; çizgi denkleminde $t$ bazlý tanýmlý $x,y,z$ deðerleri $P$'ye
sokarsak, tek bilinmeyeni $t$ olan bir denklem çýkar, 

$$ 2(t) + (2+3t)-4(t) = 4 \Rightarrow t = 2$$

Çizgi Düzlem Kesiþmesini Vektörler ile Hesaplamak

Üstteki yöntem cebirsel manipülasyon gerektiriyor, fakat sayýsal hesap için
sembolik cebir iþlemlerine girmeden vektör matematiði ile direk bir sonuç
bulamaz mýyýz? [1,4]'ü temel alalým: alttaki durumu düþünelim, 

\includegraphics[width=20em]{5_9.png}

Grafiðe göre $P(s)$ $P_1$ ve $P_0$ arasýndaki birim vektörün $s$ kadar
uzatýlmýþ hali olsun, o aralýðý $u$ kabul edersek $P(s)-V_0 = w + su$
olur. Düzlem ile kesiþmenin olduðu noktayý $P(s_I)$ diye tanýmlayalým,
aradýðýmýz nokta burasý. O noktada $n$ ile $P(s_I)$ dikgen olacaktýr, yani
$P(s) - V_0 = w + su$ vektörü $n$'e dikgen olacaktýr, ki $w=P_0-V_0$. Bu
durumda $n \cdot (w+su) = 0$ olur. Bunu kullanarak,

$$ s_I = \frac{-n \cdot w}{n \cdot u} = 
\frac{n \cdot (V_0 - P_0)}{n \cdot (P_1-P_0)} = 
\frac{-(ax_0 + by_0 + cz_0 + d)}{n \cdot u}
$$

\begin{minted}[fontsize=\footnotesize]{python}
n = np.array([1., 1., 1.])
V0 = np.array([1., 1., -5.])
P0 = np.array([-5., 1., -1.])
P1 = np.array([1., 2., 3.])

w = P0 - V0;
u = P1-P0;
N = -np.dot(n,w);
D = np.dot(n,u)
sI = N / D
I = P0+ sI*u
print I
\end{minted}

\begin{verbatim}
[-3.90909091  1.18181818 -0.27272727]
\end{verbatim}

Grafiklersek

\begin{minted}[fontsize=\footnotesize]{python}
import sys; sys.path.append('../../vision/vision_02')
import plot3d

f = plt.figure()
ax = f.gca(projection='3d')
w = 10
ax.set_xlim(-w,w);ax.set_ylim(-w,w);ax.set_zlim(-w,w)
ax.set_xlabel("X")
ax.set_ylabel("Y")
ax.set_zlabel("Z")
v = P1-P0
ax.quiver(P0[0], P0[1], P0[2], v[0], v[1], v[2], color='red')
ax.scatter(V0[0], V0[1], V0[2], color='black')
ax.scatter(V0[0]+n[0], V0[1]+n[1], V0[2]+n[2], color='black')
ax.scatter(I[0], I[1], I[2], color='black')
ax.quiver(V0[0], V0[1], V0[2], n[0], n[1], n[2], color='blue')
plot3d.plot_plane(ax, list(V0), list(n), color='y')
plt.savefig('5_10.png')
\end{minted}

\includegraphics[width=20em]{5_10.png}

Çizgi Parçasýna Noktanýn En Yakýn Mesafesi

Elimizde verili iki nokta arasýnda tanýmlý çizgi parçasý var. Herhangi bir
noktanýn bu parçaya en yakýn mesafesi nedir? Ayrýca o noktadan parçaya bir düz
çizgi çekilse kesiþimin olduðu nokta nerededir?

Þu metota bakalým [5]. Çizgiyi $\vec{z} = \vec{a} + t \vec{b}$ olarak
tanýmlayabiliriz. O zaman bu çizgi ile bir diðer nokta $\vec{x}$ arasýndaki
mesafe $\vec{x}-\vec{z}$ vektörünün uzunluðudur, yani

$$
|| \vec{x} - (\vec{a} + t' \vec{b}) ||
$$

olarak tanýmlanabilir, ki burada $t'$ özel bir $t$ deðeri oluyor. Bu deðer öyle
bir $t$ deðeri ki o noktaya kadar gelen $\vec{z}$'nin bolumu $\vec{x}$'e dik. Bu
noktayý ve ardýndan çizgiye olan (dik) mesafeyi nasýl buluruz?

Þimdi üstteki çizgi formülünde kesiþim anýna kadar olan bölümdeki, $t'$'ye
tekabül eden kýsma $\vec{r}$ diyelim, ve onu

$$
\vec{r} = \vec{a} + t' \vec{b}
$$

olarak gösterelim. Ýstediðimiz $||\vec{r}-\vec{x}||$ uzunluðunu bulmak. $t'$
deðerinde aradaki vektör $\vec{b}$'ye dik olduðuna göre

$$
(\vec{x} - \vec{r}) \cdot \vec{b} = 0
$$

$\vec{r}$ formülünü açalým,

$$
= (\vec{x} - \vec{a} - t' \vec{b}) \cdot \vec{b} = 0
$$

$$
= \vec{x}\cdot\vec{b} - \vec{a}\cdot\vec{b} - t'||b||^2 = 0
$$

$$
t' = \frac{\vec{x}\cdot\vec{b} - \vec{a}\cdot\vec{b}}{||b||^2}
$$

Örnek

$<2,2>$ ve $<5,5>$ noktalarý noktalarýndan geçen çizgiye $<4,1>$ noktasýnýn
uzaklýðý nedir? Kesiþim nerede olur?

\begin{minted}[fontsize=\footnotesize]{python}
def dist(x1,y1,x2,y2,px,py):
    a = np.array([[x1,y1]]).T
    b = np.array([[x2,y2]]).T
    x = np.array([[px,py]]).T
    tp = (np.dot(x.T, b) - np.dot(a.T, b)) / np.dot(b.T, b)
    tp = tp[0][0]
    tmp = x - (a + tp*b)
    d = np.sqrt(np.dot(tmp.T,tmp)[0][0])
    return d, a+tp*b

x1,y1=2.,2.
x2,y2=5.,5.
px,py=4.,1.

d, inters = dist(x1,y1, x2,y2, px,py)
print (d)
print (inters)
\end{minted}

\begin{verbatim}
2.1213203435596424
[[2.5]
 [2.5]]
\end{verbatim}

Not: Üstteki metot 2, 3 üzeri boyutlar için de iþleyecektir. 

Ýki Nokta Arasýnda Parametrize Edilmiþ Eðri

Diyelim ki $(1,1)$ ve $(4,4)$ noktalarýndan geçen ve dýþarýdan tanýmlý
parametrelerle yeterince eðilip, bükülebilecek bir eðri tanýmlamamýz
lazým. Polinonmlar üzerinden tanýmlanan bir eðri ile bunu baþarabiliriz, 

$$
x(t) = a_0 + a_1 t + a_2 t^2 + a_3 t^3
$$

$$
y(t) = b_0 + b_1 t + b_2 t^2 + b_3 t^3
$$

Bu þekilde bir eðri yeterince eðilip bükülebilir, ve istenen þekle
sokulabilir. Fakat baþ ve sonun verili noktalardan geçmesini nasýl garanti
ederiz? Bunun için bu noktalarý üstteki denkleme sokalim, ve $0 \le t \le
1$ olacak sekilde kýsýtlama yapalim, $t=0$'da

$$
1 = a_0 + a_1 (0) + a_2 (0)^2 + a_3 (0)^3
$$

$$
1 = b_0 + b_1 (0) + b_2 (0)^2 + b_3 (0)^3
$$

Yani  $a_0=1$ ve $b_0=1$. Peki $t=1$ icin?

$$
4 = 1 + a_1 (1) + a_2 (1)^2 + a_3 (1)^3 
$$

$$
4 = 1 + b_1 (1) + b_2 (1)^2 + b_3 (1)^3 
$$

$$
3 = a_1 + a_2 + a_3, \quad 3 = b_1 + b_2 + b_3
$$

Demek ki üstteki iki formüle mutabýk kaldýðýmýz sürece
$a_1,a_2,a_3,b_1,b_2,b_3$ ie istediðimiz þekilde oynayarak istediðimiz
eðriyi ortaya çýkartabiliriz. 

\begin{minted}[fontsize=\footnotesize]{python}
t = np.linspace(0,1.0,100)

a1,a2 = -1.1, 1.9
b1,b2 = 1.1, 1.4

sx,sy=(1.0,1.0)
ex,ey=(4.0,4.0)

a3 = ex - sx - (a1+a2)
b3 = ey - sy - (b1+b2)

x = 1.0 + a1*t + a2*t**2 + a3*t**3
y = 1.0 + b1*t + b2*t**2 + b3*t**3

plt.xlim(0,5.0)
plt.ylim(0,5.0)
plt.plot(x,y)
plt.savefig('5_11.png')
\end{minted}

\includegraphics[width=20em]{5_11.png}

Max ve Sigmoid Bazlý Yaklaþým

Daha önce [6]'da görülen spline tekniðinin parametrik hali de
olabilir. Mesela 

\begin{minted}[fontsize=\footnotesize]{python}
a1,b1,c1,d1 = (1, -1.4, 2, 2.5)
a2,b2,c2,d2 = (1, 1.4, 1, 2.5)
def f(t):
    x = ax + \
        bx*np.max([0,t-2]) + \
        cx*np.max([0,t-3]) + \
        dx*np.max([0,t-4])
	   
    y = ay + \
        by*np.max([0,t-2]) + \
        cy*np.max([0,t-3]) + \
        dy*np.max([0,t-4])
    return x,y	   
    
tmp = np.linspace(0,5,100)
res = np.array([f(tt) for tt in tmp])
plt.plot(res[:,0],res[:,1])
plt.savefig('5_12.png')
\end{minted}

\includegraphics[width=20em]{5_12.png}

Baþlangýcý $a_x,a_y$ olan kesik bir eðriyi görüyoruz. Bu tür eðrileri aynen
[6]'da olduðu gibi sigmoid bazlý yapabiliriz,

\begin{minted}[fontsize=\footnotesize]{python}
rho = 7.0
def sig(x,a):
   return (x-a)*1/(1+np.exp(-rho*(x-a)))

def maxk(x,a):
   return np.max([0,x-a])

ax,bx,cx,dx,ex = (1, 2.4, 1, -3.5, -2.1)
ay,by,cy,dy,ey = (1, 0.4, -0.1, 0.5, -3)
def f(t):
    x = ax + \
        bx*maxk(t,2) + \
        cx*maxk(t,3) + \
        dx*maxk(t,3.5) + \
        ex*maxk(t,4.0)
	   
    y = ay + \
        by*maxk(t,2) + \
        cy*maxk(t,3) + \
        dy*maxk(t,3.5) + \
        ey*maxk(t,4.0)
    return x,y	   
    
def g(t):
    x = ax + \
        bx*sig(t,2) + \
        cx*sig(t,3) + \
        dx*sig(t,3.5) + \
        ex*sig(t,4.0)
	   
    y = ay + \
        by*sig(t,2) + \
        cy*sig(t,3) + \
        dy*sig(t,3.5) + \
        ey*sig(t,4.0)
    return x,y	   
    
tmp = np.linspace(0,5,100)
\end{minted}

\begin{minted}[fontsize=\footnotesize]{python}
res = np.array([f(tt) for tt in tmp])
plt.plot(res[:,0],res[:,1])
plt.savefig('5_13.png')
\end{minted}

\begin{minted}[fontsize=\footnotesize]{python}
res = np.array([g(tt) for tt in tmp])
plt.plot(res[:,0],res[:,1])
plt.savefig('5_14.png')
\end{minted}

\includegraphics[width=20em]{5_13.png}
\includegraphics[width=20em]{5_14.png}

Herhangi bir þekli katsayýlarla yaratmak mümkün. 

Bitiþ noktalasýný nasýl ayarlarýz? Burada yine polinom örnekteki gibi
cebirsel bir yöntem seçebilirdik, fakat çoðunlukla baþlangýç bitiþ
arasýndaki eðrileri bir optimizasyon baðlamýnda kullanýlýr. Bu durumda
bitiþ noktalarý ile katsayýlar arasýnda bir optimizasyon kýsýtlamasý
yaratmak ve bitiþ noktalarýný böyle ayarlamak daha iyidir. 

Çünkü biliyoruz parametrize ortamda mesela önceki örnekte $0 \ge t \ge
5$. O zaman egrinin bitisinde $t=5$ olacaðýný biliyoruz. Bu durumda mesela 

$$
    x = a_x + \
        b_x \sigma(t,2) + \
        c_x \sigma(t,3) + \
        d_x \sigma(t,3.5) +
        e_x \sigma(t,4.0)
$$

ifadesine $t$ tüm ilmik noktalarýnýn ötesinde olduðu için artýk tüm
$\sigma$ ifadeleri 1 veriyor. Eðer 1 veriyorsa, yani tüm sigmoid'ler aktif
ise, eðri bitiþinde bilinen $t$ üzerinden elimizdeki $x$ 
$x = a_x + b_x(5-2) + c_x(5-3) + d_x(5-3.5) + e_x(5-4.0)$
olmalý. Optimizasyonda bu eþitliðin belli bir deðer (istediðimiz bitiþ
noktasý kordinatý) olmasýný þart tutarak amacýmýz eriþebiliriz.

Kaynaklar

[1] Sunday, {\em Intersection of Lines and Planes}, \url{http://geomalgorithms.com/a05-_intersect-1.html}

[2] Feldman, {\em Taylor Polynomials in Dimension Two},
\url{http://www.math.ubc.ca/~feldman/m200/taylor2dSlides.pdf}

[3] Hass, {\em Thomas' Calculus}

[4] Khaled, {\em Straight Line and Plane Intersection Matlab Code}, \url{https://uk.mathworks.com/matlabcentral/fileexchange/17751-straight-line-and-plane-intersection}

[5] {\em Distance between Point and Line}, \url{https://brilliant.org/wiki/distance-between-point-and-line/}

[6] Bayramli, {\em Hesapsal Bilim, Spline Eðrileri ve Baz Fonksiyonlar}

\end{document}

