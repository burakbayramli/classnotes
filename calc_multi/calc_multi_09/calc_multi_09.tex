\documentclass[12pt,fleqn]{article}\usepackage{../../common}
\begin{document}
Ders 9

Bu dersin konusu birden fazla deðiþken içeren fonksiyonlarýn minimizasyonu ile
uðraþýrken yardýmcý olacak kýsmi türev (partial derivative) kavramý. Çok
deðiþkenli bir fonksiyon $f(x,y)$'nin birden fazla türevi vardýr. Mesela
bunlardan bir tanesi

$$ \frac{\partial f}{\partial x} = f_x $$

Bu türev $x$'in deðiþtirildiði ama $y$'nin sabit tutulduðu bir durumu
gösterir. 

$$ \frac{\partial f}{\partial y} = f_y $$

iþe $y$'in deðiþtirildiði ama $x$'nin sabit tutulduðu bir durumu gösterir.

Þimdi her ikisinin birden deðiþtirildiði durumda ne olacaðýný gösteren
yaklaþýksal (approximate) formülü görelim. Deðiþim matematiksel olarak þöyle

$$ x \sim x + \Delta x $$

$$ y \sim x + \Delta x $$

O zaman $z$ için

$$ z = f(x,y) $$

yaklaþýksal deðiþim þöyle olur

$$
\Delta z \approx f_x\Delta x + f_y \Delta f_y
\mlabel{1}
$$

Tekrar vurgulamak gerekirse bu yaklaþýksal bir formül, daha ``doðru'' bir temsil
için 2., 3. türevleri içeren daha yüksek dereceden (higher order terms)
terimlerin de olmasý gerekir, fakat bu terimler 1. derece lineer bir
yaklaþýksallýk için kullanýlmaz.

Bu formülü nasýl doðrularýz? Bunu yapmanýn yollarýndan biri teðet düzlem
yaklaþýksallamasý (tangent plane approximation). Mesela $z = f(x,y)$
fonksiyonuna olan teðet bir düzlemi düþünelim.

\begin{center}
\includegraphics[height=4cm]{9_1.png}
\end{center}

Hatýrlarsak $\frac{\partial f}{\partial x}$ kýsmi türevi $x$'in deðiþtiði ama
$y$'nin sabit tutulduðu bir durumu tarif ediyordu. Yukarýdaki grafiðe göre bu
bir anlamda iki çukurlu kap gibi duran $z$ fonksiyonun bir kesitine bakmak gibi
(unutmayalým, fonksiyon sadece kabýn dýþýnda tanýmlý, içi boþ). Bu kesit üzerine
$f$'in bir yansýmasý oluþuyor, o yansýma üstteki grafikte bir parabol
þeklinde. Bu parabolda $x$ deðiþtikçe o noktanýn parabol üzerindeki çizgizel
teðeti de deðiþiyor (grafikteki yeþil çizgi) ki bu çizgisel eðim
$\frac{\partial f}{\partial x}$'e eþit.

Eðer ayný þeyi $x$'in sabit $y$'nin deðiþtiði durum için yapsaydým,
benzer bir kesit elde edecektim (resimde kýrmýzý okun gösterdiði düzlem). 

\begin{center}
\includegraphics[height=4cm]{9_2.png}
\end{center}

Ve, bu iki kesit üzerinden elde edilen ikinci teðet çizgi birinci ile beraber
kullanýlýnca bir düzlemi tanýmlamak için kullanýlabilir (iki çizgi paralel bir
düzlem tanýmlamak için yeterlidir), ki teðet düzlem yaklaþýksallamasý için
kullanýlacak düzlem budur. Üstteki resimde bu yeni düzlem çapraz yatýk olarak
gözüken düzlem.

Formülsel olarak bunu nasýl yapacaðýmýzý gösterelim.

$f_x$ ve $f_y$ iki teðet çizgiyi tanýmlamak için kullanýlýyorsa, bu
formülleri bir araya koyarak düzlemi temsil edebilirim. Eðer

$$ \frac{\partial f}{\partial x}(x_0,y_0) = a $$

iþe bu demektir ki birinci teðet çizgi (yeþil çizgi) $L_1$ þöyledir:

$$ 
L_1 = 
\left\{ \begin{array}{l}
z = z_0 + a(x - x_0) \\
y = y_0
\end{array} \right.
$$

Bu çizgi için $y$'yi sabit tutuyorum, $z$'deki deðiþimi $z_0$ üstüne eðim
$a$'nin katlarý kadar ($x$'in deðiþimi oranýnda çarparak) ekleyerek
hesaplýyorum. 

Benzer þekilde

$$ \frac{\partial f}{\partial y}(x_0,y_0) = b $$

$$ 
L_2 = 
\left\{ \begin{array}{l}
z = z_0 + b(y - y_0) \\
y = y_0
\end{array} \right.
$$

Hem $L_1$ hem de $L_2$ $z = f(x,y)$'ye teðettir. Bu iki çizgi beraber bir düzlem
oluþturur. Bu formül

$$
z = z_0 + a(x-x_0) + b(y-y_0) 
\mlabel{2}
$$

formülüdür. 

Formül (1), ustteki formülün yaklaþýksal halidir. Eðer teðet düzlem üzerinde
olsaydýk, $\approx$ iþareti $=$ iþaretine dönüþecekti. Bu yaklaþýksallýk ufak
$\Delta x$ ve ufak $\Delta y$ için geçerli. Yani yaklaþýksal formül, $f$'nin
grafiði teðet düzleme yakýn diyor.

Maksimum Minimum Problemleri 

Kýsmi türevlerin kullaným alanlarýndan biri optimizasyon problemleridir. Mesela
çok deðiþkenli bir fonksiyonun maksimumunu bulmak gibi. Eðer fonksiyon tek
deðiþkenli olsaydý, hemen türevini alýp sonucu sýfýra eþitleyebilirdik, ve buna
göre bir çözüm arardýk. Çok deðiþkenli fonksiyonlarda kýsmý türevler kullanmak
lazým.

Bu derste iki deðiþkenli duruma bakacaðýz fakat ayný prensipler, 10, 15,
milyon tane deðiþken için ayný. 

Lokal bir minimum için hem $f_x=0$ hem $f_y=0$ olmalýdýr. Bu niye doðudur? Yine
formül (1)'e bakarsak, hem $f_x=0$ hem $f_y=0$ olduðu zaman $\Delta z$ sýfýr
olacaktýr, yani birinci derecede düþünürsek $f(x,y)$'de deðiþim yok demektir.

Teðet düzlemlerin dilinden konuþursak, minimum anýnda teðet düzlem tamamen
yatay olacaktýr. 

\begin{center}
\includegraphics[height=3cm]{9_3.png}
\end{center}

Formül (2) baðlamýnda düþünürsek, bu durum $a=0$ ve $b=0$ olduðu ana tekabül
ediyor ve o anda düzlemi tanýmlayan $z = z_0$ formülüdür.

Taným

Eðer $f_x(x_0,y_0)= 0$ ve $f_y(x_0,y_0)= 0$ ise o zaman $x_0,y_o$ $f$'in kritik
noktasýdýr. Not: Birden fazla deðiþken için tabii ki tüm kýsmý türevlerin o
noktada sýfýr olmasý gerekir.

Örnek

$$ f(x,y) = x^2 - 2xy + 3y^2 + 2x - 2y $$

Bakalým bunu minimize ya da maksimize edebilecek miyiz? 

$$ f_x = 2x - 2y + 2 = 0$$

$$ f_y = -2x + 6y - 2 = 0 $$

Üstteki iki denklemi ayný anda çözmeliyiz. 

Bu tür durumlarda iki denklemi birbiriyle toplayýp basitleþtirmeye çalýþmak iyi
bir yöntemdir. Fakat unutmayalým, elimizde her zaman iki tane denklem olmalý,
iki denklemi ortadan kaldýrýp birdenbire tek denklem ile yola devam edemeyiz.

Toplamý yaparsak

$$ 4y = 0 $$

elde ederiz. Bunu alýp birinci denkleme sokalým, sonuç

$$ 2x + 2 = 0 $$

$$ x = -1 $$

Demek ki kritik nokta $(x,y) = (-1,0)$. 

Peki bu kritik noktanýn minimum mu maksimum mu olduðunu nereden bileceðiz?  Eðer
tek deðiþkenli bir fonksiyona bakýyor olsaydýk, ikinci türeve
bakabilirdik. Benzer bir þeyi burada da yapabilirdik, ama sadece birinci
türevden bile elimizde iki tane var, ikinci türevlerden çok daha fazlasý
olacak. O duruma bakacaðýz, þimdilik daha az otomatik olarak iþi nasýl
anlayacaðýmýzla ilgilenelim.

Elimizde birden fazla minimum olabilir. Türev(lerin) sýfýr olduðu noktada bir
düzlük vardýr, bu bir lokal minimumdur. Yani o noktaya yakýn olduðumuz sürece
(ki lokallýðýn tanýmý bu) bu minimum geçerlidir. Baþka bir noktada, türev(lerin)
yine sýfýr olduðu ama daha aþaðý noktada bir minimum daha
olabilirdi. Maksimumlar için ayný durum geçerli.

\begin{center}
\includegraphics[height=5cm]{9_4.png}
\end{center}

Yanlýz bir diðer seçenek daha var. Bu seçenek kritik noktanýn ne maksimum, ne
minimum olduðu durumdur. Bu durumda kritik noktadan hangi ``yöne doðru''
bakýyorsak, deðiþik bir cevap elde ederiz. Bu at eðeri gibi gözüken grafiðin
orta noktasýna, 0,0,0 noktasýna bakalým, burada teðet düzlem tam yatay. Bu
noktaya eðer noktasý (saddle point) deniyor. Eðer $z=y^2$ yönüne doðru bakarsak
min durumdayýz, eðer $z=-x^2$ yönüne doðru bakarsak maks durumdayýz.

2. türevlerden bahsetmiþik, ve bu derste kritik noktanýn ne olduðunu daha
az otomatik bulacaðýmýzý söyledik (2. türevler bir dahaki derste). 

Bu yöntemde kareler kullanacaðýz. Niye kareler? Çünkü karesel ifadeler en
az sýfýr olabilirler -- bir deðer ne olursa olsun, eksi bile olsa karesi
alýnýrsa artý olur, ve bu tür ifadeler sadece sýfýrda ``en az'' olurlar.

O zaman $f(x,y)$'i karelerin toplamý olarak tekrar temsil etmeye
uðraþalým. $f(x,y)$'de zaten kareler var ama tüm formülü bir þeylerin
karesi olarak gösterebilirsek, hedefimize eriþebiliriz. Tek problem $xy$
terimi, ama $x^2 - 2xy..$ diye giden bir baþka formül biliyoruz, Kareyi
Tamamlama ile onu kullanalým.

$$ f(x,y) = (x-y)^2 + 2y^2 + 2x - 2y $$

Basitleþti ama biraz daha basitleþebilir. Acaba $(x-y)^2$ içindeki $(x-y)$
ile dýþarýdaki $2x - 2y$ arasýndaki bir baðlantý kurabilir miyiz? Ýçeriye
bir +1 eklersek bu olabilir, o zaman dýþarýdaki $2x - 2y$ iptal
olur. Ýçerideki 1'i dengelemek için ise dýþarý bir -1 ekleriz.

$$  = ((x-y) + 1)^2 + 2y^2 - 1$$

Ýþte, tüm formül artýk karelerden oluþuyor. Bu formül eðer 

$$  = \underbrace{((x-y) + 1)^2}_{\ge 0} + \underbrace{2y^2}_{\ge 0} - 1$$

iþe ancak $\ge -1$ olabilir. Ve kritik nokta (-1,0)'da $f$'in deðeri hakikaten
-1'dir. Üstteki iki terimin niye $\ge 0$ olduðundan bahsettik. Demek ki bu nokta
bir minimum.  Yani biraz cebirsel takla, ve ufak bir numarayla istediðimiz
sonuca eriþmiþ olduk.

Þimdi min/maks probleminin ilginç bir uygulamasýný görelim. Bu uygulamayý
min/maks kategorisinde görmeyebilirsiniz, ama aslýnda problem min/maks ile
çok güzel bir þekilde çözülüyor.

Deneysel bilimlerde en az kareler interpolasyon (least squares interpolation)
adlý bir teknik kullanýlýr. Mesela bir deney yaparýz, ve deneyden gelen verileri
alýrýz. Mesela kurbaðalarý inceliyoruz, ve kurbaða bacak uzunluðunu kurbaða göz
büyüklüðü arasýnda bir baðlantý arýyoruz. Ya da baþka bir þeyi ölçüyoruz, genel
olarak bir $x$ deðiþkeni için onun etki ettiði, alakalý olduðu bir $y$
deðiþkenini ölçüyoruz.

Ölçülen iki deðiþkeni grafikleyince, þu ortaya çýkýyor diyelim.

\begin{center}
\includegraphics[height=4cm]{9_5.png}
\end{center}

Arada bir korelasyon olduðunu görüyoruz. Bu konu hakkýnda bilimsel bir makale
yazýyor olsaydýk, bu grafikte þöyle bir çizgi çizerdik,

\begin{center}
\includegraphics[height=4cm]{9_6.png}
\end{center}

Fakat veri noktalarýnýn tam ortasýndan geçen bu çizgiyi nasýl çizeceðiz?  Yani
çözmek istediðimiz problem verilen $(x_1,y_1), (x_2,y_2),...(x_n,y_n)$
þeklindeki deney verileri için ``en iyi uyan (best fit)'' çizgi $y=ax + b$, en
iyi yaklaþýksallýk nedir?

Bu problemde önemli bir püf noktasýna iþaret edelim: $y=ax + b$ denkleminde
bilinmeyenler nedir? Genellikle öðrenciler $x$ ve $y$ deðiþkenine
bakýyorlar. Fakat bu doðru deðil. Bir optimal çizgi ortaya çýkarmak istiyorsak
ilgilendiðimiz $x$ ve $y$ deðil, esas ilgilendiklerimiz $a$ ve $b$
katsayýlarý. Çizginin hangi þekilde olduðunu onlar kontrol ediyorlar, yani doðru
uyum için çizginin nereden geçtiðinin hesaplanmasý problemindeki bilinmeyenler
onlar. Yani uyum için en iyi $a$ ve $b$'yi bulmamýz gerekiyor.

Bu noktada ``en iyi $a$ ve $b$'' ifadesinin ne olduðuna karar vermemiz
lazým. En iyi, $a$ ve $b$'nin bir fonksiyonunun minimize edilmesi olabilir,
ki bu fonksiyon deneysel veri ile bir teorik çizgi arasýndaki uyum
hatalarýnýn toplamýný temsil edebilir. Yani hata, o çizginin deney
noktalarýndan ne kadar uzakta olduðunun toplamý ile temsil edilebilir.

``Uzaklýðý'' hesaplamanýn da deðiþik yollarý olabilir. Mesela her noktanýn
bir çizgiye olan düz uzaklýðý ölçülebilir. Ya da deneysel noktadan dikey
olarak yukarý / aþaðý çýkýp çizgiye gelinceye kadar olan uzaklýk. Ya da
uzaklýðý en fazla olan tek noktanýn mesafesi azaltýlmaya uðraþýlabilir (ama
bu son yöntem pek iyi bir seçim olmayabilir, çünkü belki deney sýrasýnda
uykuya dalmýþsýnýzdýr, ve çok yanlýþ bir nokta ölçmüþsünüzdür, ve o nokta
tüm uyum hesabýný bozukluða uðratýr).

Bu tür seçeneklerden bir tanesi en iyisidir, ve evrensel olarak kullanýlan
yaklaþým da o'dur. En Az Kareler demiþtik, bu yöntemde hata noktalarýn
çizgiye olan uzaklýklarýn karesinin toplamýdýr. Bu yöntem iyi sonuçlar
veriyor ve hesap için oldukça temiz bir formül ortaya çýkartýyor. Demek ki
``en iyi'' tanýmý hata noktalarýn çizgiden olan sapmasýnýn karesinin
toplamýnýn minimize edilmesi demek. Sapma nedir? Tahmin edilen ile gerçek
veri noktasýnýn farkýdýr. 

$$ y_i - (ax_i + b) $$

O zaman problem

$$ \textrm{Minimize Et } D = \sum_{i=1}^n \bigg[ y_i - (ax_i+b) \bigg]^2 $$

Tekrar vurgulayalým, bu fonksiyonda bilinmeyenler $a$ ve $b$. $x_i$ ve $y_i$
deneyden gelen veriler.

Minimize etmek için þimdiye kadar öðrendiklerimizi kullanabiliriz. Kritik
noktayý bulalým.

Yani istediðimiz 

$$ \frac{\partial D}{\partial a} =0 $$

$$ \frac{\partial D}{\partial b} =0 $$

eþitliklerini doðru olduðu an. Kritik nokta burada. Kýsmý türevleri alalým.

$$ \frac{\partial D}{\partial a}  =
\sum_{i=1}^n 2 (y_i (ax_i+b)) (-x_i) 
= 0
$$

$$ \frac{\partial D}{\partial b} = 
\sum_{i=1}^n 2 (y_i (ax_i+b)) (-1) 
=0
$$

Çözmemiz gereken denklemler bunlar. 

Eðer dikkat edersek bu denklemler $a$ ve $b$ baðlamýnda lineer. Denklemlerde
biraz kalabalýklýk var, onlarý açýp tekrar düzenleyerek bu lineerliði görmeye
uðraþalým.

Ýlk önce '2' terimini atalým, ona gerek yok. Ýki denklem ayrý ayrý þöyle
olur:

$$ \sum_{i=1}^n (x_i^2a + x_ib - x_iy_i) = 0$$

$$ \sum_{i=1}^n (x_i^2a + b - y_i) = 0$$

$a$ ve $b$ leri yanyana getirelim. Yine ayrý ayrý

$$  \bigg(\sum_{i=1}^n x_i^2\bigg)a + \bigg(\sum_{i=1}^n x_i\bigg) b = 
\sum_{i=1}^n x_iy_i$$

$$  \bigg(\sum_{i=1}^n x_i\bigg)a + nb = \sum_{i=1}^n y_i $$

Parantezler içindeki $x_i$'li ifadeler korkutucu görünüyor olabilir, fakat
bunlar deney verisinden gelen sayýlarýn toplamýndan ibaret, onlar elimizde
sayýsal olarak mevcut zaten. Deney verisini alýp, hepsini toplayýnca bu sayýyý
elde edeceðiz.

Sonuç olarak elimize geçen 2 x 2 boyutlarýnda bir lineer sistem. Yani $x_i$ ve
$y_i$ içeren ifadeleri hesapladýðýmýz anda bu sistemi elde ederiz, ve 2 x 2 bir
lineer sistemi çözmeyi zaten biliyoruz. Ve kritik noktayý böylece elde
ederiz. Bir sonraki derste göreceðimiz 2. kýsmý türevleri kullanacaðýz yöntemle
de bu noktanýn min/maks olduðunu anlarýz. Bu testi uygulasak üstteki yöntemin
hakikaten bir min ürettiðini görebilirdik.

En Az Kareler interpolasyonu çok daha genel kullanýmlarda da iþe yarar. 

Örnek

Bilgisayar dünyasýnda Moore Kanunu denen bir kural vardýr, bu kural bilgisayar
çiplerinin nasýl sürekli daha hýzlý, daha iyiye doðru gittiðini anlatýr. Ünlü
çip üreticisi Ýntel baþkaný Andy Grove tarafýndan ortaya atýlmýþtýr, bir
hipotezdir, fakat þaþýrtýcý bir þekilde doðru çýkmýþtýr. Kuralýn ölçtüðü bir
mikropçipin içine koyulabilecek transistör sayýsýdýr. Bu ölçümün bir örneði
alttadýr.

\begin{center}
\includegraphics[height=5cm]{9_7.png}
\end{center}

Bu veriye lineer olarak uyum yapamazdýk. Fakat logaritmik skalayý kullanýrsak,
yani transistör sayýsý yerine onun logaritmasýný alýp grafiklersek,

\begin{center}
\includegraphics[height=5cm]{9_8.png}
\end{center}

veriler daha çizgisel olurlar. Bu demektir ki zaman ve transistör sayýsý
arasýndaki iliþki üstel (exponential) bir iliþkidir. Zaten kuralýn söylediði de
bu, kural her 18 ayda bir çip içindeki transistör sayýsýnýn ikiye katlandýðýný
söyler. Bir sonraki büyüklüðün o büyüklüðün o anki halinin belli bir katý olmasý
(aynen nüfus artýþýnda olduðu gibi) üstel bir iliþkiye iþaret eder.

Peki en iyi üstel uyumu nasýl buluruz? Böyle bir uyumun formülsel hali
þudur. Düz çizgi formülü yerine bir üstel ifade içerir. 

$$ y = ce^{ax} $$

Fakat bu formülü direk hata hesabýnda kullanýrsak, ele geçen formüller çok
karmaþýk hale geliyor. Ama üstteki numarayý hatýrlayalým, log skalasýnda bakýnca
her þey lineer çýkýyor. O zaman uyumu þu þekilde yapabiliriz, üstteki formülün
log'unu alalým:

$$ ln(y) = ln(c) + ax $$

ki bu formül lineerdir. Bunun üzerinde En Az Kareler yöntemini
kullanabiliriz. 

Üstel iliþki yerine karesel bir iliþki de olabilirdi, mesela

$$ y = ax^2 + bx + c $$

o zaman en iyi parabolu uydurmaya uðraþýyor olabilirdik, bu uyum için $a$,
$b$ ve $c$'yi bulmamýz gerekirdi. Yani þunu minimize edecektik:

$$ D(a,b,c) = \sum_{i=1}^n (y_i - ( ax_i^2 + bx_i + c ))^2  $$

Burada kýsmi türevler 3 tane ayrý denklem üretir, ve iliþki yine lineer
çýkar, 3 x 3 boyütünde bir sistem elde ederiz. 

Yani söylediðimiz gibi, bu problemler ilk baþta minimizasyon problemi gibi
gözükmeyebiliyordu, ama öyle olduklarýný þimdi görmüþ olduk. 

\end{document}



