\documentclass[12pt,fleqn]{article}\usepackage{../../common}
\begin{document}
Div, Curl, Laplasyan (Laplacian)

Elimizde iki türlü fonksiyon olabilir, ya skalar (tek sayý) fonksiyonu, ya da
vektör fonksiyonu. Bu fonksiyonlarýn skalar alan (scalar field) ve vector alaný
(vector field) oluþturduðu söylenebilir. Alan tarifi fonksiyonlarýn çýktýsý ile
alakalýdýr, eðer fonksiyon çok boyutlu girdi alýp tek boyut (tek sayý)
döndürüyorsa skalar alan, çok boyutlu vektör döndürüyorsa vektör alaný
tanýmlýyor demektir.

Mesela bir skalar alan $f(x,y,z)$ fonksiyonu ile tanýmlanýyor olabilir, ve
$f(x,y,z) = 2y^3 + 4 xz + 3x$ olabilir.

Skalar alanýn gradyaný bir vektördür,

$$
\nabla f = \left[
  \frac{\partial f}{\partial x}, 
  \frac{\partial f}{\partial y}, 
  \frac{\partial f}{\partial z}
\right]
$$

yani bir vektör alaný oluþturmuþ oluyoruz, fonksiyon çok boyutlu sonuç
donduruyor, skalar alanýn gradyaný bir vektör alaný tanýmlamýþ oluyor. Her
farklý $x,y,z$ deðeri için bir vektör sonucu alýyoruz.

Fonksiyonel olarak analitik sekilde

$$
f = \left[\begin{array}{r} f_1(x,y,z) \\ f_2(x,y,z) \\ f_3(x,y,z) \end{array}\right]
$$

olabilir.

Mesela skalar alan

$$
U(x,y) = \frac{1}{3} (x^4 + y^4)
\mlabel{1}
$$

olsun,

\begin{minted}[fontsize=\footnotesize]{python}
from mpl_toolkits.mplot3d import Axes3D
fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
xx = np.linspace(-5.0,5.0,20)
yy = np.linspace(-5.0,5.0,20)
x,y = np.meshgrid(xx,yy);
U = 1/3*( (x**4) + (y**4))
ax.plot_surface(x,y,U)
plt.savefig('calc_multi_70_div_curl_lap_01.png')
\end{minted}

\includegraphics[width=20em]{calc_multi_70_div_curl_lap_01.png}

Gradyaný analitik olarak bulabiliriz,

$$
\nabla U = \frac{4}{3} [\begin{array}{cc} x^3 & y^3 \end{array}]^T
$$

Gradyan vektör alaný [6],

\begin{minted}[fontsize=\footnotesize]{python}
u, v = 4/3*x**3, 4/3*y**3
fig, ax = plt.subplots()
ax.quiver(x,y,u,v)
ax.xaxis.set_ticks([])
ax.yaxis.set_ticks([])
ax.axis([-6, 6, -6, 6])
ax.set_aspect('equal')
plt.savefig('calc_multi_70_div_curl_lap_03.png')
\end{minted}

\includegraphics[width=20em]{calc_multi_70_div_curl_lap_03.png}

Üstte analitik sonucu grafikledik. Gradyaný pür sayýsal olarak
hesaplayabilirdik, bu fonksiyon yaklaþýk türev hesabýný üç boyut için yapýyor,
\verb!gradient! çaðrýsýný kullanýyoruz, 

\begin{minted}[fontsize=\footnotesize]{python}
uu,vv = np.gradient(U)
fig, ax = plt.subplots()
ax.quiver(x,y,vv,uu)
ax.xaxis.set_ticks([])
ax.yaxis.set_ticks([])
ax.axis([-6, 6, -6, 6])
ax.set_aspect('equal')
plt.savefig('calc_multi_70_div_curl_lap_04.png')
\end{minted}

\includegraphics[width=20em]{calc_multi_70_div_curl_lap_04.png}

Benzer bir sonuç elde ettik.

Uzaklaþým (Divergence)

Bu hesap $\bdiv f$, ya da $\nabla \cdot f$ ile gösterilir. Vektör alaný
uzaklaþýmý,

$$
\bdiv f = \left(
\frac{\partial f_1}{\partial x} + 
\frac{\partial f_2}{\partial y} + 
\frac{\partial f_3}{\partial z} 
\right)
$$

Gradyan $\nabla$ iþareti görülüyor [4, sf. 403], fakat bu notasyonel bir
rahatlýk sadece.

$$
\nabla \cdot f = \left(
\frac{\partial }{\partial x},
\frac{\partial }{\partial y},
\frac{\partial }{\partial z} 
\right) 
\cdot
\left[ f_1, f_2, f_3 \right]
$$

$$
= \left( \frac{\partial }{\partial x} \right)(f_1) + 
\left( \frac{\partial }{\partial y} \right)(f_2) + 
\left( \frac{\partial }{\partial z} \right)(f_3) 
$$

$$
= \frac{\partial f_1}{\partial x} +
\frac{\partial f_2}{\partial y} +
\frac{\partial f_3}{\partial z}
$$

Uzaklaþýmýn fiziksel yorumu bir vektör alanýndaki ufak bir alanda görülen akýþ
(flux) olabilir. Onu bir vektör alanýnýn geniþleme ya da küçülme oraný olarak ta
görebiliriz. Eðer yeteri kadar ufak bir alandan çýkan vektörler girenlerden
fazla / büyük ise o nokta bir kaynaktýr, uzaklaþým sýfýrdan büyüktür, tersi ise
uzaklaþým sýfýrdan küçüktür.

Örnek olarak elimizde iki boyutlu bir vektör alaný olduðunu farzedelim, $x,y$
kordinatlarý $U(x,y) = [u_1(x,y), u_2(x,y)]$ ile bir vektör döndürülüyor, mesela

$$
U(x,y) = [\cos(x + 2y), \sin(x - 2y)]
$$

Bu alanýn uzaklaþýmý analitik olarak

$$
\bdiv U = - 2\cos(x - 2y) - \sin(x + 2y)
$$

Bu bize her noktada bir tek sayý deðeri veriyor, o noktada akýþýn çýkmakta mý
(kaynak -source-) yoksa yokolmakta mý (alýcý -sink) olduðunu bu sayý ile
irdeleyebiliyoruz. Biz uzaklaþýmý altta sayýsal olarak hesapliyoruz, ve hem
vektör alanýný hem de uzaklaþým tek sayýsýný bir renk kodu ile ayný grafikte
gösterirsek,

\begin{minted}[fontsize=\footnotesize]{python}
import numpy as np
import matplotlib.pyplot as plt

NY = 20; ymin = -2.; ymax = 2.
dy = (ymax -ymin )/(NY-1.)
NX = NY
xmin = -2.; xmax = 2.
dx = (xmax -xmin)/(NX-1.)

def divergence(f):
    num_dims = len(f)
    tmp = [np.gradient(f[i], axis=i) for i in range(num_dims)]
    return np.ufunc.reduce(np.add, tmp)

y = np.array([ ymin + float(i)*dy for i in range(NY)])
x = np.array([ xmin + float(i)*dx for i in range(NX)])

x, y = np.meshgrid( x, y, indexing = 'ij', sparse = False)

Fx  = np.cos(x + 2*y)
Fy  = np.sin(x - 2*y)

F = [Fx, Fy]
g = divergence(F)

plt.pcolormesh(x, y, g, shading='nearest', cmap=plt.cm.get_cmap('coolwarm'))
plt.colorbar()
plt.quiver(x,y,Fx,Fy)
plt.savefig('calc_multi_70_div_curl_lap_05.png')
\end{minted}

\includegraphics[width=20em]{calc_multi_70_div_curl_lap_05.png}

Sonuç [7]'deki analitik hesaba yakýn. Üstteki kodda \verb!gradient! ile her
boyut üzerinde sayýsal gradyan hesabý yapýlýyor ve sonuçlar toplanýyor. Not:
vektör alanýnýn kendisi de bir gradyan iþleminin sonucu olabilir, o noktaya
nasýl gelindiðinden bahsetmiyoruz, biz elde nereden gelmiþ olursa olsun bir
vektör alaný olduðunu farz ediyoruz.

Oklara ve renklere bakarsak hakikkaten de mavi renkli bölgelere daha fazla giriþ
olduðundan þüphe yok, bu iyi, hesap doðru iþliyor demektir. Ayný þekilde kýrmýzý
bölglerde daha fazla kaçýs var.

Laplasyan (Laplacian)

Diyelim ki $f$ skalar alaný iki kez türevi alýnabilir halde. O zaman $f$'nin
gradyaný $\nabla f$ de türevi alýnabilir bir vektör alanýdýr, ve onun da
uzaklaþýmý hesaplanabilir, ve böylece bir tane daha skalar alan daha elde
edilebilir [3, sf. 56]. Bu skalar alan, $\nabla \cdot \nabla f$ sonucuna $f$'nin
Laplasyaný ismi verilir, ve kendi sembolü de vardýr $\nabla^2 f$.

Reel deðerli bir fonksiyon $f(x,y,z)$ için [1, sf. 178], $f$'nin gradyani bir
vektör alaný, ve onun uzaklaþýmýný alýyoruz,

$$
\bdiv \nabla f = \nabla \cdot \nabla = \nabla^2 f =
\left(
\frac{\partial }{\partial x},
\frac{\partial }{\partial y},
\frac{\partial }{\partial z} 
\right) \cdot
\left(
\frac{\partial f}{\partial x},
\frac{\partial f}{\partial y},
\frac{\partial f}{\partial z} 
\right)
$$

$$
= \frac{\partial }{\partial x}\left(\frac{\partial f}{\partial x}\right)+
\frac{\partial }{\partial y}\left(\frac{\partial f}{\partial y}\right)+
\frac{\partial }{\partial z}\left(\frac{\partial f}{\partial z}\right)
$$

$$
= \frac{\partial^2 f}{\partial x^2} +
\frac{\partial^2 f}{\partial y^2} +
\frac{\partial^2 f}{\partial z^2} 
$$

Kabaca bir tarif olarak gradyan vektörlerinin en yüksek deðerlere sahip olduðu
yerler deðiþimin en çok olduðu yönlere deðil mi? Bir tepe altýndan tepe yönüne
doðru, tepe noktasýnda çok yüksek deðerler vardýr, altta daha alçak deðerler,
gradyan yukarýya gösterir. Bu gradyan alanýný üzerinde uzaklaþým hesaplayýnca
alanýn her noktasý için sayýsal bir akýþ sayýsý hesaplamýþ oluruz. ``Gradyan
akýþýnýn en yüksek olduðu yerler'' bulunmuþ oluyor. Laplasyan hesabý bu sebeple
averajdan sapmanýn en fazla olduðu noktalarý mdoellemek için kullanýlýr.

Üstte bir operatör tanýmlamýþ olduk, bu operatör bazen $(\mathcal{L})(x,y,..)$
ile de gösterilebilir, mesela iki boyut için

$$
(\mathcal{L})(x,y) =
\frac{\partial^2 }{\partial x^2} + 
\frac{\partial^2 }{\partial y^2} 
$$

Sayýsal olarak Laplasyan hesabýný görelim.

Örnek

Analitik olarak biliyoruz ki (1)'in Laplasyaný

$$
\nabla^2 U(x,y) = 4 x^2 + 4 y^2
$$

foksiyonuna eþit. Bakalým sayýsal olarak yaklaþýk olarak ayný sonucu alabilecek
miyiz? Burada \verb!del2! çaðrýsý var (iyi isim, çünkü $\nabla$ iþaretine 'del'
denir, 'del2' ile onun karesi çaðrýþtýrýlýyor),

\inputminted[fontsize=\footnotesize]{python}{del2.py}

Ayrýksal Laplasyaný grafiklersek,

\begin{minted}[fontsize=\footnotesize]{python}
from del2 import del2
L = 4*del2(U);
fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.plot_surface(x,y,L)
plt.savefig('calc_multi_70_div_curl_lap_02.png')
\end{minted}

\includegraphics[width=20em]{calc_multi_70_div_curl_lap_02.png}

Evet, üstteki resim $4 x^2 + 4 y^2$ gibi duruyor [5].

Curl, $\nabla$

Curl hesabýný $\nabla$ bazýnda yapabilir miyiz? Evet, 

$$
\curl f = \nabla \times f
$$

Bu nasýl oldu [1, sf. 178]? 

$$
= \left(
\frac{\partial }{\partial x}, 
\frac{\partial }{\partial y},
\frac{\partial }{\partial z} 
\right) 
\times 
\left[\begin{array}{r} f_1(x,y,z) \\ f_2(x,y,z) \\ f_3(x,y,z) \end{array}\right]
$$

$$
= \left[\begin{array}{ccc}
i & j & k \\
\frac{\partial }{\partial x} &
\frac{\partial }{\partial y} &
\frac{\partial }{\partial z} \\
f_1 & f_2 & f_3
\end{array}\right]
$$


$$
= \left[\begin{array}{ccc} 
\frac{\partial f_3}{\partial y} - \frac{\partial f_2}{\partial z} & 
\frac{\partial f_1}{\partial z} - \frac{\partial f_3}{\partial x} & 
\frac{\partial f_2}{\partial x} - \frac{\partial f_1}{\partial y} 
\end{array}\right]
$$













Kaynaklar 

[1] Corral, {\em Vector Calculus}

[2] 3Blue1Brown, {\em Uzaklaþým (Divergence) ve Curl, Maxwell Denklemlerinin Dili},
    \url{https://www.youtube.com/watch?v=8kX2f2olQao}

[3] Matthews, {\em Vector Calculus}

[4] Kreyszig, {\em Advanced Engineering Mathematics 10th Ed}

[5] Mathworks del2, \url{https://www.mathworks.com/help/matlab/ref/del2.html#bt1j8dn-5}

[6] Kazarinoff, \url{https://pythonforundergradengineers.com/quiver-plot-with-matplotlib-and-jupyter-notebooks.html}

[7] Petersdorff, {\em Example for curl and div of a 2D vector field}, \url{http://www2.math.umd.edu/~petersd/241/html/ex27b.html#4}

\end{document}
