\documentclass[12pt,fleqn]{article}\usepackage{../../common}
\begin{document}
Vektör Calculus, Kurallar, Matris Türevleri

Aksi belirtilmedikçe altta $a,x$ gibi vektörler kolon vektörleri olacaktýr,
yani $m \times 1$, ya da $n \times 1$ gibi boyutlara sahip olacaklardýr. 

$m$ boyutlu vektör $x$'i alan ve geriye tek sayý sonucu döndüren bir $f(x)$
fonksiyonunun $x$'e göre türevini nasýl alýrýz? Yani $x \in \mathbb{R}^m$
ve bir vektör,

$$ x = 
\left[\begin{array}{ccc}
x_1 \\ \vdots \\ x_m
\end{array}\right]
 $$

Bu durumda $x$'in her hücresine / öðesine göre kýsmi türevler (partial
derivatýves) alýnýr, sonuçta tek boyutlu / tek sayýlý fonksiyon, türev 
sonrasý $m$ boyutlu bir sonuç vektörünü yaratýr, yani

$$
\frac{\partial f}{\partial x}  =
\left[\begin{array}{c}
\frac{\partial f}{\partial x_1} \\
\\
\frac{\partial f}{\partial x_2} \\
\vdots \\
\frac{\partial f}{\partial x_m} 
\end{array}\right]
$$

Bu sonuç tanýdýk gelmiþ olabilir, bu ifade gradyan olarak ta bilinir. 

$$ \frac{\partial f}{\partial x}  = \nabla f = grad \ f(x) $$

Türev bir kolon vektörü olarak çýktý çünkü $x$ de bir kolon
vektörüydü. Elde edilen vektör sürpriz deðil çünkü tek, skalar bir deðer
veren bir fonksiyonun $x$ içindeki {\em her öðesinin} nasýl deðiþtiðine
göre bunun fonksiyon üzerindeki etkilerini merak ediyorduk, üstteki vektör
öðe bazýnda bize aynen bunu gösteriyor. Yani tek skalar sonuç $m$ tane
türev sonucuna ayrýlýyor, çünkü tek sonucun $m$ tane seçeneðe göre
deðiþimini görmek istedik. 

Not olarak belirtelim, gradyan vektörü matematiksel bir kýsayoldur, yani
matematikte kuramsal olarak türetilerek ulaþýlan ana kurallardan biri
denemez. Fakat çok iþe yaradýðýna þüphe yok.

Eðer bir $A$ matrisinin tüm öðeleri tek sayý $\theta$ gibi bir deðiþkene
baðlý ise, o matrisin $\theta$'ya göre türevi, tüm elemanlarýnýn teker
teker $\theta$'ya göre türevidir,

$$ 
\frac{\partial A}{\partial \theta} = 
\left[\begin{array}{cccc}
\frac{\partial a_{11}}{\partial \theta} & 
\frac{\partial a_{12}}{\partial \theta} & \dots & 
\frac{\partial a_{1n}}{\partial \theta} 
\\
\frac{\partial a_{21}}{\partial \theta} & 
\frac{\partial a_{22}}{\partial \theta} &  \dots & 
\frac{\partial a_{2n}}{\partial \theta}  
\\
\vdots & \vdots & \ddots & \vdots 
\\
\frac{\partial a_{m1}}{\partial \theta} & 
\frac{\partial a_{m2}}{\partial \theta} &  \dots & 
\frac{\partial a_{mn}}{\partial \theta}  
\end{array}\right]
$$

Þimdi ilginç bir durum; diyelim ki hem fonksiyon $f(x)$'e verilen $x$
çok boyutlu, hem de fonksiyonun sonucu çok boyutlu! Bu gayet mümkün bir
durum. Bu durumda ne olurdu? 

Eðer $f$'in türevinin her türlü deðiþimi temsil etmesini istiyorsak, o
zaman hem her girdi hücresi, hem de her çýktý hücresi kombinasyonu için bu
deðiþimi saptamalýyýz. Jacobian matrisleri tam da bunu yapar. Eðer $m$
boyutlu girdi ve $n$ boyutlu çýktý tanýmlayan $f$'in türevini almak
istersek, bu bize $m \times n$ boyutunda bir matris verecektir!
Hatýrlarsak daha önce gradyan sadece $m$ boyutunda bir {\em vektör}
vermiþti. Þimdi sonuç bir matris. 

$$ 
J(x) = \frac{\partial f(x)}{\partial x} =
\left[\begin{array}{ccc}
\frac{\partial f_{1}(x)}{\partial x_1} & \dots & 
\frac{\partial f_{1}(x)}{\partial x_1} 
\\
\vdots & \ddots & \vdots 
\\
\frac{\partial f_{n}(x)}{\partial x_n} & \dots & 
\frac{\partial f_{n}(x)}{\partial x_n}  
\end{array}\right]
 $$

Hessian ise $f$'in ikinci türevlerini içerir [3]. Bu matrisin $i,j$'inci
öðesi fonksiyonun $\frac{\partial^2 f(x)}{\partial x_j \partial x_i}$'inci
türevidir, ki $x = [x_1,x_2,...,x_n]$ vektörü olmak üzere. 

$$
\nabla^2 (x) = 
\left[\begin{array}{rrr}
\frac{\partial^2 f}{\partial x_1^2} & \cdots & \frac{\partial^2 f}{\partial x_1x_n}\\
\vdots & \ddots & \vdots \\
\frac{\partial^2 f}{\partial x_1x_n} & \cdots & \frac{\partial^2 f}{\partial x_n^2}\\
\end{array}\right]
$$

Hessian matrisý simetrik ve reel bir matristir. 

Vektörlere gelelim. $a,x \in \mathbb{R}^n$ ise, $a^Tx$'in $x$'e göre türevi nedir? 

$a^Tx$ bir noktasal çarpým olduðuna göre sonucu bir tek sayýdýr
(scalar). Bu noktasal çarpýmý bir fonksiyon gibi düþünebiliriz, bu durumda
demektir ki tek sayýlý bir fonksiyonun çok boyutlu $x$'e göre türevini
alýyoruz, yani gradyan durumu tekrar vuku buldu,

$$ 
\frac{\partial (a^Tx)}{\partial x} = 
\left[\begin{array}{c}
\frac{\partial (a^Tx)}{\partial x_1} \\ 
\vdots \\ 
\frac{\partial (a^Tx)}{\partial x_n} 
\end{array}\right] 
 $$

$$  =
\left[\begin{array}{c}
\frac{\partial (a_1x_1 + ... + a_nx_n)}{\partial x_1} \\ 
\vdots \\ 
\frac{\partial (a_1x_1 + ... + a_nx_n)}{\partial x_n} 
\end{array}\right] 
= 
\left[\begin{array}{c}
a_1 \\
\vdots  \\
a_n
\end{array}\right] =
a
 $$

Niye her satýrda $a_1,a_2$  gibi deðerler elde ettiðimizin sebebi bariz
herhalde, çünkü mesela ilk satýrda $x_1$'e göre türev alýndýðý durumda
$a_1x_1$ haricindeki tüm terimler yokolacaktýr, çünkü o terimler içinde
$x_1$ yoktur ve Calculus'a göre sabit sayý sayýlýrlar.

Peki $a^Tx$'in $x^T$'ye göre türevi nedir? 

$x^T$'nin yatay bir vektör olduðuna dikkat, yani satýr vektörü, o zaman
sonuç yatay bir vektör olacaktýr (kýyasla gradyan dikeydi).

$$ 
\frac{\partial (a^Tx)}{\partial x^T} = 
\left[\begin{array}{ccc}
\frac{\partial (a^Tx)}{\partial x_1} &
\dots 
&
\frac{\partial (a^Tx)}{\partial x_n} 
\end{array}\right] 
\mlabel{1}
 $$

$$ =
\left[\begin{array}{ccc}
a_1 & \dots & a_n
\end{array}\right] = 
a^T $$

Eðer bir $x \in \mathbb{R}^m$ vektöründen $A$ matrisi $x$ ile çarpýlýyor
ise, bu çarpýmýn $x$'e göre türevi nedir? 

$$ \frac{\partial(Ax)}{\partial x^T} = A
$$

Ýspat: Eðer $a_i \in \mathbb{R}^n$ ise (ki devriði alýnýnca bu vektör yatay hale
gelir, yani altta bu yatay vektörleri üst üste istiflediðimizi düþünüyoruz),

$$ A = \left[\begin{array}{c}
a_1^T \\ \vdots \\ a_m^T
\end{array}\right] $$

O zaman $Ax$ ne olur? [4] yazýsýndaki ``satýr bakýþ açýsý'' düþünülürse,
$A$'in her satýrý, ayrý ayrý $x$'in tüm satýrlarýný kombine ederek tekabül
eden sonuç satýrýný oluþturur (tabii bu örnekte $x$'in kendisi bir vektör o
yüzden ``satýrlarý'' tek bir sayýdan ibaret),

$$ Ax = \left[\begin{array}{c}
a_1^Tx \\ \vdots \\ a_m^Tx
\end{array}\right] 
$$

Üstteki bir vektör, her öðesi tek sayý. Türevi alýrsak (dikkat yatay
vektöre göre türev alýyoruz), ve (1)'i dikkate alýrsak, 

$$ 
\frac{\partial Ax}{\partial x^T}  =
\left[\begin{array}{c}
\frac{\partial(a_1^Tx) }{\partial x^T} 
\\ 
\vdots \\ 
\frac{\partial(a_m^Tx) }{\partial }
\end{array}\right] = \left[\begin{array}{c}
a_1^T \\ \vdots \\ a_m^T
\end{array}\right]  = A
 $$

Þu türev nasýl hesaplanýr? 

$$ 
\frac{\partial (x^TA^T)}{\partial x}
$$

Çarpýmý açalým, $x$ devriði yatay bir vektör, $A$'nin satýrlarý $a_i$'ler
ise devrik sonrasý kolonlar haline gelirler, yani

$$ 
\left[\begin{array}{ccc}
x_1 & \dots & x_n
\end{array}\right]
\left[\begin{array}{ccc}
\uparrow & & \uparrow \\
a_1 & \dots & a_m \\
\downarrow & & \downarrow 
\end{array}\right]
 $$

Þimdi matris çarpýmý satýr bakýþýný kullanalým, çarpan $x$ satýrý bir
tane, o zaman sonuç tek satýr olacak. Bu tek $x$ satýrýnýn öðeleri, $A^T$
satýrlarýný teker teker çarpýp toplayacak ve o tek sonuç satýrýný meydana
getirecek. Yani $x_1,x_2,...$ sýrayla $a_1$'in tüm öðelerini çarpýyor,
ayný þekilde $a_2$ için aynýsý oluyor, vs. Bu durumu daha temiz bir
þekilde alttaki gibi belirtebiliriz,

$$ 
= \left(\begin{array}{ccc}
x^Ta_1 & \dots x^Ta_m 
\end{array}\right)
$$

Bu ifadenin türevini almak çok kolay, 

$$ 
= \left(\begin{array}{ccc}
\frac{\partial (x^Ta_1)}{\partial x} &
\dots
\frac{\partial (x^Ta_m)}{\partial x} 
\end{array}\right)
$$

$$ 
= \left(\begin{array}{ccc}
a_1 & \dots a_m 
\end{array}\right)
$$

$$ 
\frac{\partial (x^TA^T)}{\partial x} = A^T 
\mlabel{2} 
$$

Baþka bir türev: Diyelim ki $x \in \mathbb{R}^n, z \in \mathbb{R}^m$. 
Yeni bir vektör $c = A^Tz$ tanýmlayalým ki vektör $n$ boyutunda. O zaman 

$$ 
\frac{\partial (z^TAx)}{\partial x} =  
\frac{\partial (c^Tx)}{\partial x} = c =  A^Tz
$$

Diðer bir türev

$$ 
\frac{\partial (z^TAx)}{\partial z} =  Ax
$$

Üstteki (2)'nin bir sonucu olarak görülebilir.

Eðer $x=x(\alpha),z=z(\alpha)$ olursa, türev almada Zincir Kuralýný kullanalým,

$$ 
\frac{\partial (z^TAx)}{\partial \alpha} =  
\frac{\partial (z^TAx)}{\partial x} \frac{\partial x}{\partial \alpha}  + 
\frac{\partial (z^TAx)}{\partial z} \frac{\partial z}{\partial \alpha}  
$$

$$ 
\frac{\partial (z^TAx)}{\partial \alpha} =  
A^Tz \frac{\partial x}{\partial \alpha}  + 
Ax \frac{\partial z}{\partial \alpha}  
$$

Eðer $z = x = \alpha$ dersek,

$$ 
\frac{\partial (x^TAx)}{\partial \alpha} =  
\frac{\partial (x^TAx)}{\partial x} =  
A^Tx \frac{\partial x}{\partial \alpha}  + 
Ax \frac{\partial x}{\partial \alpha}  
$$

$$ 
= Ax + A^Tx  = (A^T+A) x
$$

Diyelim ki $A$ simetrik bir matris, o zaman $A^T=A$, ve

$$ 
= (A^T+A)x = 2Ax
$$

$x^Tx$ ifadesinin $x$ vektörüne göre türevi nedir? En basit yol, $x^TAx$
kalýbýný kullanmak, ve $A = I$ yani birim matrisi koymak. Bu durumda 

$$ 
= \frac{\partial (x^TIx)}{\partial \alpha}  = 2Ix = 2x
 $$

Daha zor yoldan, bu bir noktasal çarpým olacaktýr, $x_1x_1 + x_2x_2 + .. +
 x_nx_n$  yani $x_1^2 + x_2^2 + .. + x_n^2$. Bu tek bir skalar sonuç, o sonucun her
$x$ öðesine göre türevinin alýnmasý,

$$ 
\left[\begin{array}{c}
\frac{\partial (x_1^2 + x_2^2 + .. + x_n^2)}{\partial x_1} \\
\dots \\
\frac{\partial (x_1^2 + x_2^2 + .. + x_n^2)}{\partial x_n} 
\end{array}\right]
 $$

$$ 
= \left[\begin{array}{c}
2x_1 \\
\dots \\
2x_n
\end{array}\right] = 
2x
 $$

Ýzler (Trace)

$$ \frac{\partial }{\partial A} Tr(A) = I $$

$$ \frac{\partial }{\partial A} Tr(AB) = B^T $$

$$ \frac{\partial }{\partial A} Tr(A^TB) = B $$


$$ \frac{\partial }{\partial A} Tr(ABA^T) = A(B + B^T) $$

Eðer $B$ simetrik ise üstteki þu hale getirilebilir

$$  = 2AB $$

Yönsel Türev (Directional Derivative)

Bir vektör fonksiyonu $f = \vec{f}(x,y,z)$ düþünelim, 

$$
f = \left[\begin{array}{r} f_1(x,y,z) \\ f_2(x,y,z) \\ f_3(x,y,z) \end{array}\right]
$$

Formel olarak $f \cdot \nabla$ bir operatör tanýmlar [2, sf. 74],

$$
f \cdot \nabla = 
\left[\begin{array}{ccc} f_1 & f_2 & f_3 \end{array}\right]
\cdot 
\left[\begin{array}{ccc} 
\frac{\partial }{\partial x} & \frac{\partial }{\partial y} & \frac{\partial }{\partial z} 
\end{array}\right]
$$

$$
= f_1 \frac{\partial }{\partial x} +
f_2 \frac{\partial }{\partial y} +
f_3 \frac{\partial }{\partial z} 
$$

Üstteki bir operatör. Onu mesela bir $g$ üzerinde uygulayabiliriz,

$$
(f_1 \frac{\partial }{\partial x} +
f_2 \frac{\partial }{\partial y} +
f_3 \frac{\partial }{\partial z}) 
g = 
f_1 \frac{\partial g}{\partial x} +
f_2 \frac{\partial g}{\partial y} +
f_3 \frac{\partial g}{\partial z} 
$$



Bazý Eþitlikler

$a,b$ vektör fonksiyonu olmak üzere, 

$$
\nabla (a \cdot b) = 
(a \cdot \nabla) b + (b \cdot \nabla) a + 
a \times (\nabla \times b) + 
b \times (\nabla \times a)
$$









Kaynaklar 

[2] Spiegel, {\em Vector Tensor Analysis}

[3] Kutter, {\em Multivariable Advanced Calculus}

[4] Bayramli, Lineer Cebir, {\em Matris Çarpýmý, Ders 1}

\end{document}
