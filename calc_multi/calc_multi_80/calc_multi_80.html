<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  
    <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script type="text/x-mathjax-config">
    MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
      MathJax.Hub.Insert(MathJax.InputJax.TeX.Definitions.macros,{
        cancel: ["Extension","cancel"], cancelto: ["Extension","cancel"]
      });
    });
    </script>

  <title>Vektör Calculus, Kurallar, Matris Türevleri</title>
  <style type="text/css">code{white-space: pre;}</style>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
  
  
  
  
</head>
<body>
<h1 id="vektör-calculus-kurallar-matris-türevleri">Vektör Calculus, Kurallar, Matris Türevleri</h1>
<p>Aksi belirtilmedikçe altta <span class="math inline">\(a,x\)</span> gibi vektörler kolon vektörleri olacaktır, yani <span class="math inline">\(m \times 1\)</span>, ya da <span class="math inline">\(n \times 1\)</span> gibi boyutlara sahip olacaklardır.</p>
<p><span class="math inline">\(m\)</span> boyutlu vektör <span class="math inline">\(x\)</span>'i alan ve geriye tek sayı sonucu döndüren bir <span class="math inline">\(f(x)\)</span> fonksiyonunun <span class="math inline">\(x\)</span>'e göre türevini nasıl alırız? Yani <span class="math inline">\(x \in \mathbb{R}^m\)</span> ve bir vektör,</p>
<p><span class="math display">\[ x = 
\left[\begin{array}{ccc}
x_1 \\ \vdots \\ x_m
\end{array}\right]
 \]</span></p>
<p>Bu durumda <span class="math inline">\(x\)</span>'in her hücresine / öğesine göre kısmi türevler (partial derivatıves) alınır, sonuçta tek boyutlu / tek sayılı fonksiyon, türev sonrası <span class="math inline">\(m\)</span> boyutlu bir sonuç vektörünü yaratır, yani</p>
<p><span class="math display">\[
\frac{\partial f}{\partial x}  =
\left[\begin{array}{c}
\frac{\partial f}{\partial x_1} \\
\\
\frac{\partial f}{\partial x_2} \\
\vdots \\
\frac{\partial f}{\partial x_m} 
\end{array}\right]
\]</span></p>
<p>Bu sonuç tanıdık gelmiş olabilir, bu ifade gradyan olarak ta bilinir.</p>
<p><span class="math display">\[ \frac{\partial f}{\partial x}  = \nabla f = grad \ f(x) \]</span></p>
<p>Türev bir kolon vektörü olarak çıktı çünkü <span class="math inline">\(x\)</span> de bir kolon vektörüydü. Elde edilen vektör sürpriz değil çünkü tek, skalar bir değer veren bir fonksiyonun <span class="math inline">\(x\)</span> içindeki <em>her öğesinin</em> nasıl değiştiğine göre bunun fonksiyon üzerindeki etkilerini merak ediyorduk, üstteki vektör öğe bazında bize aynen bunu gösteriyor. Yani tek skalar sonuç <span class="math inline">\(m\)</span> tane türev sonucuna ayrılıyor, çünkü tek sonucun <span class="math inline">\(m\)</span> tane seçeneğe göre değişimini görmek istedik.</p>
<p>Not olarak belirtelim, gradyan vektörü matematiksel bir kısayoldur, yani matematikte kuramsal olarak türetilerek ulaşılan ana kurallardan biri denemez. Fakat çok işe yaradığına şüphe yok.</p>
<p>Eğer bir <span class="math inline">\(A\)</span> matrisinin tüm öğeleri tek sayı <span class="math inline">\(\theta\)</span> gibi bir değişkene bağlı ise, o matrisin <span class="math inline">\(\theta\)</span>'ya göre türevi, tüm elemanlarının teker teker <span class="math inline">\(\theta\)</span>'ya göre türevidir,</p>
<p><span class="math display">\[ 
\frac{\partial A}{\partial \theta} = 
\left[\begin{array}{cccc}
\frac{\partial a_{11}}{\partial \theta} &amp; 
\frac{\partial a_{12}}{\partial \theta} &amp; \dots &amp; 
\frac{\partial a_{1n}}{\partial \theta} 
\\
\frac{\partial a_{21}}{\partial \theta} &amp; 
\frac{\partial a_{22}}{\partial \theta} &amp;  \dots &amp; 
\frac{\partial a_{2n}}{\partial \theta}  
\\
\vdots &amp; \vdots &amp; \ddots &amp; \vdots 
\\
\frac{\partial a_{m1}}{\partial \theta} &amp; 
\frac{\partial a_{m2}}{\partial \theta} &amp;  \dots &amp; 
\frac{\partial a_{mn}}{\partial \theta}  
\end{array}\right]
\]</span></p>
<p>Şimdi ilginç bir durum; diyelim ki hem fonksiyon <span class="math inline">\(f(x)\)</span>'e verilen <span class="math inline">\(x\)</span> çok boyutlu, hem de fonksiyonun sonucu çok boyutlu! Bu gayet mümkün bir durum. Bu durumda ne olurdu?</p>
<p>Eğer <span class="math inline">\(f\)</span>'in türevinin her türlü değişimi temsil etmesini istiyorsak, o zaman hem her girdi hücresi, hem de her çıktı hücresi kombinasyonu için bu değişimi saptamalıyız. Jacobian matrisleri tam da bunu yapar. Eğer <span class="math inline">\(m\)</span> boyutlu girdi ve <span class="math inline">\(n\)</span> boyutlu çıktı tanımlayan <span class="math inline">\(f\)</span>'in türevini almak istersek, bu bize <span class="math inline">\(m \times n\)</span> boyutunda bir matris verecektir! Hatırlarsak daha önce gradyan sadece <span class="math inline">\(m\)</span> boyutunda bir <em>vektör</em> vermişti. Şimdi sonuç bir matris.</p>
<p><span class="math display">\[ 
J(x) = \frac{\partial f(x)}{\partial x} =
\left[\begin{array}{ccc}
\frac{\partial f_{1}(x)}{\partial x_1} &amp; \dots &amp; 
\frac{\partial f_{1}(x)}{\partial x_1} 
\\
\vdots &amp; \ddots &amp; \vdots 
\\
\frac{\partial f_{n}(x)}{\partial x_n} &amp; \dots &amp; 
\frac{\partial f_{n}(x)}{\partial x_n}  
\end{array}\right]
 \]</span></p>
<p>Hessian ise <span class="math inline">\(f\)</span>'in ikinci türevlerini içerir [3]. Bu matrisin <span class="math inline">\(i,j\)</span>'inci öğesi fonksiyonun <span class="math inline">\(\frac{\partial^2 f(x)}{\partial x_j \partial x_i}\)</span>'inci türevidir, ki <span class="math inline">\(x = [x_1,x_2,...,x_n]\)</span> vektörü olmak üzere.</p>
<p><span class="math display">\[
\nabla^2 (x) = 
\left[\begin{array}{rrr}
\frac{\partial^2 f}{\partial x_1^2} &amp; \cdots &amp; \frac{\partial^2 f}{\partial x_1x_n}\\
\vdots &amp; \ddots &amp; \vdots \\
\frac{\partial^2 f}{\partial x_1x_n} &amp; \cdots &amp; \frac{\partial^2 f}{\partial x_n^2}\\
\end{array}\right]
\]</span></p>
<p>Hessian matrisı simetrik ve reel bir matristir.</p>
<p>Vektörlere gelelim. <span class="math inline">\(a,x \in \mathbb{R}^n\)</span> ise, <span class="math inline">\(a^Tx\)</span>'in <span class="math inline">\(x\)</span>'e göre türevi nedir?</p>
<p><span class="math inline">\(a^Tx\)</span> bir noktasal çarpım olduğuna göre sonucu bir tek sayıdır (scalar). Bu noktasal çarpımı bir fonksiyon gibi düşünebiliriz, bu durumda demektir ki tek sayılı bir fonksiyonun çok boyutlu <span class="math inline">\(x\)</span>'e göre türevini alıyoruz, yani gradyan durumu tekrar vuku buldu,</p>
<p><span class="math display">\[ 
\frac{\partial (a^Tx)}{\partial x} = 
\left[\begin{array}{c}
\frac{\partial (a^Tx)}{\partial x_1} \\ 
\vdots \\ 
\frac{\partial (a^Tx)}{\partial x_n} 
\end{array}\right] 
 \]</span></p>
<p><span class="math display">\[  =
\left[\begin{array}{c}
\frac{\partial (a_1x_1 + ... + a_nx_n)}{\partial x_1} \\ 
\vdots \\ 
\frac{\partial (a_1x_1 + ... + a_nx_n)}{\partial x_n} 
\end{array}\right] 
= 
\left[\begin{array}{c}
a_1 \\
\vdots  \\
a_n
\end{array}\right] =
a
 \]</span></p>
<p>Niye her satırda <span class="math inline">\(a_1,a_2\)</span> gibi değerler elde ettiğimizin sebebi bariz herhalde, çünkü mesela ilk satırda <span class="math inline">\(x_1\)</span>'e göre türev alındığı durumda <span class="math inline">\(a_1x_1\)</span> haricindeki tüm terimler yokolacaktır, çünkü o terimler içinde <span class="math inline">\(x_1\)</span> yoktur ve Calculus'a göre sabit sayı sayılırlar.</p>
<p>Peki <span class="math inline">\(a^Tx\)</span>'in <span class="math inline">\(x^T\)</span>'ye göre türevi nedir?</p>
<p><span class="math inline">\(x^T\)</span>'nin yatay bir vektör olduğuna dikkat, yani satır vektörü, o zaman sonuç yatay bir vektör olacaktır (kıyasla gradyan dikeydi).</p>
<p><span class="math display">\[ 
\frac{\partial (a^Tx)}{\partial x^T} = 
\left[\begin{array}{ccc}
\frac{\partial (a^Tx)}{\partial x_1} &amp;
\dots 
&amp;
\frac{\partial (a^Tx)}{\partial x_n} 
\end{array}\right] 
\qquad (1)
 \]</span></p>
<p><span class="math display">\[ =
\left[\begin{array}{ccc}
a_1 &amp; \dots &amp; a_n
\end{array}\right] = 
a^T \]</span></p>
<p>Eğer bir <span class="math inline">\(x \in \mathbb{R}^m\)</span> vektöründen <span class="math inline">\(A\)</span> matrisi <span class="math inline">\(x\)</span> ile çarpılıyor ise, bu çarpımın <span class="math inline">\(x\)</span>'e göre türevi nedir?</p>
<p><span class="math display">\[ \frac{\partial(Ax)}{\partial x^T} = A
\]</span></p>
<p>İspat: Eğer <span class="math inline">\(a_i \in \mathbb{R}^n\)</span> ise (ki devriği alınınca bu vektör yatay hale gelir, yani altta bu yatay vektörleri üst üste istiflediğimizi düşünüyoruz),</p>
<p><span class="math display">\[ A = \left[\begin{array}{c}
a_1^T \\ \vdots \\ a_m^T
\end{array}\right] \]</span></p>
<p>O zaman <span class="math inline">\(Ax\)</span> ne olur? [4] yazısındaki &quot;satır bakış açısı'' düşünülürse, <span class="math inline">\(A\)</span>'in her satırı, ayrı ayrı <span class="math inline">\(x\)</span>'in tüm satırlarını kombine ederek tekabül eden sonuç satırını oluşturur (tabii bu örnekte <span class="math inline">\(x\)</span>'in kendisi bir vektör o yüzden &quot;satırları'' tek bir sayıdan ibaret),</p>
<p><span class="math display">\[ Ax = \left[\begin{array}{c}
a_1^Tx \\ \vdots \\ a_m^Tx
\end{array}\right] 
\]</span></p>
<p>Üstteki bir vektör, her öğesi tek sayı. Türevi alırsak (dikkat yatay vektöre göre türev alıyoruz), ve (1)'i dikkate alırsak,</p>
<p><span class="math display">\[ 
\frac{\partial Ax}{\partial x^T}  =
\left[\begin{array}{c}
\frac{\partial(a_1^Tx) }{\partial x^T} 
\\ 
\vdots \\ 
\frac{\partial(a_m^Tx) }{\partial }
\end{array}\right] = \left[\begin{array}{c}
a_1^T \\ \vdots \\ a_m^T
\end{array}\right]  = A
 \]</span></p>
<p>Şu türev nasıl hesaplanır?</p>
<p><span class="math display">\[ 
\frac{\partial (x^TA^T)}{\partial x}
\]</span></p>
<p>Çarpımı açalım, <span class="math inline">\(x\)</span> devriği yatay bir vektör, <span class="math inline">\(A\)</span>'nin satırları <span class="math inline">\(a_i\)</span>'ler ise devrik sonrası kolonlar haline gelirler, yani</p>
<p><span class="math display">\[ 
\left[\begin{array}{ccc}
x_1 &amp; \dots &amp; x_n
\end{array}\right]
\left[\begin{array}{ccc}
\uparrow &amp; &amp; \uparrow \\
a_1 &amp; \dots &amp; a_m \\
\downarrow &amp; &amp; \downarrow 
\end{array}\right]
 \]</span></p>
<p>Şimdi matris çarpımı satır bakışını kullanalım, çarpan <span class="math inline">\(x\)</span> satırı bir tane, o zaman sonuç tek satır olacak. Bu tek <span class="math inline">\(x\)</span> satırının öğeleri, <span class="math inline">\(A^T\)</span> satırlarını teker teker çarpıp toplayacak ve o tek sonuç satırını meydana getirecek. Yani <span class="math inline">\(x_1,x_2,...\)</span> sırayla <span class="math inline">\(a_1\)</span>'in tüm öğelerini çarpıyor, aynı şekilde <span class="math inline">\(a_2\)</span> için aynısı oluyor, vs. Bu durumu daha temiz bir şekilde alttaki gibi belirtebiliriz,</p>
<p><span class="math display">\[ 
= \left(\begin{array}{ccc}
x^Ta_1 &amp; \dots x^Ta_m 
\end{array}\right)
\]</span></p>
<p>Bu ifadenin türevini almak çok kolay,</p>
<p><span class="math display">\[ 
= \left(\begin{array}{ccc}
\frac{\partial (x^Ta_1)}{\partial x} &amp;
\dots
\frac{\partial (x^Ta_m)}{\partial x} 
\end{array}\right)
\]</span></p>
<p><span class="math display">\[ 
= \left(\begin{array}{ccc}
a_1 &amp; \dots a_m 
\end{array}\right)
\]</span></p>
<p><span class="math display">\[ 
\frac{\partial (x^TA^T)}{\partial x} = A^T 
\qquad (2) 
\]</span></p>
<p>Başka bir türev: Diyelim ki <span class="math inline">\(x \in \mathbb{R}^n, z \in \mathbb{R}^m\)</span>. Yeni bir vektör <span class="math inline">\(c = A^Tz\)</span> tanımlayalım ki vektör <span class="math inline">\(n\)</span> boyutunda. O zaman</p>
<p><span class="math display">\[ 
\frac{\partial (z^TAx)}{\partial x} =  
\frac{\partial (c^Tx)}{\partial x} = c =  A^Tz
\]</span></p>
<p>Diğer bir türev</p>
<p><span class="math display">\[ 
\frac{\partial (z^TAx)}{\partial z} =  Ax
\]</span></p>
<p>Üstteki (2)'nin bir sonucu olarak görülebilir.</p>
<p>Eğer <span class="math inline">\(x=x(\alpha),z=z(\alpha)\)</span> olursa, türev almada Zincir Kuralını kullanalım,</p>
<p><span class="math display">\[ 
\frac{\partial (z^TAx)}{\partial \alpha} =  
\frac{\partial (z^TAx)}{\partial x} \frac{\partial x}{\partial \alpha}  + 
\frac{\partial (z^TAx)}{\partial z} \frac{\partial z}{\partial \alpha}  
\]</span></p>
<p><span class="math display">\[ 
\frac{\partial (z^TAx)}{\partial \alpha} =  
A^Tz \frac{\partial x}{\partial \alpha}  + 
Ax \frac{\partial z}{\partial \alpha}  
\]</span></p>
<p>Eğer <span class="math inline">\(z = x = \alpha\)</span> dersek,</p>
<p><span class="math display">\[ 
\frac{\partial (x^TAx)}{\partial \alpha} =  
\frac{\partial (x^TAx)}{\partial x} =  
A^Tx \frac{\partial x}{\partial \alpha}  + 
Ax \frac{\partial x}{\partial \alpha}  
\]</span></p>
<p><span class="math display">\[ 
= Ax + A^Tx  = (A^T+A) x
\]</span></p>
<p>Diyelim ki <span class="math inline">\(A\)</span> simetrik bir matris, o zaman <span class="math inline">\(A^T=A\)</span>, ve</p>
<p><span class="math display">\[ 
= (A^T+A)x = 2Ax
\]</span></p>
<p><span class="math inline">\(x^Tx\)</span> ifadesinin <span class="math inline">\(x\)</span> vektörüne göre türevi nedir? En basit yol, <span class="math inline">\(x^TAx\)</span> kalıbını kullanmak, ve <span class="math inline">\(A = I\)</span> yani birim matrisi koymak. Bu durumda</p>
<p><span class="math display">\[ 
= \frac{\partial (x^TIx)}{\partial \alpha}  = 2Ix = 2x
 \]</span></p>
<p>Daha zor yoldan, bu bir noktasal çarpım olacaktır, <span class="math inline">\(x_1x_1 + x_2x_2 + .. +  x_nx_n\)</span> yani <span class="math inline">\(x_1^2 + x_2^2 + .. + x_n^2\)</span>. Bu tek bir skalar sonuç, o sonucun her <span class="math inline">\(x\)</span> öğesine göre türevinin alınması,</p>
<p><span class="math display">\[ 
\left[\begin{array}{c}
\frac{\partial (x_1^2 + x_2^2 + .. + x_n^2)}{\partial x_1} \\
\dots \\
\frac{\partial (x_1^2 + x_2^2 + .. + x_n^2)}{\partial x_n} 
\end{array}\right]
 \]</span></p>
<p><span class="math display">\[ 
= \left[\begin{array}{c}
2x_1 \\
\dots \\
2x_n
\end{array}\right] = 
2x
 \]</span></p>
<p>İzler (Trace)</p>
<p><span class="math display">\[ \frac{\partial }{\partial A} Tr(A) = I \]</span></p>
<p><span class="math display">\[ \frac{\partial }{\partial A} Tr(AB) = B^T \]</span></p>
<p><span class="math display">\[ \frac{\partial }{\partial A} Tr(A^TB) = B \]</span></p>
<p><span class="math display">\[ \frac{\partial }{\partial A} Tr(ABA^T) = A(B + B^T) \]</span></p>
<p>Eğer <span class="math inline">\(B\)</span> simetrik ise üstteki şu hale getirilebilir</p>
<p><span class="math display">\[  = 2AB \]</span></p>
<p>Yönsel Türev (Directional Derivative)</p>
<p>Bir vektör fonksiyonu <span class="math inline">\(f = \vec{f}(x,y,z)\)</span> düşünelim,</p>
<p><span class="math display">\[
f = \left[\begin{array}{r} f_1(x,y,z) \\ f_2(x,y,z) \\ f_3(x,y,z) \end{array}\right]
\]</span></p>
<p>Formel olarak <span class="math inline">\(f \cdot \nabla\)</span> bir operatör tanımlar [2, sf. 74],</p>
<p><span class="math display">\[
f \cdot \nabla = 
\left[\begin{array}{ccc} f_1 &amp; f_2 &amp; f_3 \end{array}\right]
\cdot 
\left[\begin{array}{ccc} 
\frac{\partial }{\partial x} &amp; \frac{\partial }{\partial y} &amp; \frac{\partial }{\partial z} 
\end{array}\right]
\]</span></p>
<p><span class="math display">\[
= f_1 \frac{\partial }{\partial x} +
f_2 \frac{\partial }{\partial y} +
f_3 \frac{\partial }{\partial z} 
\]</span></p>
<p>Üstteki bir operatör. Onu mesela bir <span class="math inline">\(g\)</span> üzerinde uygulayabiliriz,</p>
<p><span class="math display">\[
(f_1 \frac{\partial }{\partial x} +
f_2 \frac{\partial }{\partial y} +
f_3 \frac{\partial }{\partial z}) 
g = 
f_1 \frac{\partial g}{\partial x} +
f_2 \frac{\partial g}{\partial y} +
f_3 \frac{\partial g}{\partial z} 
\]</span></p>
<p>Bazı Eşitlikler</p>
<p><span class="math inline">\(a,b\)</span> vektör fonksiyonu olmak üzere,</p>
<p><span class="math display">\[
\nabla (a \cdot b) = 
(a \cdot \nabla) b + (b \cdot \nabla) a + 
a \times (\nabla \times b) + 
b \times (\nabla \times a)
\]</span></p>
<p>Kaynaklar</p>
<p>[2] Spiegel, <em>Vector Tensor Analysis</em></p>
<p>[3] Kutter, <em>Multivariable Advanced Calculus</em></p>
<p>[4] Bayramlı, Lineer Cebir, <em>Matris Çarpımı, Ders 1</em></p>
</body>
</html>
