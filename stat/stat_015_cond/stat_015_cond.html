<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
  
  
  
  
</head>
<body>
<h1 id="koşulsal-olasılık-ve-koşulsal-beklenti-conditional-probability-conditional-expectation">Koşulsal Olasılık ve Koşulsal Beklenti (Conditional Probability, Conditional Expectation)</h1>
<p>Olasılık teorisinin en faydalı tekniklerinden biri koşulsal olasılık ve koşulsal beklentidir. Bunun iki sebebi var. Birincisi pratikte çoğunlukla elimizde bir bilgi geçtiği durumda olasılık ve beklenti hesabı yaptığımız, yani istediğimiz hesapların &quot;koşullu'' olması. İkincisi olasılık ya da beklenti hesabında bu hesabı ilk önce bir başka rasgele değişkene koşullamanın çok faydalı olması.</p>
<p>Diyelim ki tavla oynarken iki zar atıyoruz, temel olasılıktan biliyoruz ki her seferinde 36 mümkün sonuçlardan biri ortaya çıkacak, mesela (1,2) ya da (5,5), vs, o zaman, eğer zar hileli değilse her sonucun olasılığı 1/36. Şimdi diyelim ki ilk zarın 4 geldiğini gördük, ve birisi diğer zarın üstünü kapattı, ve bu bilgi ışığında bize iki zarın toplamının 6 olma olasılığının ne olduğunu sordu. İlk zarın 4 olduğu bilgisi verildiğine göre toplamı gözönüne almadan önce altı tane mümkün sonucu düşüürüz,, (4,1), (4,2), (4,3), (4,4), (4,5), (4,6). Bu seçeneklerin herbirinin ortaya çıkma ihtimali birbirine eşit. Biraz önceki sonuçları olaylar olarak düşünürsek, <span class="math inline">\(E\)</span>'yi iki zarın toplamının 6 olması olayı, <span class="math inline">\(F\)</span>'yi ilk zarın 4 olma olayı olarak tanımlayabiliriz, bu durumda aradığımız sonuç,</p>
<p><span class="math display">\[ P(E|F) \]</span></p>
<p>olarak gösterilir. Bu formülün açılımı</p>
<p><span class="math display">\[ P(E|F) = \frac{P(EF)}{P(F)}
\qquad (1)\]</span></p>
<p><span class="math inline">\(P(EF)\)</span> hem <span class="math inline">\(E\)</span> hem <span class="math inline">\(F\)</span> olaylarının aynı anda olma olasılığı, yani <span class="math inline">\(E\)</span> kümesi ve <span class="math inline">\(F\)</span> kümesinin kesişimi. Bölendeki <span class="math inline">\(P(F)\)</span> bir anlamda <span class="math inline">\(P(E|F)\)</span> hesabını <span class="math inline">\(F\)</span> bazında yapma amaçlı; çünkü <span class="math inline">\(F\)</span> olduğunu &quot;biliyoruz'' ve artık örneklem uzayımız <span class="math inline">\(F\)</span> haline geliyor, bu uzay içinde <span class="math inline">\(E\)</span>'nin olma olasılığına bakıyoruz. Not: Hesabın geçerli olması için <span class="math inline">\(P(F)&gt;0\)</span> olmalı tabii ki.</p>
<p>Biraz önceki örnek için aradığımız cevap 1/6 çünkü altı mümkün sonuç içinde sadece (4,2) olayı bizi ilgilendiriyor.</p>
<p>Bağımsız Olaylar</p>
<p>İki olay <span class="math inline">\(E,F\)</span>'nin birbirinden bağımsız olduğu söylenir, eğer</p>
<p><span class="math display">\[ P(EF) = P(E)P(F) \]</span></p>
<p>ise. (1) denklemi üzerinden bu</p>
<p><span class="math display">\[ P(E|F) = P(E) \]</span></p>
<p>sonucunu verir, bu sonuç akla yatkın olmalı, eğer <span class="math inline">\(E,F\)</span> bağımsız ise, <span class="math inline">\(F\)</span>'in verilmiş olması bize <span class="math inline">\(E\)</span> hakkında hiçbir şey söylemez.</p>
<p>Bayes Formülü</p>
<p>Yine <span class="math inline">\(E\)</span> ve <span class="math inline">\(F\)</span> olayları var, ki <span class="math inline">\(EF\)</span> hem <span class="math inline">\(E\)</span>, hem de <span class="math inline">\(F\)</span>'nin olma durumu, o zaman <span class="math inline">\(E\)</span></p>
<p><span class="math display">\[ E = EF \cup EF^c \]</span></p>
<p>olarak gösterilebilir çünkü bir öğenin <span class="math inline">\(R\)</span> içinde olması için ya <span class="math inline">\(E\)</span> ve <span class="math inline">\(F\)</span> içinde olması, ya da <span class="math inline">\(E\)</span> içinde olması ama <span class="math inline">\(F\)</span> içinde olmaması lazımdır. <span class="math inline">\(EF\)</span> ve <span class="math inline">\(EF^c\)</span> birbirlerinin tam tersi, karşılıklı dışarlayan (mütually exclusive) olaylar oldukları için alttaki doğru olacaktır,</p>
<p><span class="math display">\[ P(E) = P(EF) + P(EF^c) \]</span></p>
<p><span class="math display">\[ = P(E|F)P(F) + P(E|F^c)P(F^c) \]</span></p>
<p><span class="math display">\[ = P(E|F)P(F) + P(E|F^c)(1-P(F)) \]</span></p>
<p>Üstteki son formül <span class="math inline">\(P(E)\)</span>'nin bir ağırlıklı ortalama olduğunu söylüyor; ağırlıklar <span class="math inline">\(F\)</span>'in olma ve olmama olasılığı, ve bu ağırlıklar <span class="math inline">\(F\)</span>'nin olduğu ve olmadığının verildiği durumdaki <span class="math inline">\(E\)</span> olasılıklarının ağırlıklı ortalamasını alıyorlar.</p>
<p>Örnek</p>
<p>Bir hastalık için bir labaratuarun test tekniğinin yüzde 95 başarısı var. Fakat bu test bazen &quot;yanlış pozitif'' cevabı da verebiliyor; hasta olmayan kişilerin yüzde 1'i için, yani 0.01 olasılıkla test hasta diyebiliyor. Eğer toplumun yüzde 0.5'inde bu hastalığın olduğu biliniyorsa, herhangi bir kişinin testi pozitif geldiğinde o kişinin gerçekten hasta olma olasılığı nedir?</p>
<p>Cevap</p>
<p><span class="math inline">\(D\)</span> test edilen kişinin hasta olma olayı diyelim, <span class="math inline">\(E\)</span> testin pozitif olması. Aradığımız <span class="math inline">\(P(D|E)\)</span> olasılığı.</p>
<p><span class="math display">\[ P(D|E) = \frac{P(DE)}{P(E)} \]</span></p>
<p><span class="math display">\[
= \frac{P(E|D)P(D)}
{P(E|D)P(D) + P(E|D^c)P(D^c)}
\qquad (2)
\]</span></p>
<p><span class="math display">\[
\frac{(0.95)(0.005)}
{(0.95)(0.005) + (0.01)(0.995)} \]</span></p>
<p><span class="math display">\[ = \frac{95}{294} \approx 0.323 \]</span></p>
<p>Yapılan bazı hareketlere dikkat: 4 üstteki denklemde <span class="math inline">\(P(DE)\)</span>'yi onun bir altında <span class="math inline">\(P(E|D)P(D)\)</span>, yani <span class="math inline">\(P(ED)\)</span>'ye çevirdik, çünkü <span class="math inline">\(P(DE)\)</span> ile <span class="math inline">\(P(ED)\)</span> aynı şey.</p>
<p>Ayrıca çözüme yaklaşma şeklimiz istenen <span class="math inline">\(P(D|E)\)</span> için <span class="math inline">\(P(E|D)\)</span> ve onunla alakalı olan rakamları kullanmak; problemde bildiğimiz <span class="math inline">\(E\)</span>'nin verildiği durum değil, onun tersi, <span class="math inline">\(D\)</span>'nin verildiği durum. Yani test tekniği hakkında elimizde bazı bilgiler var, <em>bu bilgiler ışığında</em> test pozitif verirse bu sonuca ne kadar inanalım diyoruz bir anlamda.</p>
<ol start="2" style="list-style-type: decimal">
<li>formülü, onun ikiden fazla seçenek için ayrıksal, ya da sürekli olarak genelleştirilmiş hali Bayes Formülü olarak biliniyor.</li>
</ol>
<p>Rasgele Degiskenler</p>
<p>Hatırlayalım, iki olay <span class="math inline">\(E,F\)</span> için <span class="math inline">\(P(F)&gt;0\)</span> ise, <span class="math inline">\(F\)</span>'in verildiği durumda (koşul) <span class="math inline">\(E\)</span>'nin olasılığı</p>
<p><span class="math display">\[ P(E|F) = \frac{P(EF)}{P(F)} \]</span></p>
<p>O zaman <span class="math inline">\(X,Y\)</span> ayrıksal rasgele değişkenler ise <span class="math inline">\(Y=y\)</span> verildiği durumda <span class="math inline">\(X\)</span>'in koşulsal olasılık kütle fonksiyonunu (conditional probability mass function) şöyle tanımlayabiliriz,</p>
<p><span class="math display">\[ p_X(x|y) = P(X=x|Y=y) \]</span></p>
<p><span class="math display">\[ = \frac{P(X=x,Y=y)}{P(Y=y)} \]</span></p>
<p><span class="math display">\[ = \frac{p(x,y)}{p_Y(y)} \]</span></p>
<p>ki tüm <span class="math inline">\(y\)</span> değerleri için <span class="math inline">\(P(Y = y) &gt; 0\)</span> olmalı. Benzer şekilde <span class="math inline">\(Y=y\)</span> verildiği durumda <span class="math inline">\(X\)</span>'in koşulsal olasılık dağılım fonksiyonu, ki yine tüm <span class="math inline">\(y\)</span> değerleri için <span class="math inline">\(P(Y = y) &gt; 0\)</span> olacak şekilde,</p>
<p><span class="math display">\[ F_{X|Y}(x|y) = P(X \le x | Y=y) \]</span></p>
<p><span class="math display">\[ \sum_{a \le x} p_X(a|y)\]</span></p>
<p>Son olarak <span class="math inline">\(Y=y\)</span> verildigi durumda <span class="math inline">\(X\)</span>'in kosulsal beklentisi,</p>
<p><span class="math display">\[ E(X|Y=y) = \sum_{x}x P(X=x | Y=y ) \]</span></p>
<p><span class="math display">\[ = \sum_x x p_X(x|y) \]</span></p>
<p>Yani herşey daha önce normal olasılık tanımlarında olduğu gibi, sadece şimdi tüm ifadeler <span class="math inline">\(Y=y\)</span> olayına koşullu. Bunun söyleyebiliyoruz çünkü eğer <span class="math inline">\(X\)</span> <span class="math inline">\(Y\)</span>'den bağımsız olsaydı</p>
<p><span class="math display">\[ p_X(x|y) = P(X=x|Y=y)  \]</span></p>
<p><span class="math display">\[ = P(X=x) \]</span></p>
<p>olurdu, ve bu formülü üstteki formüllerde koşullu olanın yerine koyduğumuzda normal olasılık denklemlerini elde ederdik.</p>
<p>Örnek</p>
<p><span class="math inline">\(p(x,y)\)</span>'in <span class="math inline">\(X,Y\)</span> rasgele değişkenlerinin ortak olasılık kütle fonksiyonu olduğunu farz edelim, ve</p>
<p><span class="math display">\[ p(1,1) = 0.5, \quad
p(1,2) = 0.1, \quad
p(2,1) = 0.1, \quad
p(2,2) = 0.3
\]</span></p>
<p>olsun. <span class="math inline">\(Y=1\)</span>'in verili olduğu durumda <span class="math inline">\(X\)</span>'in olasılık kütle fonksiyonunu hesaplayın.</p>
<p>Çözüm</p>
<p><span class="math inline">\(Y\)</span> sadece 1 olabileceğine göre, <span class="math inline">\(p_{X|Y}(1|1)\)</span> ve <span class="math inline">\(p_{X|Y}(2|1)\)</span>'i hesaplanırsa iş biter. Bu değerleri ayrı ayrı bulacağız çünkü dağılım bir formül değil, üstteki gibi sunulan ayrıksal olasılıklarla her ihtimal ayrı çözülmeli.</p>
<p><span class="math display">\[ p_{X|Y}(1|1) = P(X=1|Y=1) = \frac{P(X=1,Y=1)}{P(Y=1)}
\]</span></p>
<p><span class="math display">\[ = \frac{p(1,1)}{p_Y(1)} = \frac{5}{6} \]</span></p>
<p><span class="math inline">\(p_Y(1)\)</span>'i nasil bulduk? Soyle,</p>
<p><span class="math display">\[ p_Y(1) = \sum_x p(x,1) = p(1,1) + p(2,1) = 0.6 \]</span></p>
<p>Ayrıca iki üstte <span class="math inline">\(5/6\)</span> oldu çünkü <span class="math inline">\(0.5/0.6=5/6\)</span>. Devam edelim,</p>
<p><span class="math display">\[ p_{X|Y}(2|1) =
\frac{p(2,1)}{p_Y(1)} = \frac{1}{6}
\]</span></p>
<p>Sürekli Durum</p>
<p>Sürekli rasgele değişkenler için koşullu olasılık yoğunluk fonksiyonları</p>
<p><span class="math display">\[ f_{X|Y}(x|y) = \frac{ f_{X,Y}(x,y)}{f_Y(y)} \]</span></p>
<p>Eğer koşullu yoğunluk üzerinden olay hesabı yapmak istersek, ve <span class="math inline">\(f_Y(y) &gt; 0\)</span> olduğunu farzederek,</p>
<p><span class="math display">\[ P(X \in A | Y = y) = \int_A f_{X|Y}(x|y) \mathrm{d} x \]</span></p>
<p>Örnek</p>
<p><span class="math display">\[ f(x,y) = 
\left\{ \begin{array}{ll}
x+y &amp; \textrm{eğer } 0 \le x \le 1, 0 \le y \le 1 \\
0 &amp; \textrm{diğer}
\end{array} \right.
\]</span></p>
<p><span class="math inline">\(P(X &lt; 1/4 | Y = 1/3)\)</span> nedir?</p>
<p>Cevap</p>
<p>Üstteki olasılık hesabı için <span class="math inline">\(f_{X|Y}\)</span> fonksiyonuna ihtiyacımız var,</p>
<p><span class="math display">\[ f_Y(y) = \frac{ 1}{2} + y  \]</span></p>
<p>olsun. Ana formülümüz neydi?</p>
<p><span class="math display">\[ f_{X|Y}(x|y) = \frac{f_{X,Y}(x,y)}{f_Y(y)} \]</span></p>
<p><span class="math display">\[ = \frac{ x+y }{\frac{1}{2} + y} \]</span></p>
<p><span class="math display">\[
P(X &lt; 1/4 | Y = 1/3) = 
\int_{ 0}^{1/4} \frac{ x+ \frac{1}{3} }{\frac{1}{2} + \frac{1 }{3}} \mathrm{d} x = 
\frac{\frac{1}{32}+ \frac{1}{3} }{\frac{1}{2} + \frac{1}{3}} = 
\frac{14}{32}
\]</span></p>
<p>Beklentileri Koşullayarak Hesaplamak</p>
<p><span class="math inline">\(E(X|Y)\)</span> beklenti hesabını düşünelim, bu hesap <span class="math inline">\(Y\)</span>'nin bir fonksiyonu olacaktır bir bakıma, yani her <span class="math inline">\(y\)</span> için <span class="math inline">\(E(X|Y=y)\)</span> farklı bir sonuç verecektir. Önemli nokta, <span class="math inline">\(E(X|Y)\)</span>'nin kendisi de bir rasgele değişkendir. Koşulsal beklentinin çok önemli özelliklerinden biri her <span class="math inline">\(X,Y\)</span> rasgele değişkeni için</p>
<p><span class="math display">\[ E(X) = E(E(X|Y)) \]</span></p>
<p>eşitliğinin doğru olmasıdır. Biraz değişik bir notasyona göre,</p>
<p><span class="math display">\[ E_Y (E_{X|Y} (X|Y)) = E(X) \]</span></p>
<p>İspat</p>
<p>Ayrıksal durum için,</p>
<p><span class="math display">\[ E_Y (E_{X|Y} (X|Y)) = E_Y \bigg( \sum_{x} x \cdot P(X=x|Y) \bigg) \]</span></p>
<p><span class="math display">\[  = \sum_y \bigg( \sum _x x \cdot P(X=x|Y=y) \bigg) P(Y=y) \]</span></p>
<p><span class="math display">\[  = \sum_y  \sum _x x \cdot P(X=x|Y=y) P(Y=y) \]</span></p>
<p><span class="math display">\[  = \sum_x x \sum _y P(X=x|Y=y) P(Y=y) \]</span></p>
<p><span class="math display">\[  = \sum_x x \sum _y P(X=x,Y=y) \]</span></p>
<p><span class="math display">\[  = \sum_y x  P(X=x) \]</span></p>
<p><span class="math display">\[ = E(X) \]</span></p>
<p>Soru</p>
<p>Bir maden işçisi kaza sonrası bir madende tıkalı kalıyor. Dışarı çıkabilmesi için önünde üç değişik kapı var; birinciyi seçerse 2 saat yürüdükten sonra dışarı çıkacak. Eğer ikinciyi seçerse 3 saat yürüdükten sonra tekrar madene dönecek. Üçüncüyü seçerse bu sefer 5 saat yürüdükten sonra madene dönecek. İşçi hangi kapının onu dışarı çıkartacağını bilmiyor, herhangi bir kapıyı eşit olasılıkla seçecek. İşçinin dışarı çıkma süresinin beklentisi nedir?</p>
<p>Cevap</p>
<p><span class="math inline">\(X\)</span> değişkeni işçinin dışarı çıkma süresini belirten rasgele değişken olsun, <span class="math inline">\(Y\)</span> ise işçinin ilk seçtiği kapı.</p>
<p><span class="math display">\[
E(X) = E(X | Y=1) P(Y=1) + E(X | Y=2) P(Y=2) +E(X | Y=3) P(Y=3) 
\]</span></p>
<p><span class="math display">\[
E(X) = \frac{1}{3} \big( E(X | Y=1)  + E(X | Y=2) +E(X | Y=3) \big)
\qquad (3)
\]</span></p>
<p>Buraya kadar basit: Fakat sorudaki puf noktaya dikkat, eger kapi 2 ay da 3 secilirse isci tekrar madene donuyor, yani bastaki haline geri gelmis oluyor. O zaman</p>
<p><span class="math display">\[ E(X|Y=1) = 2\]</span></p>
<p><span class="math display">\[ E(X|Y=2) = 3 + E(X) \]</span></p>
<p><span class="math display">\[ E(X|Y=3) = 5 + E(X) \]</span></p>
<p>Üstteki iki denklemi (3) içine koyarsak,</p>
<p><span class="math display">\[
E(X) = \frac{1}{3} \big( 2  + 3 + E(X) + 5 + E(X) \big)
\]</span></p>
<p><span class="math display">\[ E(X) = 10 \]</span></p>
<p>İşçinin dışarı çıkma beklentisi 10 saattir.</p>
<p>Kaynaklar</p>
<p>[1] Ross, <em>Introduction to Probability Models, 10th Edition</em></p>
</body>
</html>
