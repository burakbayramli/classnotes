<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script type="text/x-mathjax-config">
    MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
      MathJax.Hub.Insert(MathJax.InputJax.TeX.Definitions.macros,{
        cancel: ["Extension","cancel"], cancelto: ["Extension","cancel"]
      });
    });
    </script>  
   
  <title>Genel Çifteşlik / İkizlik (General Duality)</title>
  <style type="text/css">code{white-space: pre;}</style>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
</head>
<body>
<h1 id="genel-çifteşlik-ikizlik-general-duality">Genel Çifteşlik / İkizlik (General Duality)</h1>
<p>Bu derste [1] genel dışbükey problemlerinde ikizlik konusunu göreceğiz, ek olarak dışbükey olmayan durumlara da bakacağız. İkizlik oldukça genel bir konu.</p>
<p>Önceki derste ikizliği elde etmenin ikinci yönteminde</p>
<p><span class="math display">\[
L(x,u,v) \equiv c^T x + u^T (Ax-b) + v^T (Gx-h) 
\]</span></p>
<p>tanımı üzerinden (Lagrangian)</p>
<p><span class="math display">\[
f^\ast = \min_{x \in C} L(x,u,v) \ge \min_x L(x,u,v) \equiv g(u,v)
\]</span></p>
<p>şeklinde bir formül elde etmiştik, <span class="math inline">\(u,v\)</span> sabitlendiği durumda ve <span class="math inline">\(x \in C\)</span> olurlu çözümleri kümesi olacak şekilde, ve bu küme üzerinden Lagrangian'ın, tüm <span class="math inline">\(x\)</span>'ler üzerinden olan Lagrangian'dan her zaman daha büyük olacağını görmüştük. Aslında bu çok basit bir fikir ama bu basit ve kuvvetli fikir sayesinde ikizliği genel problemlere uygulamak mümkün oluyor.</p>
<p>Ayrıca, sonradan göreceğimiz üzere, en sağdaki eşitsizlik ikiz çözüm <span class="math inline">\(u,v\)</span> noktasına sıkı (tight), yani olurlu kümeyi bir yana atarak bir şey kaybetmiş olmadık. Yani üstte görülen eşitsizlik bazılarına gevşek gelebilir, ama doğru <span class="math inline">\(u,v\)</span>'de son derece sıkıdır.</p>
<p>Neyse devam edersek, yine üstte görülen <span class="math inline">\(g(u,v)\)</span> <span class="math inline">\(u,v\)</span>'nin bir fonksiyonu ve işin güzel tarafı çoğunlukla hesaplanabilir bir fonksiyon. Yani <span class="math inline">\(L(x,u,v)\)</span>'yi <span class="math inline">\(x\)</span> üzeriden minimize etmek <span class="math inline">\(u,v\)</span>'nin bir fonksiyonu.</p>
<p>Bir diğer deyişle, <span class="math inline">\(g(u,v)\)</span> fonksiyonu <span class="math inline">\(f^\ast\)</span> üzerinde herhangi bir <span class="math inline">\(u\)</span> ve <span class="math inline">\(v \ge 0\)</span> için bir alt sınır. Ikiz fonksiyonu olarak isimlendirilen <span class="math inline">\(g\)</span>.</p>
<p>Lagrangian'ı tekrar düzenleyerek alttakini elde etmiştik,</p>
<p><span class="math display">\[
g(u,v) = \left\{ \begin{array}{ll}
-\infty &amp; \text{eğer} \quad c^T + A^Tu + G^T v \ne 0 \\
- b^T u - h^Tu &amp; \text{eğer} \quad c^T + A^Tu + G^T v = 0 
\end{array} \right.
\]</span></p>
<p>Şimdi LP'lerden ilerleyip, düşünebildiğimiz en genel optimizasyon formuna bakacağız. Dişbükey (convex) olması şart değil ama tabii ki dışbükey durumlara özel ilgi göstereceğiz. Form,</p>
<p><span class="math display">\[
\min_{x} f(x), \quad \textrm{öyle ki}
\]</span> <span class="math display">\[
h_i(x) \le 0, \quad i=1,..,m
\]</span> <span class="math display">\[
l_j(x) \le 0, \quad j=1,..,r
\]</span></p>
<p>Eğer sadece dışbükeylige bakıyor olsaydık <span class="math inline">\(f,h_i\)</span>'lerin dışbükey, <span class="math inline">\(l_i\)</span>'lerin ise doğrusal olması gerekirdi. Lagrangian'i tanımlayalım, hala çok genel bir şekilde yaklaşıyoruz tabii,</p>
<p><span class="math display">\[
L(x,u,v) = f(x) + \sum_{i=1}^{m} u_i h_i(x) + \sum_{i=1}^{r} v_i l_i(x) 
\]</span></p>
<p>Eşitlik ve eşitsizlik kritlerini ikiz değişkenler ile çarpıp topluyoruz, ve hedefe ekliyoruz. Daha önce olduğu gibi eşitlik kısıtlamarını çarpan <span class="math inline">\(u_i\)</span>'lar sıfır olmamalı çünkü <span class="math inline">\(f(x)\)</span> ile Lagrangian arasında bir ilişki kuracağız, ve ana problemdeki eşitsizlin işaret değiştirmesini istemiyoruz.</p>
<p>Bu arada &quot;ikiz değişkenler'' kelimesi duruma göre bazen &quot;Lagrange çarpanı'' olarak görülebilir.</p>
<p>Önemli özellik, her <span class="math inline">\(v\)</span> ve <span class="math inline">\(u \ge 0\)</span> için, her olurlu <span class="math inline">\(x\)</span> noktasında</p>
<p><span class="math display">\[
f(x) \ge L(x,u,v)
\]</span></p>
<p>Niye? Daha önce LP'lerle gördüğümüz fikirle aynı durum, olurlu noktalarda</p>
<p><span class="math display">\[
L(x,u,v) =  f(x) + 
\sum_{i=1}^{m} u_i \underbrace{h_i(x)}_{\le 0} + 
\sum_{i=1}^{r} v_i \underbrace{l_i(x)}_{=0}
\]</span></p>
<p>Olurlu noktalarda <span class="math inline">\(l_i\)</span>'ler sıfır, o zaman tüm <span class="math inline">\(l_i\)</span>'leri toplamı yokolur, <span class="math inline">\(u_i\)</span>'lerin hepsi sıfırdan büyük olmalı ve olurlu noktada <span class="math inline">\(h_i\)</span>'ler sıfırdan küçük, pozitif çarpı negatif eşittir negatif, toplam negatif, <span class="math inline">\(f(x)\)</span>'den bir değer eksiltilmiş olacaktır, bu da muhakkak <span class="math inline">\(f(x)\)</span>'den küçük bir sonuca sebep olacaktır, iki üstteki bu şekilde ispatlanmış olur.</p>
<p>Üstteki fonksiyonu, parçalarını grafiksel olarak alttaki gibi görebiliriz,</p>
<div class="figure">
<img src="func_56_gendual_01.png" />

</div>
<p>Kesiksiz çizgi kriter / hedef fonksiyonu örnek bir <span class="math inline">\(f\)</span>. Dikkat edersek görülen <span class="math inline">\(f\)</span> dışbükey değil, bunu genel dışbükey olmayan ortamlarda da tekniğin işlediğini göstermek için yaptık.</p>
<p>Noktalı eğrilerin her biri farklı <span class="math inline">\(u\)</span>'lar için <span class="math inline">\(L\)</span>'nin değerleri, ayrıca olurlu kümeyi <span class="math inline">\([-0.46,0.46]\)</span> arasında olacak şekilde seçtik. Yani</p>
<p><span class="math display">\[
\min_{x} f(x), \quad \textrm{öyle ki}
\]</span> <span class="math display">\[
h_i(x) \le 0
\]</span></p>
<p>programını ele almış olduk, noktalalı eğriler ile çizilen ise</p>
<p><span class="math display">\[
L(x,u) = f(x) + u l(x)
\]</span></p>
<p>Devam edersek belli bir <span class="math inline">\(f^\ast\)</span> minimumu düşünelim,</p>
<p><span class="math display">\[
f^\ast \ge \min_{x \in C} L(x,u,v) \ge \min_x L(x,u,v) \equiv g(u,v)
\]</span></p>
<p>LP örneğindeki yaklaşım, sadece olurlu küme <span class="math inline">\(C\)</span> yerine tüm <span class="math inline">\(x\)</span>'ler üzerinden minimizasiyon bir alt sınır oluşturur. <span class="math inline">\(g(u,v)\)</span>'ye ikiz fonksiyon diyoruz.</p>
<p>Peki niye <span class="math inline">\(g(u,v)\)</span> tanımını <span class="math inline">\(\min_{x \in C} L(x,u,v)\)</span> için yapmadım, tüm <span class="math inline">\(x\)</span>'ler üzerinden olan kısıtlanmamış versiyon için yaptım? Çünkü tüm <span class="math inline">\(x\)</span>'ler üzerinden olan tanım bizim için daha faydalı. O tür ifadeler üzerinde analitik çözüm geliştirmek daha rahattır, analitik çözüm olmasa bile tüm <span class="math inline">\(x\)</span>'ler üzerinden yaklaşım daha faydalı. Tabii hala bazı kısıtlamalar var, mesela <span class="math inline">\(u \ge 0\)</span> olmalı.</p>
<p>İkiz fonksiyon <span class="math inline">\(g\)</span>'nin <span class="math inline">\(\lambda\)</span>'ya (aslında <span class="math inline">\(u\)</span>) gore bir grafiğini altta görüyoruz,</p>
<div class="figure">
<img src="func_56_gendual_02.png" />

</div>
<p>Kesikli çizgi kriter, ve <span class="math inline">\(g\)</span> her <span class="math inline">\(\lambda\)</span> için kriterin hep altında.</p>
<p>Peki niye ikizi yapabildiğim en büyük değer kriterin olurlu kümede olabilecek en ufak değerine eşit değil (ikizin tepesi kesikli çizgiye değmiyor)? Çünkü elimizdeki bir dışbükey olmayan fonksiyon. Dişbükeylik olsaydı alt sınır sıkı olurdu. Dışbükey olmayan fonksiyonlarda da sıkılık görülebilir ama dışbükeylik durumundaki gibi bu şart değildir.</p>
<p>Biraz daha zor bir örneğe bakalım.</p>
<p>Standart formda bir karesel program (QP).</p>
<p><span class="math display">\[
\min_x \frac{1}{2} x^T Q x + c^T x \quad \textrm{öyle ki}
\]</span> <span class="math display">\[
Ax = b, \quad x \ge 0
\]</span></p>
<p>ki <span class="math inline">\(Q\)</span> pozitif kesin, <span class="math inline">\(Q \succ 0\)</span> olarak gösterilir, en küçük özdeğeri harfiyen sıfırdan büyük (yani <span class="math inline">\(&gt;0\)</span>, <span class="math inline">\(\ge 0\)</span> değil), bu durumda üstteki problem harfiyen dışbükey olur.</p>
<p>Lagrangian için öğrendiğimiz tarifi uygularsak,</p>
<p><span class="math display">\[
L(x,u,v) = \frac{1}{2} x^T Q x + c^Tx  - u^T x + v^T (Ax - b)
\qquad (2)
\]</span></p>
<p>İkiz fonksiyonu bulalım şimdi. <span class="math inline">\(x\)</span>, üzerinden minimizasyon yapılan değişken olacağı için <span class="math inline">\(g\)</span>'de olmayacak, yani</p>
<p><span class="math display">\[
g(u,v) = \min_x L(x,u,v) 
\]</span></p>
<p><span class="math inline">\(x\)</span>'ler üzerinden ufak bir gruplama sonrası</p>
<p><span class="math display">\[
= \min_x \frac{1}{2} x^T Q x + (c - u + A^T v)^T x - b^T v  
\qquad (1)
\]</span></p>
<p>Bu minimumu nasıl buluruz? Gradyanı alıp sıfıra eşitleriz değil mi? Tabii üstteki tanıdık bir formda, eğer tek boyuttan hatırlarsak,</p>
<p><span class="math display">\[
ax^2 + bx + c
\]</span></p>
<p>formülü olsaydı, çözüm <span class="math inline">\(x^\ast = \frac{-b}{2a}\)</span> olurdu. Çok boyutlu vektörel formda</p>
<p><span class="math display">\[
\frac{1}{2} x^T Q x + b^T x
\]</span></p>
<p>için çözüm <span class="math inline">\(x^\ast = -Q^{-1} b\)</span>. Bunu biliyorum çünkü pek çok kez bu çözümü türettim, hatırlıyorum. Bu formu bizim probleme uygularsak, (1) içindeki parantezde görülen <span class="math inline">\(c - u + A^T v\)</span> kısmı üstteki <span class="math inline">\(b\)</span> oluyor. O zaman Lagrangian'ın minimize edicisi</p>
<p><span class="math display">\[
x^\ast = -Q^{-1} (c - u + A^T v)
\]</span></p>
<p>O zaman Lagrangian'ın minimum noktası üstteki minimize ediciyi formüle geri sokunca elde edeceğim şey</p>
<p><span class="math display">\[
\min_x L(x,u,v) = L(x^\ast,u,v)
\]</span></p>
<p><span class="math display">\[
= \frac{1}{2} 
(c - u + A^Tv)^T Q^{-1} (c - u + A^Tv) - 
(c - u + A^Tv)^T Q^{-1} (c - u + A^Tv) - b^T v
\]</span></p>
<p>Geriye tek $Q^{-1} $ kaldı çünkü (2)'ye <span class="math inline">\(x^\ast\)</span>'i soktuğumuz zaman <span class="math inline">\(Q\)</span> ile çarpılan ilk $Q^{-1} $ iptal oldu, ikincisi geriye kaldı, basitleştirince Lagrange ikiz fonksiyonu elde ediyoruz,</p>
<p><span class="math display">\[
g(u,v) = -\frac{1}{2} (c - u + A^Tv)^T Q^{-1}  (c - u + A^Tv) - b^Tv
\qquad (3)
\]</span></p>
<p>Yani bana verilen her <span class="math inline">\(u \ge 0\)</span> ve herhangi <span class="math inline">\(v\)</span> için hesaplayacağım üstteki formül, bana karesel programın optimumu için bir alt sınır veriyor.</p>
<p>Hiç te önemsiz olmayan bir sonuç, ama bu noktaya son derece önemsiz (gibi gözüken), gayet basit ifadeleri bir araya koyarak geldik. Ama karesel program için elde ettiğimiz sonuca bakın. Başta gördüğümüz genel form bir QP. (3)'un bu QP'nin optimal değeri için bir alt sınır oluşturacağı ilk bakışta bariz gibi durmuyor. Ama bu böyle, ve Lagrangian ikiz fonksiyonun bir özelliğinin sonucu bizi buraya getiriyor, birkaç satırlık ifadeyle üstteki kuvvetli sonucu doğrulayabiliyoruz.</p>
<p>Farklı bir varyasyona bakalım şimdi, ya <span class="math inline">\(Q \succeq 0\)</span> olsaydı, yani <span class="math inline">\(Q\)</span> pozitif yarı kesin olsaydı?</p>
<p>Bu durumda yine Lagrangian'in gradyanını alıp sıfıra eşitlerdik, vs. ve</p>
<p><span class="math display">\[
Qx = -(c-u+A^Tv) 
\qquad (4)
\]</span></p>
<p>elde ederdik, fakat <span class="math inline">\(Q\)</span>'nun tersini alıp <span class="math inline">\(x\)</span>'i elde edemezdik çünkü <span class="math inline">\(Q\)</span> pozitif kesin değil.</p>
<p>Çözüm için iki şartı gözönüne almak lazım,</p>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(c-u+A^T v \in col(Q)\)</span> ki <span class="math inline">\(col(Q)\)</span> <span class="math inline">\(Q\)</span>'nun kolon uzayı demek, yani (4) lineer ifadesini tatmin eden bir <span class="math inline">\(x\)</span> var. Bu durumda <span class="math inline">\(x^\ast\)</span></li>
</ol>
<p><span class="math display">\[
x^\ast = -Q^{+}(c-u+A^Tv)
\]</span></p>
<p>olarak yazılabilir, ki <span class="math inline">\(^+\)</span> işareti genelleştirilmiş ters (generalized inverse) demek. Bu işleme bazen sözde ters (pseudo inverse) ismi de veriliyor, ve çoğunlukla eşsiz değer ayrıştırması (singular value decomposition) üzerinden tanımlanıyor. Ama <span class="math inline">\(Q\)</span> simetrik olduğu için onun öz ayrıştırmasını (eigen decomposition) yazsam da olur herhalde, <span class="math inline">\(Q\)</span>'yu şu sekilde yazsaydım,</p>
<p><span class="math display">\[
Q = U D U^T
\]</span></p>
<p>Eğer <span class="math inline">\(Q\)</span> pozitif yarı kesin ise o zaman <span class="math inline">\(D\)</span> içinde bazı değerlerin sıfır olması mümkün, yani şunun gibi bir durum olabilir,</p>
<p><span class="math display">\[
= U \left[\begin{array}{ccccc}
d_1 &amp; &amp; &amp; &amp; \\
&amp; \ddots &amp; &amp; &amp; \\
&amp; &amp; d_r &amp; &amp; \\
&amp; &amp;  &amp; 0 &amp; \\
&amp; &amp;  &amp;  &amp; 0 
\end{array}\right]
U^T
\]</span></p>
<p><span class="math inline">\(Q^+\)</span> sözde tersini tanımlamanın bir yolu üstteki öz ayrıştırma üzerindendir (dikdörtgensel matrisler için SVD üzerinden).</p>
<p>Ama ondan önce bir soru, eğer tüm değerleri sıfır olmayan bir <span class="math inline">\(D\)</span> üzerinden bir öz ayrıştırmam olsaydı? Basit, <span class="math inline">\(U D^{-1} U^T\)</span> değil mi? Unutmayalım <span class="math inline">\(U\)</span> matrisi dikgen.</p>
<p>Ama pozitif yarı kesinlik var, o yüzden <span class="math inline">\(D\)</span>'nin tersini alamıyorum. Bu sebeple sözde ters işlemi <span class="math inline">\(D\)</span> içindeki tersi alınabilen değerlerin tersini alıp diğerlerini olduğu gibi bırakmak üzerinden tanımlanmıştır.</p>
<p><span class="math display">\[
Q^+ = U \left[\begin{array}{ccccc}
1/d_1 &amp; &amp; &amp; &amp; \\
&amp; \ddots &amp; &amp; &amp; \\
&amp; &amp; 1/d_r &amp; &amp; \\
&amp; &amp;  &amp; 0 &amp; \\
&amp; &amp;  &amp;  &amp; 0 
\end{array}\right]
U^T
\]</span></p>
<p>Üsttekine bazen &quot;Moore-Penrose sözde tersi'' ismi verildiğini de duyabilirsiniz, aslında pek çok farklı sözde ters yöntemleri var, ama standart olan üstteki.</p>
<p>Yani bu durumda <span class="math inline">\(c-u+A^T v\)</span>'nin içinde <span class="math inline">\(Q\)</span>'nun kolon uzayında olmayan bazı öğeleri var, yani bu bazı öğeler <span class="math inline">\(col(Q)\)</span>'a dikgen olan bir uzaydalar, sıfır (null) uzayındalar. <span class="math inline">\(Q\)</span> simetrik olduğu için kolon uzayıyla sıfır uzayı birbirini dikgen tamamlıyor.</p>
<p><span class="math display">\[
c-u+A^T v \perp null(Q)
\]</span></p>
<ol start="2" style="list-style-type: decimal">
<li>Bu durumda üstteki sıfır uzayıyla olan dikgenlik doğru değil. O zaman ne olur? O durumda (4)'ün çözümü yoktur. O zaman (1)'ın minimizasyonuna ne olacak? (1)'i istediğimiz kadar ufak yapabiliriz, yani <span class="math inline">\(-\infty\)</span>'a kadar gidebiliriz. Çünkü düşünürsek sıfır uzayında olan <span class="math inline">\(x\)</span> seçeneği (1)'in ilk terimini sıfır yapar, ama ikinci terimi istediğimiz yöne çekebiliriz, ta ki <span class="math inline">\(-\infty\)</span> olana kadar.</li>
</ol>
<p><span class="math display">\[
g(u,v) = 
\left\{ \begin{array}{ll}
-\frac{1}{2} (c - u + A^Tv)^T Q^{-1}  (c - u + A^Tv) - b^Tv &amp; 
  \textrm{eğer } c - u + A^Tv \perp null(Q)\\
-\infty &amp; \textrm{eğer tersi doğruysa}
\end{array} \right.
\]</span></p>
<p>Şimdi geri bir adım atıp her şeye bakalım. Elimizde bir QP varsa Lagrange ikiz fonksiyon da karesel, o zaman Lagrange ikizi maksimize etmek hala bir QP. Yani QP'lerin ikizleri yine QP.</p>
<p>Biraz önce gördüğümüz QP örneğinde Lagrange ikiz karesel, ama tanım kümesinde (domain) bir kısıtlama var, üstteki <span class="math inline">\(g(u,v)\)</span>'de görüyoruz. Fakat bu tanım kümesi kısıtlamasını bir QP kısıtlamasına çevirebiliriz, spesifik olarak <span class="math inline">\(u,v\)</span> üzerinde bir eşitlik kısıtlamasına. <span class="math inline">\(null(Q)\)</span>'ya dikgen olmak demek <span class="math inline">\(Q\)</span>'nun sıfır uzayına olan yansıtma matrisini, <span class="math inline">\(P\)</span> diyelim, alıp <span class="math inline">\(c - u + A^Tv\)</span> ile çarparsam sıfır sonucunu almalıyım. Bunu eşitlik kısıtlaması olarak kodlayabilirim. Tabii bu tür bir eşitlik kısıtlaması eklemek ikiz problemi daha çetrefil hale getirecektir.</p>
<p>Bir diğer örneğe bakalım. Bu çok daha basit bir karesel program, iki boyutlu.</p>
<p><span class="math display">\[
\min_{x \in (x_1,x_2)} f(x) = \frac{1}{2} x^T Q x b^T x \quad \textrm{öyle ki}
\]</span> <span class="math display">\[
x \ge 0
\]</span></p>
<p>İkiz fonksiyon</p>
<p><span class="math display">\[
g(u) = \min_x \frac{1}{2} x^T Q x + b^T x - u^T x 
\]</span></p>
<p>ki <span class="math inline">\(u = (u_1,u_2)\)</span></p>
<p>Ana problem karesel, ikiz de karesel. Problemleri grafik olarak görelim, hem ana (primal) hem de ikiz (dual) aynı grafikte olacak şekilde,</p>
<div class="figure">
<img src="func_56_gendual_03.png" />

</div>
<p>İkizin nasıl gözükeceğini daha önceki örneklerden tahmin edebilirdik, (3) formülünde eksi işareti var, ikiz bir içbükey yüzey olacak.</p>
<p>İlginç bir şey görüyoruz, ana problemin en küçük olduğu nokta ikizin en büyük olduğu noktada. Üstteki sistem sıkı olacak gibi duruyor, eğer üstteki <span class="math inline">\(g(u)\)</span>'yu maksimize etmek bana <span class="math inline">\(f^\ast\)</span>'i geri verecek. Bu durumun bu örneğe özel olmadığını belirtmek isterim, dışbükey problemlerde sık sık olan bir şey bu.</p>
<p>Bir diğer ilginç durum, ikiz çözümün nerede olduğu, yani <span class="math inline">\(u_1,u_2\)</span>'den bahsediyorum, kriterden değil. Kriter çözüm noktasında ana ve ikizde uymalı. İkiz çözüm <span class="math inline">\((0,0)\)</span>'da. Ana çözüm, resimden pek belli olmuyor ama <span class="math inline">\(x_1,x_2\)</span> kordinat sisteminin içlerine doğru bir yerlerde yani her ikisi de harfiyen pozitif. Bu bir raslantı mı? Yani <span class="math inline">\(x_1,x_2\)</span> harfiyen pozitif ise (yani <span class="math inline">\(&gt;0\)</span>) ikizin sıfır olma durumu?</p>
<p>Değil. Burada olan birbirini tamamlayan serbestlik (complementary slackness) durumu. Bu kavramı Karush-Kuhn-Tucker (KKT) şartlarını işlediğimizde öğreneceğiz. Eğer problemde gördüğümüz sınırlamaların herhangi biri çözüm noktasında sıkı değilse ona tekabül eden ikiz değişken sıfır olmalı. Bu olması gereken bir fenomen ve ispatını da yapacağız. Üstteki örnekte her iki şart da çözümde sıkı değil, <span class="math inline">\(x\)</span> her iki kordinatta da sıfırdan büyük, bu her iki ikiz değişkeni çözümde sıfır olmaya zorluyor.</p>
<p>Tekrar üzerinden geçersek, bir ana problem,</p>
<p><span class="math display">\[
\min_x f(x) \quad \textrm{öyle ki}
\]</span> <span class="math display">\[
h_i(x) \le 0, \quad i=1,..,m
\]</span> <span class="math display">\[
l_j(x) = 0, \quad j=1,..,r
\]</span></p>
<p>için bir ikiz <span class="math inline">\(g(u,v)\)</span> oluşturabiliriz ki her zaman <span class="math inline">\(f^\ast \ge g(u,v)\)</span> olacaktır her <span class="math inline">\(u \ge 0\)</span> ve <span class="math inline">\(v\)</span> için. O zaman en iyi alt sınır <span class="math inline">\(g(u,v)\)</span>'yi <em>tüm</em> olurlu <span class="math inline">\(u,v\)</span>'ler üzerinden maksimize ederek elde edilir. Bu bize Lagrange ikizi problemi verir,</p>
<p><span class="math display">\[
\max_{u,v} g(u,v) \quad \textrm{öyle ki}
\]</span> <span class="math display">\[
u \ge 0
\]</span></p>
<p>Önemli bir özellik zayıf ikizlik durumu, eğer ikizin optimal değerine <span class="math inline">\(g^\ast\)</span> dersek <span class="math inline">\(f^\ast \ge g^\ast\)</span>.</p>
<p>Üstteki ilişki ana problem dışbükey olmasa bile işliyor. Yani elimizde müthiş dışbükey olmayan çok zor bir optimizasyon problemi olabilir, ama onun ikizini oluşturursak bu yeni problemin optimal değeri her zaman ana problem için bir alt sınır oluşturuyor. Bazen bu optimal değerin kendisi bile faydalı, belki kriter fonksiyonun kendisi mesela bir ekonomik bedel, bir yol miktarı, vs gibi bir şeyi temsil ediyor ve ona iyi bir alt sınır bulmak bile bize önemli bir bilgi veriyor.</p>
<p>Şimdi sıkı durun, dahası da var. Birazdan bahsedeceğim şey ilk duyanları çok şaşırtıyor. İkiz problem <em>her zaman</em> bir içbükey / dışbükey optimizasyon problemi. Bu önemli çünkü dışbükey programları bir şekilde muhakkak sayısal olarak çözebiliyoruz, <code>cvx</code> paketi ile belki, ya da altgradyan (subgradient) metotlarıyla.. bir şekilde bu olur. Bilimin vardığı nokta burası, o problem çözüldü. Bu çok iyi çünkü eğer ana problem minimizasyon problemi ise ikiz her zaman içbükey maksimizasyon, ya da diğer yönde ana problem maksimizasyon ise ikiz dışbükey minimizasyon, ve içbükey / dışbükey problemi çözebiliyoruz. Bu her zaman doğru, ana problem ne olursa olsun.</p>
<p>Niye? İspatını yapacağız, ana maksimizasyondan başlayarak <span class="math inline">\(g\)</span>'nin her zaman bir içbükey fonksiyon olduğunu ispatlayacağız. Bu ispat çok basit aslında. Tanım itibariyle,</p>
<p><span class="math display">\[
g(u,v) = \min_x \left\{ 
f(x) + \sum_{i=1}^{m} u_i h_i(x) + \sum_{i=1}^{r} v_i l_i(x) 
\right\}
\]</span></p>
<p>Her şeyi eksi ile çarparsak üsttekini bir maksimizasyona çevirebiliriz,</p>
<p><span class="math display">\[
= -\max_x \left\{ 
-f(x) - \sum_{i=1}^{m} u_i h_i(x) - \sum_{i=1}^{r} v_i l_i(x) 
\right\}
\]</span></p>
<p>Şimdi <span class="math inline">\(\max\)</span> başındaki eksiye bakmadan geri kalanlara bakalım. <span class="math inline">\(u,v\)</span> üzerinden düşünürsek üstte çarpımlar ve toplamlar var. <span class="math inline">\(u,v\)</span> açısından <span class="math inline">\(f(x)\)</span> bile bir sabitin toplamı demektir. Çarpım toplamlar doğrusal fonksiyondur, doğrusal fonksiyonlar ise dışbükeydir. Şimdi <span class="math inline">\(\max\)</span> basındaki eksiyi de hesaba katarsak dışbükey içbükey olur (ama hala aynı familyadayız). Yani ikizde elimizde kesinlikle bir içbükey problem olmalı.</p>
<p>Fakat genel uygulamalarda önümüze bazı engeller çıkabiliyor. Mesela Lagrangian'ın kendisinin hesabı oldukca çetrefil olabilir. Eğer ana problem dışbükey ise Lagrangian hesabı kolay ama çetrefil <span class="math inline">\(f(x)\)</span>'ler için bu iş daha zor. Yani dışbükey olmayan ana problemin şanslıysak ikiz hesabı kolaydır, ama çoğunlukla iş zor.</p>
<p>Altta bir örnek seçtim, öyle ki ikiz hesaplanabilir halde olacak, her ne kadar ana problem olmasa da.</p>
<p><span class="math display">\[
\max f(x) = x^4 - 50x^2 + 100x, \quad \textrm{öyle ki} \quad x \ge -4.5
\]</span></p>
<p>Problemin grafigi altta</p>
<div class="figure">
<img src="func_56_gendual_04.png" />

</div>
<p>Sol grafikteki koyu siyah nokta ikizdeki maksimuma tekabül eden nokta, gerçek minimum değil, o minimum biraz daha sola doğru. Sağdaki ikiz grafiğini hesapladım, <span class="math inline">\(u\)</span> yok tabii çünkü eşitlik kısıtlaması yok. İkizin içbükey olduğuna dikkat. Ana problem dışbükey değil, ama ikiz içbükey.</p>
<p>Ayrıca ikiz aşağı yukarı &quot;parçalı lineer'' denebilecek bir halde, ki bu durum da ana problem dışbükey olmadığında yaygın şekilde görülen bir durum.</p>
<p>Bu arada eğer <span class="math inline">\(g\)</span>'yi cebirsel olarak türetirsek, oldukca çetrefil bir form elde edeceğimizi görebiliriz [türetim atlandı, burada benim notum, içbükey bir problemi pür sayısal olarak çözmenin nasıl olsa mümkün olacağı].</p>
<p>Güçlü İkizlik</p>
<p>Daha önce <span class="math inline">\(f^\ast \ge g^\ast\)</span> olması gerektiğini gördük. Fakat pek çok problemde</p>
<p><span class="math display">\[
f^\ast = g^\ast
\]</span></p>
<p>olduğunu da gördük. Yani ana ve ikiz problem arasında hiç boşluk yok. Buna güçlü ikizlik ismi veriliyor. Hatta bu durum neredeyse her dışbükey optimizasyon probleminde ortaya çıkıyor. Neredeyse dedik çünkü Slater şartı denen bir şart da lazım bu şarta göre eğer olurlu kümede tüm eşitlik tüm eşitsizlik şartlarını harfiyen yerine getiren en az bir nokta varsa o zaman güçlü ikizlik var. Harfiyen derken tüm eşitlik şartları sıfıra eşit, tüm eşitsizlikler sıfırdan küçük olmalı.</p>
<p>Çoğunlukla bu çok, çok zayıf bir şart, yani yerine getirmesi çok kolay. Yani ana problemin dışbükey olup da Slater şartına uymaması çok nadirdir, eğer ana problemde çok absürt şartların olması lazım.</p>
<p>Slater şartının LP'ler için anlamı nedir? LP'ler zaten doğal olarak dışbükeydir, ama onlar için zaten tüm şartlar doğrusal olduğu için LP olurlu ise otomatik olarak güçlü ikizlik vardır [gerisi atlandı]</p>
<p>İkizlik Boşluğu (Duality Gap)</p>
<p>Bir basit kavrama daha değinelim. Basit ama çok faydalı olabilir, mesela ana ve ikizi optimize etmek içi bir özyineli algoritma geliştiriyorsunuz, ve bir olurlu <span class="math inline">\(x\)</span>'imiz ve olurlu <span class="math inline">\(u,v\)</span>'miz var ise,</p>
<p><span class="math display">\[
f(x) - g(u,v)
\]</span></p>
<p>büyüklüğünü hesaplayabiliriz. Bu niye faydalı? Çünkü ikizlik boşluğu her zaman <span class="math inline">\(f(x)\)</span>'in optimale yakınlığına bir üst sınır oluşturur,</p>
<p><span class="math display">\[
f(x) - f^\ast \le f(x) - g(u,v) 
\qquad (5)
\]</span></p>
<p>Nasıl türetildi? <span class="math inline">\(g(u,v) \le f^\ast\)</span> olduğunu biliyoruz, ya da <span class="math inline">\(-g(u,v) \ge -f^\ast\)</span>. Sonra <span class="math inline">\(f(x)=f(x)\)</span> ile başlayarak bir tarafa <span class="math inline">\(-f^\ast\)</span> diğerine <span class="math inline">\(-g(u,v)\)</span> ekleriz, üstteki eşitsizliği elde ederiz.</p>
<p>O zaman ana ve ikizi optimize etmek içi bir özyineli algoritma geliştirirken &quot;optimal kritere ne kadar yakınım?'' diye merak ediyorsak, (5) hesabını yaparsak o değerden daha uzak olamayacağımızı biliriz. Eğer 0.001 almışsak, 0.001'dan uzak olamayız. Tabii aynı argüman ikiz kriteri için de geçerli, ondan da 0.001'den daha uzakta olamayız, <span class="math inline">\(g^\ast-g(u,v)\)</span> aynı şekilde sınırlanmıştır.</p>
<p>Bu kavramları özyineli algoritmada bir durma şartı olarak kullanabiliriz. Eğer <span class="math inline">\(f(x) - g(u,v) &lt; \epsilon\)</span> ise <span class="math inline">\(f(x) - f^\ast &lt; \epsilon\)</span> olması garantidir, geldiğimiz nokta bir &quot;<span class="math inline">\(\epsilon\)</span> alt optimalliktir'', ya da bir &quot;<span class="math inline">\(\epsilon\)</span> alt optimal sonucu'' elde etmişizdir.</p>
<p>Bu kavram KKT şartlarına gelince de faydalı olacak.</p>
<p>Kaynaklar</p>
<p>[1] Tibshirani, <em>Convex Optimization, Lecture Video 11</em>, <a href="https://www.youtube.com/channel/UCIvaLZcfz3ikJ1cD-zMpIXg" class="uri">https://www.youtube.com/channel/UCIvaLZcfz3ikJ1cD-zMpIXg</a></p>
<p>
  <a href="..">Yukarı</a>
</p>
</body>
</html>
